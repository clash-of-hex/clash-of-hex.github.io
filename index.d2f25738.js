function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};var n={},r={},o=t.parcelRequirefd0c;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){r[e]=t},t.parcelRequirefd0c=o),o.register("27Lyk",(function(t,n){var r,o;e(t.exports,"register",(()=>r),(e=>r=e)),e(t.exports,"resolve",(()=>o),(e=>o=e));var s={};r=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)s[t[n]]=e[t[n]]},o=function(e){var t=s[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),o.register("9xxDW",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.parseTokensObject=e.exports.serializeTokensObject=e.exports.parseAccountInteraction=e.exports.parsePermissions=e.exports.parseMessage=e.exports.serializeMessage=e.exports.parseTransaction=e.exports.serializeTransaction=void 0;var n=o("jUlBj");function r(e){return{...e,src:e.src?e.src.toString():void 0,dst:e.dst?e.dst.toString():void 0}}function s(e){return{...e,src:e.src?new n.Address(e.src):void 0,dst:e.dst?new n.Address(e.dst):void 0}}function i(e){return{...e,address:new n.Address(e.address)}}function a(e){if(e instanceof n.Address)return e.toString();if(Array.isArray(e)){const t=[];for(const n of e)t.push(a(n));return t}if(null!=e&&"object"==typeof e){const t={};for(const[n,r]of Object.entries(e))t[n]=a(r);return t}return e}function c(e,t){if(e.type.startsWith("map")){let[n,r]=e.type.split(",");n=n.slice(4),r=r.slice(0,-1);const o=[];for(const[s,i]of t)o.push([c({name:"",type:n},s),c({name:"",type:r,components:e.components},i)]);return o}{const r=e.type.endsWith("[]"),o=!r&&e.type.startsWith("optional"),s=r?e.type.slice(0,-2):o?e.type.slice(9,-1):e.type;if(r){const n={name:e.name,type:s,components:e.components},r=[];for(const e of t)r.push(c(n,e));return r}if(o){if(null==t)return null;return c({name:e.name,type:s,components:e.components},t)}if("tuple"===s){const n={};if(null!=e.components)for(const r of e.components)n[r.name]=c(r,t[r.name]);return n}return"address"===s?new n.Address(t):t}}e.exports.serializeTransaction=function(e){return{...e,inMessage:r(e.inMessage),outMessages:e.outMessages.map(r)}},e.exports.parseTransaction=function(e){return{...e,inMessage:s(e.inMessage),outMessages:e.outMessages.map(s)}},e.exports.serializeMessage=r,e.exports.parseMessage=s,e.exports.parsePermissions=function(e){return{...e,accountInteraction:e.accountInteraction?i(e.accountInteraction):void 0}},e.exports.parseAccountInteraction=i,e.exports.serializeTokensObject=function(e){return a(e)},e.exports.parseTokensObject=function(e,t){const n={};for(const r of e)n[r.name]=c(r,t[r.name]);return n}})),o.register("jUlBj",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.getUniqueId=e.exports.mergeTransactions=e.exports.LT_COLLATOR=e.exports.Semaphore=e.exports.DelayedTransactions=e.exports.MessageExpiredException=e.exports.AddressLiteral=e.exports.Address=void 0;class n{constructor(e){this.equals=e=>this._equals(e),this._address=e}toString(){return this._address}toJSON(){return this._address}_equals(e){return e instanceof n?this._address===e._address:this._address===e}}e.exports.Address=n;e.exports.AddressLiteral=class extends n{constructor(e){super(e)}};class r extends Error{constructor(e,t){super("Message expired"),this.address=e,this.hash=t}}e.exports.MessageExpiredException=r;e.exports.DelayedTransactions=class{constructor(){this.transactions=new Map}async waitTransaction(e,t){var n;let o=null===(n=this.transactions.get(t))||void 0===n?void 0:n.promise;if(null==o){let e,n;o=new Promise(((t,r)=>{e=e=>t(e),n=()=>r()})),this.transactions.set(t,{promise:o,resolve:e,reject:n})}const s=await o;if(null==s)throw new r(e,t);return s}fillTransaction(e,t){const n=this.transactions.get(e);null!=n?n.resolve(t):this.transactions.set(e,{promise:Promise.resolve(t),resolve:()=>{},reject:()=>{}})}};function o(e){const t=document.createTextNode("");let n,r,o=0,s=0;return new e((function(){let e;if(n)r&&(n=r.slice(s).concat(n));else{if(!r)return;n=r}if(r=n,n=null,s=0,"function"==typeof r)return e=r,r=null,void e();for(t.data=o=++o%2;s<r.length;)e=r[s],s++,s===r.length&&(r=null),e()})).observe(t,{characterData:!0}),function(e){n?"function"==typeof n?n=[n,e]:n.push(e):(n=e,t.data=o=++o%2)}}e.exports.Semaphore=class{constructor(e){this.tasks=[],this.sched=()=>{var e;this.count>0&&this.tasks.length>0&&(this.count--,null===(e=this.tasks.shift())||void 0===e||e())},this.count=e}acquire(){return new Promise(((e,t)=>{this.tasks.push((()=>{let t=!1;e((()=>{t||(t=!0,this.count++,this.sched())}))})),s(this.sched)}))}releaseAll(){for(var e;this.tasks.length>0;)null===(e=this.tasks.shift())||void 0===e||e()}};const s=function(){if("function"==typeof queueMicrotask)return queueMicrotask;if("object"==typeof document&&document){if("function"==typeof MutationObserver)return o(MutationObserver);if("function"==typeof window.WebKitMutationObserver)return o(window.WebKitMutationObserver)}if("function"==typeof setImmediate)return setImmediate;if("function"==typeof setTimeout||"object"==typeof setTimeout)return function(e){setTimeout(e,0)};throw new Error("No `nextTick` implementation found")}();e.exports.LT_COLLATOR=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}),e.exports.mergeTransactions=function(t,n,r){if("old"===r.batchType)return t.push(...n),t;if(0===t.length)return t.push(...n),t;let o=0;for(;o<t.length&&e.exports.LT_COLLATOR.compare(t[o].id.lt,r.maxLt)>=0;)++o;return t.splice(o,0,...n),t};const i=4294967295;let a=Math.floor(Math.random()*i);e.exports.getUniqueId=function(){return a=(a+1)%i,a}})),o.register("9XiRg",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Subscriber=void 0;var n=o("jUlBj"),r=o("9xxDW");async function s(e,t){return t(e)}e.exports.Subscriber=class{constructor(e){this.provider=e,this.subscriptions=new Map,this.scanners=new Map,this.unsubscribe=async()=>this._unsubscribe()}transactions(e){return this._addSubscription("transactionsFound",e,!1)}trace(e){const t=(0,n.getUniqueId)();return new i(((n,r)=>{const o=new c(this.provider,{origin:e,onData:n,onEnd:e=>{this.scanners.delete(t),r(e)}});return this.scanners.set(t,o),o.start(),Promise.resolve()}),(async()=>{const e=this.scanners.get(t);null!=e&&(this.scanners.delete(t),await e.stop())}),s,!0)}oldTransactions(e,t){const r=(0,n.getUniqueId)();return new i(((n,o)=>{const s=new a(this.provider,{address:e,onData:n,onEnd:e=>{this.scanners.delete(r),o(e)},...t});return this.scanners.set(r,s),s.start(),Promise.resolve()}),(async()=>{const e=this.scanners.get(r);null!=e&&(this.scanners.delete(r),await e.stop())}),s,!0)}states(e){return this._addSubscription("contractStateChanged",e,!1)}async _unsubscribe(){const e=[];for(const t of this.subscriptions.values())for(const[n,r]of Object.entries(t))delete t[n],null!=r&&e.push(r.subscription.then((e=>e.unsubscribe())).catch((()=>{})));this.subscriptions.clear();for(const t of this.scanners.values())e.push(t.stop());this.scanners.clear(),await Promise.all(e)}_addSubscription(e,t,r){const o=t.toString(),a=t=>{const n=this.subscriptions.get(o);if(null==n)return;const r=n[e];if(null!=r){const o=r.handlers.get(t);if(null!=o){r.handlers.delete(t);const{queue:e,onEnd:n,state:s}=o;s.finished||(s.finished=!0,e.clear(),e.enqueue((async()=>n(s.eof))))}if(0===r.handlers.size){const t=r.subscription;delete n[e],t.then((e=>e.unsubscribe())).catch(console.debug)}}null==n.contractStateChanged&&null==n.transactionsFound&&this.subscriptions.delete(o)},c=(0,n.getUniqueId)();return new i(((n,r)=>{const s=this.subscriptions.get(o);let i=null==s?void 0:s[e];const l={onData:n,onEnd:r,queue:new u,state:{eof:!1,finished:!1}};if(null!=i)return i.handlers.set(c,l),Promise.resolve();const d=new Map;d.set(c,l);const _=this.provider.subscribe(e,{address:t}).then((e=>(e.on("data",(e=>{for(const{onData:t,queue:n,state:r}of d.values())r.eof||r.finished||n.enqueue((async()=>{await t(e)||(r.eof=!0,a(c))}))})),e.on("unsubscribed",(()=>{for(const e of d.keys())a(e)})),e))).catch((e=>{console.error(e);for(const e of d.keys())a(e);throw e}));return i={subscription:_,handlers:d},null==s?this.subscriptions.set(o,{[e]:i}):s[e]=i,_.then((()=>{}))}),(()=>a(c)),s,r)}};class i{constructor(e,t,n,r){this.makeProducer=e,this.stopProducer=t,this.extractor=n,this.isFinite=r,this.fold=this.onlyFinite(((e,t,n)=>{let r=e;return new Promise(((e,o)=>{const s=this.makeProducer((e=>this.extractor(e,(async e=>(r=await t(r,e),!0)))),(t=>{t?e(r):o(new Error("Subscription closed"))}));null!=n&&(n.subscribed=s)}))})),this.finished=this.onlyFinite((e=>new Promise(((t,n)=>{const r=this.makeProducer((e=>this.extractor(e,(e=>!0))),(e=>{e?t(void 0):n(new Error("Subscription closed"))}));null!=e&&(e.subscribed=r)}))))}async delayed(e){const{subscribed:t,result:n}=e({first:()=>{const e={},t=this.first(e);return{subscribed:e.subscribed,result:t}},on:e=>{const t={};return this.on(e,t),{subscribed:t.subscribed,result:void 0}},fold:null!=this.fold?(e,t)=>{const n={},r=this.fold(e,t,n);return{subscribed:n.subscribed,result:r}}:void 0,finished:null!=this.finished?()=>{const e={},t=this.finished(e);return{subscribed:e.subscribed,result:t}}:void 0});return await t,()=>n}first(e){const t={found:!1};return new Promise(((n,r)=>{const o=this.makeProducer((e=>this.extractor(e,(e=>(Object.assign(t,{found:!0,result:e}),!1)))),(e=>{e?this.isFinite?n(t.found?t.result:void 0):t.found?n(t.result):r(new Error("Unexpected end of stream")):r(new Error("Subscription closed"))}));null!=e&&(e.subscribed=o)}))}on(e,t){const n=this.makeProducer((t=>this.extractor(t,(async t=>(await e(t),!0)))),(e=>{}));null!=t&&(t.subscribed=n)}merge(e){return new i(((t,n)=>{const r={stopped:!1,counter:0},o=e=>{r.stopped||2!=++r.counter&&e||(r.stopped=!0,n(e))};return Promise.all([this.makeProducer(t,o),e.makeProducer(t,o)]).then((()=>{}))}),(()=>{this.stopProducer(),e.stopProducer()}),this.extractor,this.isFinite&&e.isFinite)}enumerate(){const e={index:0};return new i(this.makeProducer,this.stopProducer,((t,n)=>this.extractor(t,(async t=>n({index:e.index++,item:t})))),this.isFinite)}tap(e){return new i(this.makeProducer,this.stopProducer,((t,n)=>this.extractor(t,(async t=>(await e(t),n(t))))),this.isFinite)}filter(e){return new i(this.makeProducer,this.stopProducer,((t,n)=>this.extractor(t,(async t=>!await e(t)||n(t)))),this.isFinite)}filterMap(e){return new i(this.makeProducer,this.stopProducer,((t,n)=>this.extractor(t,(async t=>{const r=await e(t);return void 0===r||n(r)}))),this.isFinite)}map(e){return new i(this.makeProducer,this.stopProducer,((t,n)=>this.extractor(t,(async t=>{const r=await e(t);return n(r)}))),this.isFinite)}flatMap(e){return new i(this.makeProducer,this.stopProducer,((t,n)=>this.extractor(t,(async t=>{const r=await e(t);for(const e of r)if(!await n(e))return!1;return!0}))),this.isFinite)}skip(e){const t={index:0};return new i(this.makeProducer,this.stopProducer,((n,r)=>this.extractor(n,(n=>t.index>=e?r(n):(++t.index,!0)))),this.isFinite)}skipWhile(e){const t={shouldSkip:!0};return new i(this.makeProducer,this.stopProducer,((n,r)=>this.extractor(n,(async n=>!(!t.shouldSkip||!await e(n))||(t.shouldSkip=!1,r(n))))),this.isFinite)}take(e){const t={index:0};return new i(this.makeProducer,this.stopProducer,((n,r)=>this.extractor(n,(n=>t.index<e&&(++t.index,r(n))))),!0)}takeWhile(e){return new i(this.makeProducer,this.stopProducer,((t,n)=>this.extractor(t,(async t=>!!await e(t)&&n(t)))),!0)}takeWhileMap(e){return new i(this.makeProducer,this.stopProducer,((t,n)=>this.extractor(t,(async t=>{const r=await e(t);return void 0!==r&&n(r)}))),!0)}onlyFinite(e){return this.isFinite?e:void 0}}class a{constructor(e,t){this.provider=e,this.params=t,this.queue=new u,this.isRunning=!1}start(){this.isRunning||null!=this.promise||(this.isRunning=!0,this.promise=(async()=>{const e=this.params,t={complete:!1};for(;this.isRunning&&!t.complete;)try{const{transactions:r,continuation:o}=await this.provider.getTransactions({address:this.params.address,continuation:this.continuation});if(t.complete=!t.complete&&null==r.length,!this.isRunning||t.complete)break;const s=r.filter((t=>(null==e.fromLt||n.LT_COLLATOR.compare(t.id.lt,e.fromLt)>0)&&(null==e.fromUtime||t.createdAt>e.fromUtime)));if(0==s.length){t.complete=!0;break}const i={maxLt:s[0].id.lt,minLt:s[s.length-1].id.lt,batchType:"old"};if(this.queue.enqueue((async()=>{this.params.onData({address:this.params.address,transactions:s,info:i})||(t.complete=!0,this.isRunning=!1)})),null==o){t.complete=!0;break}this.continuation=o}catch(e){console.error(e)}this.queue.enqueue((async()=>this.params.onEnd(t.complete))),this.isRunning=!1,this.continuation=void 0})())}async stop(){this.isRunning=!1,this.queue.clear(),null!=this.promise?await this.promise:this.params.onEnd(!1)}}class c{constructor(e,t){this.provider=e,this.params=t,this.queue=new u,this.isRunning=!1,this.semaphore=new n.Semaphore(10)}start(){if(this.isRunning||null!=this.promise)return;const e=this.provider;this.isRunning=!0,this.promise=(async()=>{const t={complete:!1},n=t=>{const n={stopped:!1};return{promise:(async()=>{let o=500;for(;;){const s=await this.semaphore.acquire();if(n.stopped)return void s();const i=await e.rawApi.findTransaction({inMessageHash:t}).catch((()=>({transaction:void 0}))).finally((()=>s()));if(n.stopped)return;if(null!=i.transaction){const e=(0,r.parseTransaction)(i.transaction);return e.account=e.inMessage.dst,e}let a;const c=new Promise(((e,t)=>{a=()=>e(),n.reject=()=>t()}));if(n.timeout=setTimeout(a,o),await c,n.stopped)return;n.reject=void 0,o=Math.min(2*o,3e3)}})(),reject:()=>{var e;n.stopped=!0,null===(e=n.reject)||void 0===e||e.call(n),null!=n.timeout&&clearTimeout(n.timeout)}}},o=[this.params.origin];try{e:for(;this.isRunning;){const e=o.shift();if(null==e){t.complete=!0;break}const r=e.outMessages.filter((e=>null!=e.dst)).map((e=>{const t=e.hash;return n(t)}));this.pendingTransactions=r;for(const{promise:e}of r){const n=await e;if(!this.isRunning||t.complete||null==n)break e;this.queue.enqueue((async()=>{this.params.onData(n)||(t.complete=!0,this.isRunning=!1,this.rejectPendingTransactions())})),o.push(n)}this.pendingTransactions=void 0}}catch(e){console.error(e)}finally{this.queue.enqueue((async()=>this.params.onEnd(t.complete))),this.isRunning=!1,this.rejectPendingTransactions()}})()}async stop(){this.isRunning=!1,this.queue.clear(),this.rejectPendingTransactions(),null!=this.promise?await this.promise:this.params.onEnd(!1)}rejectPendingTransactions(){if(null!=this.pendingTransactions){for(const e of this.pendingTransactions)e.reject();this.pendingTransactions=void 0}this.semaphore.releaseAll()}}class u{constructor(){this.queue=[],this.workingOnPromise=!1}enqueue(e){this.queue.push(e),this._dequeue().catch((()=>{}))}clear(){this.queue.length=0}async _dequeue(){if(this.workingOnPromise)return;const e=this.queue.shift();e&&(this.workingOnPromise=!0,e().then((()=>{this.workingOnPromise=!1,this._dequeue()})).catch((()=>{this.workingOnPromise=!1,this._dequeue()})))}}})),o.register("hp4X6",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.TvmException=e.exports.Contract=void 0;var n=o("jUlBj"),r=o("9xxDW");e.exports.Contract=class{constructor(e,t,n){if(!Array.isArray(t.functions))throw new Error("Invalid abi. Functions array required");if(!Array.isArray(t.events))throw new Error("Invalid abi. Events array required");this._provider=e,this._abi=JSON.stringify(t),this._functions=t.functions.reduce(((e,t)=>(e[t.name]={inputs:t.inputs||[],outputs:t.outputs||[]},e)),{}),this._events=t.events.reduce(((e,t)=>(e[t.name]={inputs:t.inputs||[]},e)),{}),this._address=n,this._methods=new Proxy({},{get:(e,t)=>{const n=this._functions[t];return(e={})=>new i(this._provider,n,this._abi,this._address,t,e)}})}get methods(){return this._methods}get address(){return this._address}get abi(){return this._abi}async getFullState(){return await this._provider.ensureInitialized(),await this._provider.rawApi.getFullContractState({address:this.address.toString()})}transactions(e){return e.transactions(this._address).flatMap((({transactions:e})=>e))}events(e){return e.transactions(this._address).flatMap((({transactions:e})=>e)).flatMap((e=>this.decodeTransactionEvents({transaction:e}).then((t=>(t.forEach((t=>t.transaction=e)),t)))))}async waitForEvent(e={}){const{range:t,filter:r}=e,o="string"==typeof r?({event:e})=>e===r:r;let s=e.subscriber;const i=null==s;null==s&&(s=new this._provider.Subscriber);const a=await(null!=(null==t?void 0:t.fromLt)||null!=(null==t?void 0:t.fromUtime)?s.oldTransactions(this._address,t).merge(s.transactions(this._address)):s.transactions(this.address)).flatMap((e=>e.transactions)).takeWhile((e=>null==t||(null==t.fromLt||n.LT_COLLATOR.compare(e.id.lt,t.fromLt)>0)&&(null==t.fromUtime||e.createdAt>t.fromUtime)&&(null==t.toLt||n.LT_COLLATOR.compare(e.id.lt,t.toLt)<0)&&(null==t.toUtime||e.createdAt<t.toUtime))).flatMap((e=>this.decodeTransactionEvents({transaction:e}).then((t=>(t.forEach((t=>t.transaction=e)),t))))).filterMap((async e=>null==o||await o(e)?e:void 0)).first();return i&&await s.unsubscribe(),a}async getPastEvents(e){const{range:t,filter:r,limit:o}=e,s="string"==typeof r?({event:e})=>e===r:r,i=[];let a=null==e?void 0:e.continuation;e:for(;;){const{transactions:e,continuation:r}=await this._provider.getTransactions({address:this._address,continuation:a});if(null===e.length)break;const c=e.filter((e=>(null==(null==t?void 0:t.fromLt)||n.LT_COLLATOR.compare(e.id.lt,t.fromLt)>0)&&(null==(null==t?void 0:t.fromUtime)||e.createdAt>t.fromUtime)&&(null==(null==t?void 0:t.toLt)||n.LT_COLLATOR.compare(e.id.lt,t.toLt)<0)&&(null==(null==t?void 0:t.toUtime)||e.createdAt<t.toUtime)));if(c.length>0){const e=await Promise.all(c.map((async e=>({tx:e,events:await this.decodeTransactionEvents({transaction:e}).then((t=>(t.forEach((t=>t.transaction=e)),t)))}))));for(let{tx:t,events:n}of e){null!=s&&(n=await Promise.all(n.map((async e=>await s(e)?e:void 0))).then((e=>e.filter((e=>null!=e))))),a=t.id;for(const e of n){if(null!=o&&i.length>=o)break e;i.push(e)}if(null!=o&&i.length>=o)break e}}if(a=r,null==a)break}return{events:i,continuation:a}}async decodeTransaction(e){await this._provider.ensureInitialized();try{const t=await this._provider.rawApi.decodeTransaction({transaction:(0,r.serializeTransaction)(e.transaction),abi:this._abi,method:e.methods});if(null==t)return;const{method:n,input:o,output:s}=t,i=this._functions[n];return{method:n,input:null!=i.inputs?(0,r.parseTokensObject)(i.inputs,o):{},output:null!=i.outputs?(0,r.parseTokensObject)(i.outputs,s):{}}}catch(e){return}}async decodeTransactionEvents(e){await this._provider.ensureInitialized();try{const{events:t}=await this._provider.rawApi.decodeTransactionEvents({transaction:(0,r.serializeTransaction)(e.transaction),abi:this._abi}),n=[];for(const{event:e,data:o}of t){const t=this._events[e];n.push({event:e,data:null!=t.inputs?(0,r.parseTokensObject)(t.inputs,o):{}})}return n}catch(e){return[]}}async decodeInputMessage(e){await this._provider.ensureInitialized();try{const t=await this._provider.rawApi.decodeInput({abi:this._abi,body:e.body,internal:e.internal,method:e.methods});if(null==t)return;const{method:n,input:o}=t,s=this._functions[n];return{method:n,input:null!=s.inputs?(0,r.parseTokensObject)(s.inputs,o):{}}}catch(e){return}}async decodeOutputMessage(e){await this._provider.ensureInitialized();try{const t=await this._provider.rawApi.decodeOutput({abi:this._abi,body:e.body,method:e.methods});if(null==t)return;const{method:n,output:o}=t,s=this._functions[n];return{method:n,output:null!=s.outputs?(0,r.parseTokensObject)(s.outputs,o):{}}}catch(e){return}}async decodeEvent(e){await this._provider.ensureInitialized();try{const t=await this._provider.rawApi.decodeEvent({abi:this.abi,body:e.body,event:e.events});if(null==t)return;const{event:n,data:o}=t,s=this._events[n];return{event:n,data:null!=s.inputs?(0,r.parseTokensObject)(s.inputs,o):{}}}catch(e){return}}};class s extends Error{constructor(e){super(`TvmException: ${e}`),this.code=e}}e.exports.TvmException=s;class i{constructor(e,t,n,o,s,i){this.provider=e,this.functionAbi=t,this.abi=n,this.address=o,this.method=s,this.params=(0,r.serializeTokensObject)(i)}async send(e){await this.provider.ensureInitialized();const{transaction:t}=await this.provider.rawApi.sendMessage({sender:e.from.toString(),recipient:this.address.toString(),amount:e.amount,bounce:null==e.bounce||e.bounce,payload:{abi:this.abi,method:this.method,params:this.params}});return(0,r.parseTransaction)(t)}async sendDelayed(e){await this.provider.ensureInitialized();const t=new n.DelayedTransactions,r=await this.provider.subscribe("messageStatusUpdated");r.on("data",(n=>{n.address.equals(e.from)&&t.fillTransaction(n.hash,n.transaction)}));const{message:o}=await this.provider.rawApi.sendMessageDelayed({sender:e.from.toString(),recipient:this.address.toString(),amount:e.amount,bounce:null==e.bounce||e.bounce,payload:{abi:this.abi,method:this.method,params:this.params}}).catch((e=>{throw r.unsubscribe().catch(console.error),e})),s=t.waitTransaction(this.address,o.hash).finally((()=>r.unsubscribe().catch(console.error)));return{messageHash:o.hash,expireAt:o.expireAt,transaction:s}}async sendWithResult(e){await this.provider.ensureInitialized();let t=e.subscriber;const n=null==t;null==t&&(t=new this.provider.Subscriber);try{let o,s;const i=new Promise((e=>{s=t=>e(t)})),a=[];t.transactions(this.address).flatMap((e=>e.transactions)).filter((t=>{var n;return(null===(n=t.inMessage.src)||void 0===n?void 0:n.equals(e.from))||!1})).on((e=>{null==o?a.push(e):o.possibleMessages.findIndex((t=>t.hash==e.inMessage.hash))>=0&&(null==s||s(e))}));const c=await this.send(e),u=c.outMessages.filter((e=>{var t;return(null===(t=e.dst)||void 0===t?void 0:t.equals(this.address))||!1}));o={transaction:c,possibleMessages:u};const l=a.find((e=>u.findIndex((t=>t.hash==e.inMessage.hash))>=0));null!=l&&(null==s||s(l));const d=await i;let _;try{const e=await this.provider.rawApi.decodeTransaction({transaction:(0,r.serializeTransaction)(d),abi:this.abi,method:this.method});null!=e&&(_=null!=this.functionAbi.outputs?(0,r.parseTokensObject)(this.functionAbi.outputs,e.output):{})}catch(e){console.error(e)}return{parentTransaction:o.transaction,childTransaction:d,output:_}}finally{n&&await t.unsubscribe()}}async estimateFees(e){await this.provider.ensureInitialized();const{fees:t}=await this.provider.rawApi.estimateFees({sender:e.from.toString(),recipient:this.address.toString(),amount:e.amount,payload:{abi:this.abi,method:this.method,params:this.params}});return t}async sendExternal(e){await this.provider.ensureInitialized();const t=!0===e.withoutSignature?this.provider.rawApi.sendUnsignedExternalMessage:this.provider.rawApi.sendExternalMessage,{transaction:n,output:o}=await t({publicKey:e.publicKey,recipient:this.address.toString(),stateInit:e.stateInit,payload:{abi:this.abi,method:this.method,params:this.params},local:e.local});return{transaction:(0,r.parseTransaction)(n),output:null!=o?(0,r.parseTokensObject)(this.functionAbi.outputs,o):void 0}}async sendExternalDelayed(e){await this.provider.ensureInitialized();const t=new n.DelayedTransactions,r=await this.provider.subscribe("messageStatusUpdated");r.on("data",(e=>{e.address.equals(this.address)&&t.fillTransaction(e.hash,e.transaction)}));const{message:o}=await this.provider.rawApi.sendExternalMessageDelayed({publicKey:e.publicKey,recipient:this.address.toString(),stateInit:e.stateInit,payload:{abi:this.abi,method:this.method,params:this.params}}).catch((e=>{throw r.unsubscribe().catch(console.error),e})),s=t.waitTransaction(this.address,o.hash).finally((()=>r.unsubscribe().catch(console.error)));return{messageHash:o.hash,expireAt:o.expireAt,transaction:s}}async call(e={}){await this.provider.ensureInitialized();const{output:t,code:n}=await this.provider.rawApi.runLocal({address:this.address.toString(),cachedState:e.cachedState,responsible:e.responsible,functionCall:{abi:this.abi,method:this.method,params:this.params}});if(null==t||0!=n)throw new s(n);return(0,r.parseTokensObject)(this.functionAbi.outputs,t)}async encodeInternal(){await this.provider.ensureInitialized();const{boc:e}=await this.provider.rawApi.encodeInternalInput({abi:this.abi,method:this.method,params:this.params});return e}}})),o.register("cQ7sV",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0})})),o.register("6Ah9y",(function(n,r){var s;let i;s=n.exports,Object.defineProperty(s,"__esModule",{value:!0,configurable:!0}),e(n.exports,"checkAddress",(()=>E),(e=>E=e)),e(n.exports,"repackAddress",(()=>k),(e=>k=e)),e(n.exports,"runLocal",(()=>I),(e=>I=e)),e(n.exports,"ClockWithOffset",(()=>ae),(e=>ae=e)),e(n.exports,"makeFullAccountBoc",(()=>M),(e=>M=e)),e(n.exports,"parseFullAccountBoc",(()=>T),(e=>T=e)),e(n.exports,"executeLocal",(()=>j),(e=>j=e)),e(n.exports,"getExpectedAddress",(()=>q),(e=>q=e)),e(n.exports,"getBocHash",(()=>P),(e=>P=e)),e(n.exports,"packIntoCell",(()=>R),(e=>R=e)),e(n.exports,"unpackFromCell",(()=>B),(e=>B=e)),e(n.exports,"extractContractData",(()=>N),(e=>N=e)),e(n.exports,"extractPublicKey",(()=>F),(e=>F=e)),e(n.exports,"codeToTvc",(()=>D),(e=>D=e)),e(n.exports,"mergeTvc",(()=>L),(e=>L=e)),e(n.exports,"splitTvc",(()=>H),(e=>H=e)),e(n.exports,"setCodeSalt",(()=>W),(e=>W=e)),e(n.exports,"getCodeSalt",(()=>K),(e=>K=e)),e(n.exports,"encodeInternalInput",(()=>z),(e=>z=e)),e(n.exports,"encodeInternalMessage",(()=>U),(e=>U=e)),e(n.exports,"decodeInput",(()=>G),(e=>G=e)),e(n.exports,"decodeEvent",(()=>$),(e=>$=e)),e(n.exports,"decodeOutput",(()=>J),(e=>J=e)),e(n.exports,"decodeTransaction",(()=>V),(e=>V=e)),e(n.exports,"decodeTransactionEvents",(()=>Q),(e=>Q=e)),e(n.exports,"getDataHash",(()=>Y),(e=>Y=e)),e(n.exports,"ed25519_generateKeyPair",(()=>X),(e=>X=e)),e(n.exports,"ed25519_sign",(()=>Z),(e=>Z=e)),e(n.exports,"extendSignature",(()=>ee),(e=>ee=e)),e(n.exports,"verifySignature",(()=>te),(e=>te=e)),e(n.exports,"createRawExternalMessage",(()=>ne),(e=>ne=e)),e(n.exports,"createExternalMessageWithoutSignature",(()=>re),(e=>re=e)),e(n.exports,"createExternalMessage",(()=>oe),(e=>oe=e)),e(n.exports,"UnsignedMessage",(()=>ge),(e=>ge=e)),e(n.exports,"GenericContract",(()=>ce),(e=>ce=e)),e(n.exports,"GqlConnection",(()=>ue),(e=>ue=e)),e(n.exports,"GqlQuery",(()=>le),(e=>le=e)),e(n.exports,"JrpcConnection",(()=>de),(e=>de=e)),e(n.exports,"JrpcQuery",(()=>_e),(e=>_e=e)),e(n.exports,"Transport",(()=>pe),(e=>pe=e)),e(n.exports,"initSync",(()=>he),(e=>he=e)),e(n.exports,"default",(()=>ye),(e=>ye=e));const a=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});a.decode();let c=new Uint8Array;function u(){return 0===c.byteLength&&(c=new Uint8Array(i.memory.buffer)),c}function l(e,t){return a.decode(u().subarray(e,e+t))}const d=new Array(32).fill(void 0);d.push(void 0,null,!0,!1);let _=d.length;function p(e){_===d.length&&d.push(d.length+1);const t=_;return _=d[t],d[t]=e,t}function g(e){return d[e]}function f(e){return null==e}let b=new Float64Array;let h=new Int32Array;function w(){return 0===h.byteLength&&(h=new Int32Array(i.memory.buffer)),h}let y=0;const m=new TextEncoder("utf-8"),v="function"==typeof m.encodeInto?function(e,t){return m.encodeInto(e,t)}:function(e,t){const n=m.encode(e);return t.set(n),{read:e.length,written:n.length}};function x(e,t,n){if(void 0===n){const n=m.encode(e),r=t(n.length);return u().subarray(r,r+n.length).set(n),y=n.length,r}let r=e.length,o=t(r);const s=u();let i=0;for(;i<r;i++){const t=e.charCodeAt(i);if(t>127)break;s[o+i]=t}if(i!==r){0!==i&&(e=e.slice(i)),o=n(o,r,r=i+3*e.length);const t=u().subarray(o+i,o+r);i+=v(e,t).written}return y=i,o}function A(e){const t=g(e);return function(e){e<36||(d[e]=_,_=e)}(e),t}function S(e){const t=typeof e;if("number"==t||"boolean"==t||null==e)return`${e}`;if("string"==t)return`"${e}"`;if("symbol"==t){const t=e.description;return null==t?"Symbol":`Symbol(${t})`}if("function"==t){const t=e.name;return"string"==typeof t&&t.length>0?`Function(${t})`:"Function"}if(Array.isArray(e)){const t=e.length;let n="[";t>0&&(n+=S(e[0]));for(let r=1;r<t;r++)n+=", "+S(e[r]);return n+="]",n}const n=/\[object ([^\]]+)\]/.exec(toString.call(e));let r;if(!(n.length>1))return toString.call(e);if(r=n[1],"Object"==r)try{return"Object("+JSON.stringify(e)+")"}catch(e){return"Object"}return e instanceof Error?`${e.name}: ${e.message}\n${e.stack}`:r}function C(e,t,n){i._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__hcb77729c6af9d376(e,t,p(n))}function O(e,t){if(!(e instanceof t))throw new Error(`expected instance of ${t.name}`);return e.ptr}function E(e){const t=x(e,i.__wbindgen_malloc,i.__wbindgen_realloc),n=y;return 0!==i.checkAddress(t,n)}function k(e){try{const c=i.__wbindgen_add_to_stack_pointer(-16),u=x(e,i.__wbindgen_malloc,i.__wbindgen_realloc),d=y;i.repackAddress(c,u,d);var t=w()[c/4+0],n=w()[c/4+1],r=w()[c/4+2],o=w()[c/4+3],s=t,a=n;if(o)throw s=0,a=0,A(r);return l(s,a)}finally{i.__wbindgen_add_to_stack_pointer(16),i.__wbindgen_free(s,a)}}function I(e,t,n,r,o,s){try{const u=i.__wbindgen_add_to_stack_pointer(-16);O(e,ae);const l=x(t,i.__wbindgen_malloc,i.__wbindgen_realloc),d=y,_=x(n,i.__wbindgen_malloc,i.__wbindgen_realloc),g=y,f=x(r,i.__wbindgen_malloc,i.__wbindgen_realloc),b=y;i.runLocal(u,e.ptr,l,d,_,g,f,b,p(o),s);var a=w()[u/4+0],c=w()[u/4+1];if(w()[u/4+2])throw A(c);return A(a)}finally{i.__wbindgen_add_to_stack_pointer(16)}}function M(e){try{const c=i.__wbindgen_add_to_stack_pointer(-16),u=x(e,i.__wbindgen_malloc,i.__wbindgen_realloc),d=y;i.makeFullAccountBoc(c,u,d);var t=w()[c/4+0],n=w()[c/4+1],r=w()[c/4+2],o=w()[c/4+3],s=t,a=n;if(o)throw s=0,a=0,A(r);return l(s,a)}finally{i.__wbindgen_add_to_stack_pointer(16),i.__wbindgen_free(s,a)}}function T(e){try{const r=i.__wbindgen_add_to_stack_pointer(-16),o=x(e,i.__wbindgen_malloc,i.__wbindgen_realloc),s=y;i.parseFullAccountBoc(r,o,s);var t=w()[r/4+0],n=w()[r/4+1];if(w()[r/4+2])throw A(n);return A(t)}finally{i.__wbindgen_add_to_stack_pointer(16)}}function j(e,t,n,r,o){try{const c=i.__wbindgen_add_to_stack_pointer(-16),u=x(e,i.__wbindgen_malloc,i.__wbindgen_realloc),l=y,d=x(t,i.__wbindgen_malloc,i.__wbindgen_realloc),_=y,p=x(n,i.__wbindgen_malloc,i.__wbindgen_realloc),g=y;i.executeLocal(c,u,l,d,_,p,g,r,o);var s=w()[c/4+0],a=w()[c/4+1];if(w()[c/4+2])throw A(a);return A(s)}finally{i.__wbindgen_add_to_stack_pointer(16)}}function q(e,t,n,r,o){try{const l=i.__wbindgen_add_to_stack_pointer(-16),d=x(e,i.__wbindgen_malloc,i.__wbindgen_realloc),_=y,g=x(t,i.__wbindgen_malloc,i.__wbindgen_realloc),b=y;var s=f(r)?0:x(r,i.__wbindgen_malloc,i.__wbindgen_realloc),a=y;i.getExpectedAddress(l,d,_,g,b,n,s,a,p(o));var c=w()[l/4+0],u=w()[l/4+1];if(w()[l/4+2])throw A(u);return A(c)}finally{i.__wbindgen_add_to_stack_pointer(16)}}function P(e){try{const c=i.__wbindgen_add_to_stack_pointer(-16),u=x(e,i.__wbindgen_malloc,i.__wbindgen_realloc),d=y;i.getBocHash(c,u,d);var t=w()[c/4+0],n=w()[c/4+1],r=w()[c/4+2],o=w()[c/4+3],s=t,a=n;if(o)throw s=0,a=0,A(r);return l(s,a)}finally{i.__wbindgen_add_to_stack_pointer(16),i.__wbindgen_free(s,a)}}function R(e,t,n){try{const g=i.__wbindgen_add_to_stack_pointer(-16);var r=f(n)?0:x(n,i.__wbindgen_malloc,i.__wbindgen_realloc),o=y;i.packIntoCell(g,p(e),p(t),r,o);var s=w()[g/4+0],a=w()[g/4+1],c=w()[g/4+2],u=w()[g/4+3],d=s,_=a;if(u)throw d=0,_=0,A(c);return l(d,_)}finally{i.__wbindgen_add_to_stack_pointer(16),i.__wbindgen_free(d,_)}}function B(e,t,n,r){try{const u=i.__wbindgen_add_to_stack_pointer(-16),l=x(t,i.__wbindgen_malloc,i.__wbindgen_realloc),d=y;var o=f(r)?0:x(r,i.__wbindgen_malloc,i.__wbindgen_realloc),s=y;i.unpackFromCell(u,p(e),l,d,n,o,s);var a=w()[u/4+0],c=w()[u/4+1];if(w()[u/4+2])throw A(c);return A(a)}finally{i.__wbindgen_add_to_stack_pointer(16)}}function N(e){try{const o=i.__wbindgen_add_to_stack_pointer(-16),s=x(e,i.__wbindgen_malloc,i.__wbindgen_realloc),a=y;i.extractContractData(o,s,a);var t=w()[o/4+0],n=w()[o/4+1],r=w()[o/4+2];if(w()[o/4+3])throw A(r);let c;return 0!==t&&(c=l(t,n).slice(),i.__wbindgen_free(t,1*n)),c}finally{i.__wbindgen_add_to_stack_pointer(16)}}function F(e){try{const c=i.__wbindgen_add_to_stack_pointer(-16),u=x(e,i.__wbindgen_malloc,i.__wbindgen_realloc),d=y;i.extractPublicKey(c,u,d);var t=w()[c/4+0],n=w()[c/4+1],r=w()[c/4+2],o=w()[c/4+3],s=t,a=n;if(o)throw s=0,a=0,A(r);return l(s,a)}finally{i.__wbindgen_add_to_stack_pointer(16),i.__wbindgen_free(s,a)}}function D(e){try{const c=i.__wbindgen_add_to_stack_pointer(-16),u=x(e,i.__wbindgen_malloc,i.__wbindgen_realloc),d=y;i.codeToTvc(c,u,d);var t=w()[c/4+0],n=w()[c/4+1],r=w()[c/4+2],o=w()[c/4+3],s=t,a=n;if(o)throw s=0,a=0,A(r);return l(s,a)}finally{i.__wbindgen_add_to_stack_pointer(16),i.__wbindgen_free(s,a)}}function L(e,t){try{const u=i.__wbindgen_add_to_stack_pointer(-16),d=x(e,i.__wbindgen_malloc,i.__wbindgen_realloc),_=y,p=x(t,i.__wbindgen_malloc,i.__wbindgen_realloc),g=y;i.mergeTvc(u,d,_,p,g);var n=w()[u/4+0],r=w()[u/4+1],o=w()[u/4+2],s=w()[u/4+3],a=n,c=r;if(s)throw a=0,c=0,A(o);return l(a,c)}finally{i.__wbindgen_add_to_stack_pointer(16),i.__wbindgen_free(a,c)}}function H(e){try{const r=i.__wbindgen_add_to_stack_pointer(-16),o=x(e,i.__wbindgen_malloc,i.__wbindgen_realloc),s=y;i.splitTvc(r,o,s);var t=w()[r/4+0],n=w()[r/4+1];if(w()[r/4+2])throw A(n);return A(t)}finally{i.__wbindgen_add_to_stack_pointer(16)}}function W(e,t){try{const u=i.__wbindgen_add_to_stack_pointer(-16),d=x(e,i.__wbindgen_malloc,i.__wbindgen_realloc),_=y,p=x(t,i.__wbindgen_malloc,i.__wbindgen_realloc),g=y;i.setCodeSalt(u,d,_,p,g);var n=w()[u/4+0],r=w()[u/4+1],o=w()[u/4+2],s=w()[u/4+3],a=n,c=r;if(s)throw a=0,c=0,A(o);return l(a,c)}finally{i.__wbindgen_add_to_stack_pointer(16),i.__wbindgen_free(a,c)}}function K(e){try{const o=i.__wbindgen_add_to_stack_pointer(-16),s=x(e,i.__wbindgen_malloc,i.__wbindgen_realloc),a=y;i.getCodeSalt(o,s,a);var t=w()[o/4+0],n=w()[o/4+1],r=w()[o/4+2];if(w()[o/4+3])throw A(r);let c;return 0!==t&&(c=l(t,n).slice(),i.__wbindgen_free(t,1*n)),c}finally{i.__wbindgen_add_to_stack_pointer(16)}}function z(e,t,n){try{const d=i.__wbindgen_add_to_stack_pointer(-16),_=x(e,i.__wbindgen_malloc,i.__wbindgen_realloc),g=y,f=x(t,i.__wbindgen_malloc,i.__wbindgen_realloc),b=y;i.encodeInternalInput(d,_,g,f,b,p(n));var r=w()[d/4+0],o=w()[d/4+1],s=w()[d/4+2],a=w()[d/4+3],c=r,u=o;if(a)throw c=0,u=0,A(s);return l(c,u)}finally{i.__wbindgen_add_to_stack_pointer(16),i.__wbindgen_free(c,u)}}function U(e,t,n,r,o,s){try{const C=i.__wbindgen_add_to_stack_pointer(-16);var a=f(e)?0:x(e,i.__wbindgen_malloc,i.__wbindgen_realloc),c=y;const O=x(t,i.__wbindgen_malloc,i.__wbindgen_realloc),E=y;var u=f(r)?0:x(r,i.__wbindgen_malloc,i.__wbindgen_realloc),d=y,_=f(o)?0:x(o,i.__wbindgen_malloc,i.__wbindgen_realloc),p=y;const k=x(s,i.__wbindgen_malloc,i.__wbindgen_realloc),I=y;i.encodeInternalMessage(C,a,c,O,E,n,u,d,_,p,k,I);var g=w()[C/4+0],b=w()[C/4+1],h=w()[C/4+2],m=w()[C/4+3],v=g,S=b;if(m)throw v=0,S=0,A(h);return l(v,S)}finally{i.__wbindgen_add_to_stack_pointer(16),i.__wbindgen_free(v,S)}}function G(e,t,n,r){try{const a=i.__wbindgen_add_to_stack_pointer(-16),c=x(e,i.__wbindgen_malloc,i.__wbindgen_realloc),u=y,l=x(t,i.__wbindgen_malloc,i.__wbindgen_realloc),d=y;i.decodeInput(a,c,u,l,d,p(n),r);var o=w()[a/4+0],s=w()[a/4+1];if(w()[a/4+2])throw A(s);return A(o)}finally{i.__wbindgen_add_to_stack_pointer(16)}}function $(e,t,n){try{const s=i.__wbindgen_add_to_stack_pointer(-16),a=x(e,i.__wbindgen_malloc,i.__wbindgen_realloc),c=y,u=x(t,i.__wbindgen_malloc,i.__wbindgen_realloc),l=y;i.decodeEvent(s,a,c,u,l,p(n));var r=w()[s/4+0],o=w()[s/4+1];if(w()[s/4+2])throw A(o);return A(r)}finally{i.__wbindgen_add_to_stack_pointer(16)}}function J(e,t,n){try{const s=i.__wbindgen_add_to_stack_pointer(-16),a=x(e,i.__wbindgen_malloc,i.__wbindgen_realloc),c=y,u=x(t,i.__wbindgen_malloc,i.__wbindgen_realloc),l=y;i.decodeOutput(s,a,c,u,l,p(n));var r=w()[s/4+0],o=w()[s/4+1];if(w()[s/4+2])throw A(o);return A(r)}finally{i.__wbindgen_add_to_stack_pointer(16)}}function V(e,t,n){try{const s=i.__wbindgen_add_to_stack_pointer(-16),a=x(t,i.__wbindgen_malloc,i.__wbindgen_realloc),c=y;i.decodeTransaction(s,p(e),a,c,p(n));var r=w()[s/4+0],o=w()[s/4+1];if(w()[s/4+2])throw A(o);return A(r)}finally{i.__wbindgen_add_to_stack_pointer(16)}}function Q(e,t){try{const o=i.__wbindgen_add_to_stack_pointer(-16),s=x(t,i.__wbindgen_malloc,i.__wbindgen_realloc),a=y;i.decodeTransactionEvents(o,p(e),s,a);var n=w()[o/4+0],r=w()[o/4+1];if(w()[o/4+2])throw A(r);return A(n)}finally{i.__wbindgen_add_to_stack_pointer(16)}}function Y(e){try{const c=i.__wbindgen_add_to_stack_pointer(-16),u=x(e,i.__wbindgen_malloc,i.__wbindgen_realloc),d=y;i.getDataHash(c,u,d);var t=w()[c/4+0],n=w()[c/4+1],r=w()[c/4+2],o=w()[c/4+3],s=t,a=n;if(o)throw s=0,a=0,A(r);return l(s,a)}finally{i.__wbindgen_add_to_stack_pointer(16),i.__wbindgen_free(s,a)}}function X(){try{const n=i.__wbindgen_add_to_stack_pointer(-16);i.ed25519_generateKeyPair(n);var e=w()[n/4+0],t=w()[n/4+1];if(w()[n/4+2])throw A(t);return A(e)}finally{i.__wbindgen_add_to_stack_pointer(16)}}function Z(e,t){try{const u=i.__wbindgen_add_to_stack_pointer(-16),d=x(e,i.__wbindgen_malloc,i.__wbindgen_realloc),_=y,p=x(t,i.__wbindgen_malloc,i.__wbindgen_realloc),g=y;i.ed25519_sign(u,d,_,p,g);var n=w()[u/4+0],r=w()[u/4+1],o=w()[u/4+2],s=w()[u/4+3],a=n,c=r;if(s)throw a=0,c=0,A(o);return l(a,c)}finally{i.__wbindgen_add_to_stack_pointer(16),i.__wbindgen_free(a,c)}}function ee(e){try{const r=i.__wbindgen_add_to_stack_pointer(-16),o=x(e,i.__wbindgen_malloc,i.__wbindgen_realloc),s=y;i.extendSignature(r,o,s);var t=w()[r/4+0],n=w()[r/4+1];if(w()[r/4+2])throw A(n);return A(t)}finally{i.__wbindgen_add_to_stack_pointer(16)}}function te(e,t,n){try{const s=i.__wbindgen_add_to_stack_pointer(-16),a=x(e,i.__wbindgen_malloc,i.__wbindgen_realloc),c=y,u=x(t,i.__wbindgen_malloc,i.__wbindgen_realloc),l=y,d=x(n,i.__wbindgen_malloc,i.__wbindgen_realloc),_=y;i.verifySignature(s,a,c,u,l,d,_);var r=w()[s/4+0],o=w()[s/4+1];if(w()[s/4+2])throw A(o);return 0!==r}finally{i.__wbindgen_add_to_stack_pointer(16)}}function ne(e,t,n,r){try{const d=i.__wbindgen_add_to_stack_pointer(-16),_=x(e,i.__wbindgen_malloc,i.__wbindgen_realloc),p=y;var o=f(t)?0:x(t,i.__wbindgen_malloc,i.__wbindgen_realloc),s=y,a=f(n)?0:x(n,i.__wbindgen_malloc,i.__wbindgen_realloc),c=y;i.createRawExternalMessage(d,_,p,o,s,a,c,r);var u=w()[d/4+0],l=w()[d/4+1];if(w()[d/4+2])throw A(l);return A(u)}finally{i.__wbindgen_add_to_stack_pointer(16)}}function re(e,t,n,r,o,s,a){try{const _=i.__wbindgen_add_to_stack_pointer(-16);O(e,ae);const g=x(t,i.__wbindgen_malloc,i.__wbindgen_realloc),b=y,h=x(n,i.__wbindgen_malloc,i.__wbindgen_realloc),m=y,v=x(r,i.__wbindgen_malloc,i.__wbindgen_realloc),S=y;var c=f(o)?0:x(o,i.__wbindgen_malloc,i.__wbindgen_realloc),u=y;i.createExternalMessageWithoutSignature(_,e.ptr,g,b,h,m,v,S,c,u,p(s),a);var l=w()[_/4+0],d=w()[_/4+1];if(w()[_/4+2])throw A(d);return A(l)}finally{i.__wbindgen_add_to_stack_pointer(16)}}function oe(e,t,n,r,o,s,a,c){try{const g=i.__wbindgen_add_to_stack_pointer(-16);O(e,ae);const b=x(t,i.__wbindgen_malloc,i.__wbindgen_realloc),h=y,m=x(n,i.__wbindgen_malloc,i.__wbindgen_realloc),v=y,S=x(r,i.__wbindgen_malloc,i.__wbindgen_realloc),C=y;var u=f(o)?0:x(o,i.__wbindgen_malloc,i.__wbindgen_realloc),l=y;const E=x(a,i.__wbindgen_malloc,i.__wbindgen_realloc),k=y;i.createExternalMessage(g,e.ptr,b,h,m,v,S,C,u,l,p(s),E,k,c);var d=w()[g/4+0],_=w()[g/4+1];if(w()[g/4+2])throw A(_);return ge.__wrap(d)}finally{i.__wbindgen_add_to_stack_pointer(16)}}function se(e,t){try{return e.apply(this,t)}catch(e){i.__wbindgen_exn_store(p(e))}}function ie(e,t){return u().subarray(e/1,e/1+t)}class ae{static __wrap(e){const t=Object.create(ae.prototype);return t.ptr=e,t}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();i.__wbg_clockwithoffset_free(e)}constructor(){const e=i.clockwithoffset_new();return ae.__wrap(e)}get nowMs(){return i.clockwithoffset_nowMs(this.ptr)}updateOffset(e){i.clockwithoffset_updateOffset(this.ptr,e)}offsetMs(){return i.clockwithoffset_offsetMs(this.ptr)}}class ce{static __wrap(e){const t=Object.create(ce.prototype);return t.ptr=e,t}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();i.__wbg_genericcontract_free(e)}get address(){try{const n=i.__wbindgen_add_to_stack_pointer(-16);i.genericcontract_address(n,this.ptr);var e=w()[n/4+0],t=w()[n/4+1];return l(e,t)}finally{i.__wbindgen_add_to_stack_pointer(16),i.__wbindgen_free(e,t)}}sendMessageLocally(e){try{const r=i.__wbindgen_add_to_stack_pointer(-16);i.genericcontract_sendMessageLocally(r,this.ptr,p(e));var t=w()[r/4+0],n=w()[r/4+1];if(w()[r/4+2])throw A(n);return A(t)}finally{i.__wbindgen_add_to_stack_pointer(16)}}sendMessage(e){try{const r=i.__wbindgen_add_to_stack_pointer(-16);i.genericcontract_sendMessage(r,this.ptr,p(e));var t=w()[r/4+0],n=w()[r/4+1];if(w()[r/4+2])throw A(n);return A(t)}finally{i.__wbindgen_add_to_stack_pointer(16)}}refresh(){return A(i.genericcontract_refresh(this.ptr))}handleBlock(e){const t=x(e,i.__wbindgen_malloc,i.__wbindgen_realloc),n=y;return A(i.genericcontract_handleBlock(this.ptr,t,n))}preloadTransactions(e){try{const r=i.__wbindgen_add_to_stack_pointer(-16),o=x(e,i.__wbindgen_malloc,i.__wbindgen_realloc),s=y;i.genericcontract_preloadTransactions(r,this.ptr,o,s);var t=w()[r/4+0],n=w()[r/4+1];if(w()[r/4+2])throw A(n);return A(t)}finally{i.__wbindgen_add_to_stack_pointer(16)}}get pollingMethod(){return A(i.genericcontract_pollingMethod(this.ptr))}}class ue{static __wrap(e){const t=Object.create(ue.prototype);return t.ptr=e,t}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();i.__wbg_gqlconnection_free(e)}constructor(e,t){O(e,ae);const n=i.gqlconnection_new(e.ptr,p(t));return ue.__wrap(n)}getLatestBlock(e){try{const r=i.__wbindgen_add_to_stack_pointer(-16),o=x(e,i.__wbindgen_malloc,i.__wbindgen_realloc),s=y;i.gqlconnection_getLatestBlock(r,this.ptr,o,s);var t=w()[r/4+0],n=w()[r/4+1];if(w()[r/4+2])throw A(n);return A(t)}finally{i.__wbindgen_add_to_stack_pointer(16)}}waitForNextBlock(e,t,n){try{const s=i.__wbindgen_add_to_stack_pointer(-16),a=x(e,i.__wbindgen_malloc,i.__wbindgen_realloc),c=y,u=x(t,i.__wbindgen_malloc,i.__wbindgen_realloc),l=y;i.gqlconnection_waitForNextBlock(s,this.ptr,a,c,u,l,n);var r=w()[s/4+0],o=w()[s/4+1];if(w()[s/4+2])throw A(o);return A(r)}finally{i.__wbindgen_add_to_stack_pointer(16)}}}class le{static __wrap(e){const t=Object.create(le.prototype);return t.ptr=e,t}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();i.__wbg_gqlquery_free(e)}onReceive(e){const t=this.__destroy_into_raw(),n=x(e,i.__wbindgen_malloc,i.__wbindgen_realloc),r=y;i.gqlquery_onReceive(t,n,r)}onError(e){const t=this.__destroy_into_raw();i.gqlquery_onError(t,p(e))}onTimeout(){const e=this.__destroy_into_raw();i.gqlquery_onTimeout(e)}}class de{static __wrap(e){const t=Object.create(de.prototype);return t.ptr=e,t}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();i.__wbg_jrpcconnection_free(e)}constructor(e,t){O(e,ae);const n=i.jrpcconnection_new(e.ptr,p(t));return de.__wrap(n)}}class _e{static __wrap(e){const t=Object.create(_e.prototype);return t.ptr=e,t}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();i.__wbg_jrpcquery_free(e)}onReceive(e){const t=this.__destroy_into_raw(),n=x(e,i.__wbindgen_malloc,i.__wbindgen_realloc),r=y;i.jrpcquery_onReceive(t,n,r)}onError(e){const t=this.__destroy_into_raw();i.jrpcquery_onError(t,p(e))}onTimeout(){const e=this.__destroy_into_raw();i.jrpcquery_onTimeout(e)}}class pe{static __wrap(e){const t=Object.create(pe.prototype);return t.ptr=e,t}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();i.__wbg_transport_free(e)}static fromGqlConnection(e){O(e,ue);const t=i.transport_fromGqlConnection(e.ptr);return pe.__wrap(t)}static fromJrpcConnection(e){O(e,de);const t=i.transport_fromJrpcConnection(e.ptr);return pe.__wrap(t)}subscribeToGenericContract(e,t){try{const o=i.__wbindgen_add_to_stack_pointer(-16),s=x(e,i.__wbindgen_malloc,i.__wbindgen_realloc),a=y;i.transport_subscribeToGenericContract(o,this.ptr,s,a,p(t));var n=w()[o/4+0],r=w()[o/4+1];if(w()[o/4+2])throw A(r);return A(n)}finally{i.__wbindgen_add_to_stack_pointer(16)}}getFullContractState(e){try{const r=i.__wbindgen_add_to_stack_pointer(-16),o=x(e,i.__wbindgen_malloc,i.__wbindgen_realloc),s=y;i.transport_getFullContractState(r,this.ptr,o,s);var t=w()[r/4+0],n=w()[r/4+1];if(w()[r/4+2])throw A(n);return A(t)}finally{i.__wbindgen_add_to_stack_pointer(16)}}getAccountsByCodeHash(e,t,n){try{const c=i.__wbindgen_add_to_stack_pointer(-16),u=x(e,i.__wbindgen_malloc,i.__wbindgen_realloc),l=y;var r=f(n)?0:x(n,i.__wbindgen_malloc,i.__wbindgen_realloc),o=y;i.transport_getAccountsByCodeHash(c,this.ptr,u,l,t,r,o);var s=w()[c/4+0],a=w()[c/4+1];if(w()[c/4+2])throw A(a);return A(s)}finally{i.__wbindgen_add_to_stack_pointer(16)}}getTransactions(e,t,n){try{const c=i.__wbindgen_add_to_stack_pointer(-16),u=x(e,i.__wbindgen_malloc,i.__wbindgen_realloc),l=y;var r=f(t)?0:x(t,i.__wbindgen_malloc,i.__wbindgen_realloc),o=y;i.transport_getTransactions(c,this.ptr,u,l,r,o,n);var s=w()[c/4+0],a=w()[c/4+1];if(w()[c/4+2])throw A(a);return A(s)}finally{i.__wbindgen_add_to_stack_pointer(16)}}getTransaction(e){try{const r=i.__wbindgen_add_to_stack_pointer(-16),o=x(e,i.__wbindgen_malloc,i.__wbindgen_realloc),s=y;i.transport_getTransaction(r,this.ptr,o,s);var t=w()[r/4+0],n=w()[r/4+1];if(w()[r/4+2])throw A(n);return A(t)}finally{i.__wbindgen_add_to_stack_pointer(16)}}getDstTransaction(e){try{const r=i.__wbindgen_add_to_stack_pointer(-16),o=x(e,i.__wbindgen_malloc,i.__wbindgen_realloc),s=y;i.transport_getDstTransaction(r,this.ptr,o,s);var t=w()[r/4+0],n=w()[r/4+1];if(w()[r/4+2])throw A(n);return A(t)}finally{i.__wbindgen_add_to_stack_pointer(16)}}}class ge{static __wrap(e){const t=Object.create(ge.prototype);return t.ptr=e,t}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();i.__wbg_unsignedmessage_free(e)}refreshTimeout(e){O(e,ae),i.unsignedmessage_refreshTimeout(this.ptr,e.ptr)}expireAt(){return i.unsignedmessage_expireAt(this.ptr)>>>0}get hash(){try{const n=i.__wbindgen_add_to_stack_pointer(-16);i.unsignedmessage_hash(n,this.ptr);var e=w()[n/4+0],t=w()[n/4+1];return l(e,t)}finally{i.__wbindgen_add_to_stack_pointer(16),i.__wbindgen_free(e,t)}}sign(e){try{const r=i.__wbindgen_add_to_stack_pointer(-16),o=x(e,i.__wbindgen_malloc,i.__wbindgen_realloc),s=y;i.unsignedmessage_sign(r,this.ptr,o,s);var t=w()[r/4+0],n=w()[r/4+1];if(w()[r/4+2])throw A(n);return A(t)}finally{i.__wbindgen_add_to_stack_pointer(16)}}signFake(){try{const n=i.__wbindgen_add_to_stack_pointer(-16);i.unsignedmessage_signFake(n,this.ptr);var e=w()[n/4+0],t=w()[n/4+1];if(w()[n/4+2])throw A(t);return A(e)}finally{i.__wbindgen_add_to_stack_pointer(16)}}}function fe(){const e={wbg:{}};return e.wbg.__wbindgen_string_new=function(e,t){return p(l(e,t))},e.wbg.__wbg_length_6e3bbe7c8bd4dbd8=function(e){return g(e).length},e.wbg.__wbindgen_is_undefined=function(e){return void 0===g(e)},e.wbg.__wbindgen_number_get=function(e,t){const n=g(t),r="number"==typeof n?n:void 0;(0===b.byteLength&&(b=new Float64Array(i.memory.buffer)),b)[e/8+1]=f(r)?0:r,w()[e/4+0]=!f(r)},e.wbg.__wbindgen_is_null=function(e){return null===g(e)},e.wbg.__wbindgen_string_get=function(e,t){const n=g(t),r="string"==typeof n?n:void 0;var o=f(r)?0:x(r,i.__wbindgen_malloc,i.__wbindgen_realloc),s=y;w()[e/4+1]=s,w()[e/4+0]=o},e.wbg.__wbindgen_is_object=function(e){const t=g(e);return"object"==typeof t&&null!==t},e.wbg.__wbindgen_is_string=function(e){return"string"==typeof g(e)},e.wbg.__wbindgen_object_drop_ref=function(e){A(e)},e.wbg.__wbindgen_number_new=function(e){return p(e)},e.wbg.__wbg_now_58886682b7e790d7=function(){return Date.now()},e.wbg.__wbg_new_8d2af00bc1e329ee=function(e,t){return p(new Error(l(e,t)))},e.wbg.__wbg_new_0b9bfdd97583284e=function(){return p(new Object)},e.wbg.__wbg_send_55c5735308610fc0=function(e,t,n,r,o){g(e).send(l(t,n),le.__wrap(r),0!==o)},e.wbg.__wbg_send_c4fe5ef5f4851b5a=function(e,t,n,r,o){g(e).send(l(t,n),_e.__wrap(r),0!==o)},e.wbg.__wbg_new_1d9a920c6bfc44a8=function(){return p(new Array)},e.wbg.__wbg_push_740e4b286702d964=function(e,t){return g(e).push(g(t))},e.wbg.__wbg_genericcontract_new=function(e){return p(ce.__wrap(e))},e.wbg.__wbg_onMessageSent_fc2ded3b8153507a=function(e,t,n){g(e).onMessageSent(A(t),A(n))},e.wbg.__wbg_onMessageExpired_fbdb4b1a8bb0e7c5=function(e,t){g(e).onMessageExpired(A(t))},e.wbg.__wbg_onStateChanged_e696a7b987dba9ea=function(e,t){g(e).onStateChanged(A(t))},e.wbg.__wbg_onTransactionsFound_33b7b56c770e2e88=function(e,t,n){g(e).onTransactionsFound(A(t),A(n))},e.wbg.__wbg_keys_0702294afaeb6044=function(e){return p(Object.keys(g(e)))},e.wbg.__wbg_get_57245cc7d7c7619d=function(e,t){return p(g(e)[t>>>0])},e.wbg.__wbindgen_boolean_get=function(e){const t=g(e);return"boolean"==typeof t?t?1:0:2},e.wbg.__wbg_isLocal_0cc0f6258c8cf6ca=function(e){return g(e).isLocal()},e.wbg.__wbg_new_9962f939219f1820=function(e,t){try{var n={a:e,b:t};const r=new Promise(((e,t)=>{const r=n.a;n.a=0;try{return function(e,t,n,r){i.wasm_bindgen__convert__closures__invoke2_mut__hecba896d1563d223(e,t,p(n),p(r))}(r,n.b,e,t)}finally{n.a=r}}));return p(r)}finally{n.a=n.b=0}},e.wbg.__wbg_static_accessor_NODE_MODULE_cf6401cc1091279e=function(){return p(n)},e.wbg.__wbindgen_object_clone_ref=function(e){return p(g(e))},e.wbg.__wbg_process_0cc2ada8524d6f83=function(e){return p(g(e).process)},e.wbg.__wbg_versions_c11acceab27a6c87=function(e){return p(g(e).versions)},e.wbg.__wbg_node_7ff1ce49caf23815=function(e){return p(g(e).node)},e.wbg.__wbg_require_a746e79b322b9336=function(){return se((function(e,t,n){return p(g(e).require(l(t,n)))}),arguments)},e.wbg.__wbg_crypto_2036bed7c44c25e7=function(e){return p(g(e).crypto)},e.wbg.__wbg_msCrypto_a21fc88caf1ecdc8=function(e){return p(g(e).msCrypto)},e.wbg.__wbg_newwithlength_f5933855e4f48a19=function(e){return p(new Uint8Array(e>>>0))},e.wbg.__wbg_get_765201544a2b6869=function(){return se((function(e,t){return p(Reflect.get(g(e),g(t)))}),arguments)},e.wbg.__wbg_self_6d479506f72c6a71=function(){return se((function(){return p(self.self)}),arguments)},e.wbg.__wbg_window_f2557cc78490aceb=function(){return se((function(){return p(window.window)}),arguments)},e.wbg.__wbg_globalThis_7f206bda628d5286=function(){return se((function(){return p(globalThis.globalThis)}),arguments)},e.wbg.__wbg_global_ba75c50d1cf384f4=function(){return se((function(){return p(t.global)}),arguments)},e.wbg.__wbg_newnoargs_b5b063fc6c2f0376=function(e,t){return p(new Function(l(e,t)))},e.wbg.__wbg_call_97ae9d8645dc388b=function(){return se((function(e,t){return p(g(e).call(g(t)))}),arguments)},e.wbg.__wbg_isArray_27c46c67f498e15d=function(e){return Array.isArray(g(e))},e.wbg.__wbg_call_168da88779e35f61=function(){return se((function(e,t,n){return p(g(e).call(g(t),g(n)))}),arguments)},e.wbg.__wbg_set_bf3f89b92d5a34bf=function(){return se((function(e,t,n){return Reflect.set(g(e),g(t),g(n))}),arguments)},e.wbg.__wbg_randomFillSync_065afffde01daa66=function(){return se((function(e,t,n){g(e).randomFillSync(ie(t,n))}),arguments)},e.wbg.__wbg_subarray_58ad4efbb5bcb886=function(e,t,n){return p(g(e).subarray(t>>>0,n>>>0))},e.wbg.__wbg_getRandomValues_b99eec4244a475bb=function(){return se((function(e,t){g(e).getRandomValues(g(t))}),arguments)},e.wbg.__wbg_length_9e1ae1900cb0fbd5=function(e){return g(e).length},e.wbg.__wbindgen_memory=function(){return p(i.memory)},e.wbg.__wbg_buffer_3f3d764d4747d564=function(e){return p(g(e).buffer)},e.wbg.__wbg_new_8c3f0052272a457a=function(e){return p(new Uint8Array(g(e)))},e.wbg.__wbg_set_83db9690f9353e79=function(e,t,n){g(e).set(g(t),n>>>0)},e.wbg.__wbindgen_debug_string=function(e,t){const n=x(S(g(t)),i.__wbindgen_malloc,i.__wbindgen_realloc),r=y;w()[e/4+1]=r,w()[e/4+0]=n},e.wbg.__wbindgen_throw=function(e,t){throw new Error(l(e,t))},e.wbg.__wbg_then_11f7a54d67b4bfad=function(e,t){return p(g(e).then(g(t)))},e.wbg.__wbindgen_cb_drop=function(e){const t=A(e).original;if(1==t.cnt--)return t.a=0,!0;return!1},e.wbg.__wbg_resolve_99fe17964f31ffc0=function(e){return p(Promise.resolve(g(e)))},e.wbg.__wbindgen_closure_wrapper6437=function(e,t,n){const r=function(e,t,n,r){const o={a:e,b:t,cnt:1,dtor:n},s=(...e)=>{o.cnt++;const t=o.a;o.a=0;try{return r(t,o.b,...e)}finally{0==--o.cnt?i.__wbindgen_export_2.get(o.dtor)(t,o.b):o.a=t}};return s.original=o,s}(e,t,925,C);return p(r)},e}function be(e,t){return i=e.exports,we.__wbindgen_wasm_module=t,b=new Float64Array,h=new Int32Array,c=new Uint8Array,i}function he(e){const t=fe();e instanceof WebAssembly.Module||(e=new WebAssembly.Module(e));return be(new WebAssembly.Instance(e,t),e)}async function we(e){void 0===e&&(e=new URL(o("jp8iX")));const t=fe();("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));const{instance:n,module:r}=await async function(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(t){if("application/wasm"==e.headers.get("Content-Type"))throw t;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t)}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}(await e,t);return be(n,r)}var ye=we})),o.register("jp8iX",(function(e,t){e.exports=new URL(o("27Lyk").resolve("2zmuV"),import.meta.url).toString()})),o.register("ejgJV",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0});const n={ensureNekotonLoaded:void 0,nekoton:void 0,fetch:void 0,fetchAgent:()=>{},debugLog:void 0};e.exports.default=n})),o.register("6G3Ac",(function(e,t){var n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e.exports&&e.exports.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},s=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.EverscaleStandaloneClient=e.exports.SUPPORTED_PERMISSIONS=e.exports.VERSION=e.exports.Clock=e.exports.SimpleKeystore=e.exports.checkConnection=e.exports.ConnectionError=e.exports.NETWORK_PRESETS=void 0;const i=s(o("hgGe6")),a=s(o("ejgJV"));var c=o("km8MT"),u=o("aqdrJ"),l=o("gkoT3");u=o("aqdrJ");Object.defineProperty(e.exports,"NETWORK_PRESETS",{enumerable:!0,get:function(){return u.NETWORK_PRESETS}});u=o("aqdrJ");Object.defineProperty(e.exports,"ConnectionError",{enumerable:!0,get:function(){return u.ConnectionError}}),Object.defineProperty(e.exports,"checkConnection",{enumerable:!0,get:function(){return u.checkConnection}}),r(o("8mCgq"),e.exports);var d=o("h707y");Object.defineProperty(e.exports,"SimpleKeystore",{enumerable:!0,get:function(){return d.SimpleKeystore}});var _=o("lyauN");Object.defineProperty(e.exports,"Clock",{enumerable:!0,get:function(){return _.Clock}});const{ensureNekotonLoaded:p,nekoton:g}=a.default;function f(e){const t=e||{};return{retryCount:null!=t.retryCount?Math.max(1,~~t.retryCount):5,timeout:null!=t.timeout?Math.max(1,~~t.timeout):60,timeoutGrowFactor:t.timeoutGrowFactor||1.2,retryTransfers:!0}}e.exports.VERSION="0.2.25",e.exports.SUPPORTED_PERMISSIONS=["basic","accountInteraction"];class b extends c.SafeEventEmitter{constructor(e){super(),this._handlers={requestPermissions:h,changeAccount:w,disconnect:y,subscribe:m,unsubscribe:v,unsubscribeAll:x,getProviderState:A,getFullContractState:S,getAccountsByCodeHash:C,getTransactions:O,getTransaction:E,findTransaction:k,runLocal:I,getExpectedAddress:M,getBocHash:T,packIntoCell:j,unpackFromCell:q,extractPublicKey:P,codeToTvc:R,mergeTvc:B,splitTvc:N,setCodeSalt:F,getCodeSalt:D,encodeInternalInput:L,decodeInput:H,decodeOutput:W,decodeEvent:K,decodeTransaction:z,decodeTransactionEvents:U,verifySignature:G,sendUnsignedExternalMessage:$,signData:J,signDataRaw:V,sendMessage:Q,sendMessageDelayed:Y,sendExternalMessage:X,sendExternalMessageDelayed:Z},this._context=e}static async create(e){await p(e.initInput);const t={},n=(e,n)=>{var r;null===(r=t.client)||void 0===r||r.emit(e,n)},r=new a.default.nekoton.ClockWithOffset;null!=e.clock&&(e.clock.impls.push(r),r.updateOffset(e.clock.offset));try{const o=await(0,u.createConnectionController)(r,e.connection),s=new l.SubscriptionController(o,n),i=new b({permissions:{},connectionController:o,subscriptionController:s,properties:{message:f(e.message)},keystore:e.keystore,accountsStorage:e.accountsStorage,clock:r,notify:n});return t.client=i,i}catch(t){throw null!=e.clock&&e.clock.impls.pop(),r.free(),t}}request(e){const t=this._handlers[e.method];if(null==t)throw he(e,`Method '${e.method}' is not supported by standalone provider`);return t(this._context,e)}addListener(e,t){return super.addListener(e,t)}removeListener(e,t){return super.removeListener(e,t)}on(e,t){return super.on(e,t)}once(e,t){return super.once(e,t)}prependListener(e,t){return super.prependListener(e,t)}prependOnceListener(e,t){return super.prependOnceListener(e,t)}}e.exports.EverscaleStandaloneClient=b;const h=async(e,t)=>{ne(t);const{permissions:n}=t.params;ue(t,t.params,"permissions");const r={...e.permissions};for(const o of n)if("basic"===o||"tonClient"===o)r.basic=!0;else{if("accountInteraction"!==o)throw he(t,`Permission '${o}' is not supported by standalone provider`);if(null!=r.accountInteraction)continue;r.accountInteraction=await be(t,e)}e.permissions=r;const o=JSON.parse(JSON.stringify(r));return e.notify("permissionsChanged",{permissions:o}),o},w=async(e,t)=>{te(t,e);const n={...e.permissions};n.accountInteraction=await be(t,e),e.permissions=n;const r=JSON.parse(JSON.stringify(n));return e.notify("permissionsChanged",{permissions:r}),r},y=async(e,t)=>{e.permissions={},await e.subscriptionController.unsubscribeFromAllContracts(),e.notify("permissionsChanged",{permissions:{}})},m=async(e,t)=>{ne(t);const{address:n,subscriptions:r}=t.params;let o;ie(t,t.params,"address"),function(e,t,n){const r=t[n];if(null!=r&&"object"!=typeof r)throw he(e,`'${String(n)}' must be an object if specified`)}(t,t.params,"subscriptions");try{o=g.repackAddress(n)}catch(e){throw he(t,e.toString())}try{return await e.subscriptionController.subscribeToContract(o,r)}catch(e){throw he(t,e.toString())}},v=async(e,t)=>{ne(t);const{address:n}=t.params;let r;ie(t,t.params,"address");try{r=g.repackAddress(n)}catch(e){throw he(t,e.toString())}await e.subscriptionController.unsubscribeFromContract(r)},x=async(e,t)=>{await e.subscriptionController.unsubscribeFromAllContracts()},A=async(t,n)=>{const r=t.connectionController.initializedTransport;if(null==r)throw he(n,"Connection controller was not initialized");const o=e.exports.VERSION;return{version:o,numericVersion:(0,c.convertVersionToInt32)(o),networkId:r.id,selectedConnection:r.group,supportedPermissions:[...e.exports.SUPPORTED_PERMISSIONS],permissions:JSON.parse(JSON.stringify(t.permissions)),subscriptions:t.subscriptionController.subscriptionStates}},S=async(e,t)=>{ne(t);const{address:n}=t.params;ie(t,t.params,"address");const{connectionController:r}=e;try{return r.use((async({data:{transport:e}})=>({state:await e.getFullContractState(n)})))}catch(e){throw he(t,e.toString())}},C=async(e,t)=>{ne(t);const{codeHash:n,limit:r,continuation:o}=t.params;ie(t,t.params,"codeHash"),ce(t,t.params,"limit"),ae(t,t.params,"continuation");const{connectionController:s}=e;try{return s.use((({data:{transport:e}})=>e.getAccountsByCodeHash(n,r||50,o)))}catch(e){throw he(t,e.toString())}},O=async(e,t)=>{ne(t);const{address:n,continuation:r,limit:o}=t.params;ie(t,t.params,"address"),le(t,t.params,"continuation",de),ce(t,t.params,"limit");const{connectionController:s}=e;try{return s.use((({data:{transport:e}})=>e.getTransactions(n,null==r?void 0:r.lt,o||50)))}catch(e){throw he(t,e.toString())}},E=async(e,t)=>{ne(t);const{hash:n}=t.params;ie(t,t.params,"hash");const{connectionController:r}=e;try{return{transaction:await r.use((({data:{transport:e}})=>e.getTransaction(n)))}}catch(e){throw he(t,e.toString())}},k=async(e,t)=>{ne(t);const{inMessageHash:n}=t.params;le(t,t.params,"inMessageHash",ie);const{connectionController:r}=e;if(null==n)return{transaction:void 0};try{return{transaction:await r.use((({data:{transport:e}})=>e.getDstTransaction(n)))}}catch(e){throw he(t,e.toString())}},I=async(e,t)=>{ne(t);const{address:n,cachedState:r,responsible:o,functionCall:s}=t.params;ie(t,t.params,"address"),le(t,t.params,"cachedState",pe),se(t,t.params,"responsible"),ge(t,t.params,"functionCall");const{clock:i,connectionController:a}=e;let c=r;if(null==c&&(c=await a.use((async({data:{transport:e}})=>e.getFullContractState(n)))),null==c)throw he(t,"Account not found");if(!c.isDeployed||null==c.lastTransactionId)throw he(t,"Account is not deployed");try{const{output:e,code:t}=g.runLocal(i,c.boc,s.abi,s.method,s.params,o||!1);return{output:e,code:t}}catch(e){throw he(t,e.toString())}},M=async(e,t)=>{ne(t);const{tvc:n,abi:r,workchain:o,publicKey:s,initParams:i}=t.params;ie(t,t.params,"tvc"),ie(t,t.params,"abi"),ce(t,t.params,"workchain"),ae(t,t.params,"publicKey");try{return g.getExpectedAddress(n,r,o||0,s,i)}catch(e){throw he(t,e.toString())}},T=async(e,t)=>{ne(t);const{boc:n}=t.params;ie(t,t.params,"boc");try{return{hash:g.getBocHash(n)}}catch(e){throw he(t,e.toString())}},j=async(e,t)=>{ne(t);const{structure:n,data:r,abiVersion:o}=t.params;ue(t,t.params,"structure"),le(t,t.params,"abiVersion",ie);try{return{boc:g.packIntoCell(n,r,o)}}catch(e){throw he(t,e.toString())}},q=async(e,t)=>{ne(t);const{structure:n,boc:r,allowPartial:o,abiVersion:s}=t.params;ue(t,t.params,"structure"),ie(t,t.params,"boc"),oe(t,t.params,"allowPartial"),le(t,t.params,"abiVersion",ie);try{return{data:g.unpackFromCell(n,r,o,s)}}catch(e){throw he(t,e.toString())}},P=async(e,t)=>{ne(t);const{boc:n}=t.params;ie(t,t.params,"boc");try{return{publicKey:g.extractPublicKey(n)}}catch(e){throw he(t,e.toString())}},R=async(e,t)=>{ne(t);const{code:n}=t.params;ie(t,t.params,"code");try{return{tvc:g.codeToTvc(n)}}catch(e){throw he(t,e.toString())}},B=async(e,t)=>{ne(t);const{code:n,data:r}=t.params;ie(t,t.params,"code"),ie(t,t.params,"data");try{return{tvc:g.mergeTvc(n,r)}}catch(e){throw he(t,e.toString())}},N=async(e,t)=>{ne(t);const{tvc:n}=t.params;ie(t,t.params,"tvc");try{return g.splitTvc(n)}catch(e){throw he(t,e.toString())}},F=async(e,t)=>{ne(t);const{code:n,salt:r}=t.params;ie(t,t.params,"code"),ie(t,t.params,"salt");try{return{code:g.setCodeSalt(n,r)}}catch(e){throw he(t,e.toString())}},D=async(e,t)=>{ne(t);const{code:n}=t.params;ie(t,t.params,"code");try{return{salt:g.getCodeSalt(n)}}catch(e){throw he(t,e.toString())}},L=async(e,t)=>{ne(t),ge(t,t,"params");const{abi:n,method:r,params:o}=t.params;try{return{boc:g.encodeInternalInput(n,r,o)}}catch(e){throw he(t,e.toString())}},H=async(e,t)=>{ne(t);const{body:n,abi:r,method:o,internal:s}=t.params;ie(t,t.params,"body"),ie(t,t.params,"abi"),fe(t,t.params,"method"),oe(t,t.params,"internal");try{return g.decodeInput(n,r,o,s)||null}catch(e){throw he(t,e.toString())}},W=async(e,t)=>{ne(t);const{body:n,abi:r,method:o}=t.params;ie(t,t.params,"body"),ie(t,t.params,"abi"),fe(t,t.params,"method");try{return g.decodeOutput(n,r,o)||null}catch(e){throw he(t,e.toString())}},K=async(e,t)=>{ne(t);const{body:n,abi:r,event:o}=t.params;ie(t,t.params,"body"),ie(t,t.params,"abi"),fe(t,t.params,"event");try{return g.decodeEvent(n,r,o)||null}catch(e){throw he(t,e.toString())}},z=async(e,t)=>{ne(t);const{transaction:n,abi:r,method:o}=t.params;ie(t,t.params,"abi"),fe(t,t.params,"method");try{return g.decodeTransaction(n,r,o)||null}catch(e){throw he(t,e.toString())}},U=async(e,t)=>{ne(t);const{transaction:n,abi:r}=t.params;ie(t,t.params,"abi");try{return{events:g.decodeTransactionEvents(n,r)}}catch(e){throw he(t,e.toString())}},G=async(e,t)=>{ne(t);const{publicKey:n,dataHash:r,signature:o}=t.params;ie(t,t.params,"publicKey"),ie(t,t.params,"dataHash"),ie(t,t.params,"signature");try{return{isValid:g.verifySignature(n,r,o)}}catch(e){throw he(t,e.toString())}},$=async(e,t)=>{ne(t);const{recipient:n,stateInit:r,payload:o,local:s}=t.params;let i;ie(t,t.params,"recipient"),ae(t,t.params,"stateInit"),function(e,t,n){const r=t[n];if("string"==typeof r||null==r)return;if("object"!=typeof r)throw he(e,`'${String(n)}' must be a function all or optional string`);ie(e,r,"abi"),ie(e,r,"method"),re(e,r,"params")}(t,t.params,"payload"),se(t,t.params,"local");try{i=g.repackAddress(n)}catch(e){throw he(t,e.toString())}const{clock:a,subscriptionController:c,properties:u}=e,l=e=>{try{if("string"==typeof o||null==o){const t=~~(a.nowMs/1e3)+e;return g.createRawExternalMessage(i,r,o,t)}return g.createExternalMessageWithoutSignature(a,i,o.abi,o.method,r,o.params,e)}catch(e){throw he(t,e.toString())}},d=e=>{let t;try{if("object"==typeof o){const n=g.decodeTransaction(e,o.abi,o.method);t=null==n?void 0:n.output}}catch(e){}return{transaction:e,output:t}};if(!0===s){const e=l(60);return d(await c.sendMessageLocally(i,e))}let _=u.message.timeout;for(let e=0;e<u.message.retryCount;++e){const e=l(_),t=await c.sendMessage(i,e);if(null!=t)return d(t);_*=u.message.timeoutGrowFactor}const p=l(60),f=await c.sendMessageLocally(i,p).catch((e=>{throw he(t,`Message expired. ${e.toString()}`)})),b=null!=f.exitCode?`. Possible exit code: ${f.exitCode}`:"";throw he(t,`Message expired${b}`)},J=async(e,t)=>{ee(t,e),ne(t);const{publicKey:n,data:r}=t.params;ie(t,t.params,"publicKey"),ie(t,t.params,"data");const{keystore:o}=e,s=await o.getSigner(n);if(null==s)throw he(t,"Signer not found for public key");try{const e=g.getDataHash(r);return{dataHash:e,...await s.sign(e).then(g.extendSignature)}}catch(e){throw he(t,e.toString())}},V=async(e,t)=>{ee(t,e),ne(t);const{publicKey:n,data:r}=t.params;ie(t,t.params,"publicKey"),ie(t,t.params,"data");const{keystore:o}=e,s=await o.getSigner(n);if(null==s)throw he(t,"Signer not found for public key");try{return await s.sign(r).then(g.extendSignature)}catch(e){throw he(t,e.toString())}},Q=async(e,t)=>{ee(t,e),te(t,e),ne(t);const{sender:n,recipient:r,amount:s,bounce:i,payload:a}=t.params;ie(t,t.params,"sender"),ie(t,t.params,"recipient"),ie(t,t.params,"amount"),oe(t,t.params,"bounce"),le(t,t.params,"payload",ge);const{clock:c,properties:u,subscriptionController:l,connectionController:d,keystore:_,accountsStorage:p}=e;let f,b,h;try{f=g.repackAddress(n),b=g.repackAddress(r),h=await p.getAccount(f).then((e=>{if(null!=e)return e;throw new Error("Sender not found")}))}catch(e){throw he(t,e.toString())}const w=async e=>{try{return h.prepareMessage({recipient:b,amount:s,bounce:i,payload:a,stateInit:void 0,timeout:e},new(o("8mCgq").AccountsStorageContext)(c,d,g,_))}catch(e){throw he(t,e.toString())}};let y=u.message.timeout;const m=!1!==u.message.retryTransfers?u.message.retryCount:1;for(let e=0;e<m;++e){const e=await w(y),t=await l.sendMessage(f,e);if(null!=t)return{transaction:t};y*=u.message.timeoutGrowFactor}const v=await w(60),x=await l.sendMessageLocally(f,v).catch((e=>{throw he(t,`Message expired. ${e.toString()}`)})),A=null!=x.exitCode?`. Possible exit code: ${x.exitCode}`:"";throw he(t,`Message expired${A}`)},Y=async(e,t)=>{ee(t,e),te(t,e),ne(t);const{sender:n,recipient:r,amount:s,bounce:i,payload:a}=t.params;ie(t,t.params,"sender"),ie(t,t.params,"recipient"),ie(t,t.params,"amount"),oe(t,t.params,"bounce"),le(t,t.params,"payload",ge);const{clock:c,subscriptionController:u,connectionController:l,keystore:d,accountsStorage:_,notify:p}=e;let f,b,h;try{f=g.repackAddress(n),b=g.repackAddress(r)}catch(e){throw he(t,e.toString())}try{const e=await _.getAccount(f);if(null==e)throw new Error("Sender not found");h=await e.prepareMessage({recipient:b,amount:s,bounce:i,payload:a,stateInit:void 0,timeout:60},new(o("8mCgq").AccountsStorageContext)(c,l,g,d))}catch(e){throw he(t,e.toString())}return u.sendMessage(f,h).then((e=>{p("messageStatusUpdated",{address:f,hash:h.hash,transaction:e})})).catch(console.error),{message:{account:f,hash:h.hash,expireAt:h.expireAt}}},X=async(e,t)=>{ee(t,e),ne(t);const{publicKey:n,recipient:r,stateInit:o,payload:s,local:i}=t.params;let a;ie(t,t.params,"publicKey"),ie(t,t.params,"recipient"),ae(t,t.params,"stateInit"),ge(t,t.params,"payload"),se(t,t.params,"local");try{a=g.repackAddress(r)}catch(e){throw he(t,e.toString())}const{clock:c,subscriptionController:u,keystore:l,properties:d}=e,_=await l.getSigner(n);if(null==_)throw he(t,"Signer not found for public key");const p=async e=>{let r;try{r=g.createExternalMessage(c,a,s.abi,s.method,o,s.params,n,e)}catch(e){throw he(t,e.toString())}try{const e=await _.sign(r.hash);return r.sign(e)}catch(e){throw he(t,e.toString())}finally{r.free()}},f=e=>{let t;try{const n=g.decodeTransaction(e,s.abi,s.method);t=null==n?void 0:n.output}catch(e){}return{transaction:e,output:t}};if(!0===i){const e=await p(60);return f(await u.sendMessageLocally(a,e))}let b=d.message.timeout;for(let e=0;e<d.message.retryCount;++e){const e=await p(b),t=await u.sendMessage(a,e);if(null!=t)return f(t);b*=d.message.timeoutGrowFactor}const h=await p(60),w=await u.sendMessageLocally(a,h).catch((e=>{throw he(t,`Message expired. ${e.toString()}`)})),y=null!=w.exitCode?`. Possible exit code: ${w.exitCode}`:"";throw he(t,`Message expired${y}`)},Z=async(e,t)=>{ee(t,e),ne(t);const{publicKey:n,recipient:r,stateInit:o,payload:s}=t.params;let i;ie(t,t.params,"publicKey"),ie(t,t.params,"recipient"),ae(t,t.params,"stateInit"),ge(t,t.params,"payload");try{i=g.repackAddress(r)}catch(e){throw he(t,e.toString())}const{clock:a,subscriptionController:c,keystore:u,properties:l,notify:d}=e,_=await u.getSigner(n);if(null==_)throw he(t,"Signer not found for public key");let p,f;try{p=g.createExternalMessage(a,i,s.abi,s.method,o,s.params,n,l.message.timeout)}catch(e){throw he(t,e.toString())}try{const e=await _.sign(p.hash);f=p.sign(e)}catch(e){throw he(t,e.toString())}finally{p.free()}return c.sendMessage(i,f).then((e=>{d("messageStatusUpdated",{address:i,hash:f.hash,transaction:e})})).catch(console.error),{message:{account:i,hash:f.hash,expireAt:f.expireAt}}};function ee(e,t){if(null==t.keystore)throw he(e,"Keystore not found")}function te(e,t){if(null==t.accountsStorage)throw he(e,"AccountsStorage not found")}function ne(e){if(null==e.params||"object"!=typeof e.params)throw he(e,"required params object")}function re(e,t,n){if("object"!=typeof t[n])throw he(e,`'${String(n)}' must be an object`)}function oe(e,t,n){if("boolean"!=typeof t[n])throw he(e,`'${String(n)}' must be a boolean`)}function se(e,t,n){const r=t[n];if(null!=r&&"boolean"!=typeof r)throw he(e,`'${String(n)}' must be a boolean if specified`)}function ie(e,t,n){const r=t[n];if("string"!=typeof r||0===r.length)throw he(e,`'${String(n)}' must be non-empty string`)}function ae(e,t,n){const r=t[n];if(null!=r&&("string"!=typeof r||0===r.length))throw he(e,`'${String(n)}' must be a non-empty string if provided`)}function ce(e,t,n){const r=t[n];if(null!=r&&"number"!=typeof r)throw he(e,`'${String(n)}' must be a number if provider`)}function ue(e,t,n){const r=t[n];if(!Array.isArray(r))throw he(e,`'${String(n)}' must be an array`)}function le(e,t,n,r){null!=t[n]&&r(e,t,n)}function de(e,t,n){re(e,t,n);const r=t[n];ie(e,r,"lt"),ie(e,r,"hash")}function _e(e,t,n){re(e,t,n);const r=t[n];oe(e,r,"isExact"),ie(e,r,"lt"),ae(e,r,"hash")}function pe(e,t,n){re(e,t,n);const r=t[n];ie(e,r,"balance"),le(e,r,"lastTransactionId",_e),oe(e,r,"isDeployed")}function ge(e,t,n){re(e,t,n);const r=t[n];ie(e,r,"abi"),ie(e,r,"method"),re(e,r,"params")}function fe(e,t,n){const r=t[n];if(null!=r&&"string"!=typeof r&&!Array.isArray(r))throw he(e,`'${String(n)}' must be a method name or an array of possible names`)}async function be(e,t){te(e,t);const n=t.accountsStorage.defaultAccount;if(null==n)throw he(e,"Default account not set in accounts storage");const r=await t.accountsStorage.getAccount(n);if(null==r)throw he(e,"Default account not found");const s=await r.fetchPublicKey(new(o("8mCgq").AccountsStorageContext)(t.clock,t.connectionController,g));return{address:r.address.toString(),publicKey:s,contractType:"unknown"}}const he=(e,t,n)=>new we(2,`${e.method}: ${t}`,n);class we extends Error{constructor(e,t,n){if(!Number.isInteger(e))throw new Error('"code" must be an integer');if(!t||"string"!=typeof t)throw new Error('"message" must be a nonempty string');super(t),this.code=e,this.data=n}serialize(){const e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data),this.stack&&(e.stack=this.stack),e}toString(){return(0,i.default)(this.serialize(),ye,2)}}const ye=(e,t)=>{if("[Circular]"!==t)return t}})),o.register("hgGe6",(function(e,t){e.exports=a,a.default=a,a.stable=d,a.stableStringify=d;var n="[...]",r="[Circular]",o=[],s=[];function i(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function a(e,t,n,r){var a;void 0===r&&(r=i()),u(e,"",0,[],void 0,0,r);try{a=0===s.length?JSON.stringify(e,t,n):JSON.stringify(e,p(t),n)}catch(e){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==o.length;){var c=o.pop();4===c.length?Object.defineProperty(c[0],c[1],c[3]):c[0][c[1]]=c[2]}}return a}function c(e,t,n,r){var i=Object.getOwnPropertyDescriptor(r,n);void 0!==i.get?i.configurable?(Object.defineProperty(r,n,{value:e}),o.push([r,n,t,i])):s.push([t,n,e]):(r[n]=e,o.push([r,n,t]))}function u(e,t,o,s,i,a,l){var d;if(a+=1,"object"==typeof e&&null!==e){for(d=0;d<s.length;d++)if(s[d]===e)return void c(r,e,t,i);if(void 0!==l.depthLimit&&a>l.depthLimit)return void c(n,e,t,i);if(void 0!==l.edgesLimit&&o+1>l.edgesLimit)return void c(n,e,t,i);if(s.push(e),Array.isArray(e))for(d=0;d<e.length;d++)u(e[d],d,d,s,e,a,l);else{var _=Object.keys(e);for(d=0;d<_.length;d++){var p=_[d];u(e[p],p,d,s,e,a,l)}}s.pop()}}function l(e,t){return e<t?-1:e>t?1:0}function d(e,t,n,r){void 0===r&&(r=i());var a,c=_(e,"",0,[],void 0,0,r)||e;try{a=0===s.length?JSON.stringify(c,t,n):JSON.stringify(c,p(t),n)}catch(e){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==o.length;){var u=o.pop();4===u.length?Object.defineProperty(u[0],u[1],u[3]):u[0][u[1]]=u[2]}}return a}function _(e,t,s,i,a,u,d){var p;if(u+=1,"object"==typeof e&&null!==e){for(p=0;p<i.length;p++)if(i[p]===e)return void c(r,e,t,a);try{if("function"==typeof e.toJSON)return}catch(e){return}if(void 0!==d.depthLimit&&u>d.depthLimit)return void c(n,e,t,a);if(void 0!==d.edgesLimit&&s+1>d.edgesLimit)return void c(n,e,t,a);if(i.push(e),Array.isArray(e))for(p=0;p<e.length;p++)_(e[p],p,p,i,e,u,d);else{var g={},f=Object.keys(e).sort(l);for(p=0;p<f.length;p++){var b=f[p];_(e[b],b,p,i,e,u,d),g[b]=e[b]}if(void 0===a)return g;o.push([a,t,e]),a[t]=g}i.pop()}}function p(e){return e=void 0!==e?e:function(e,t){return t},function(t,n){if(s.length>0)for(var r=0;r<s.length;r++){var o=s[r];if(o[1]===t&&o[0]===n){n=o[2],s.splice(r,1);break}}return e.call(this,t,n)}}})),o.register("km8MT",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.getUniqueId=e.exports.convertVersionToInt32=e.exports.SafeEventEmitter=void 0;var n=o("7etJZ");function r(e,t,n){try{Reflect.apply(e,t,n)}catch(e){setTimeout((()=>{throw e}))}}class s extends n.EventEmitter{emit(e,...t){let n="error"===e;const o=this._events;if(void 0!==o)n=n&&void 0===o.error;else if(!n)return!1;if(n){let e;if(t.length>0&&([e]=t),e instanceof Error)throw e;const n=new Error("Unhandled error."+(e?` (${e.message})`:""));throw n.context=e,n}const s=o[e];if(void 0===s)return!1;if("function"==typeof s)r(s,this,t);else{const e=s.length,n=function(e){const t=e.length,n=new Array(t);for(let r=0;r<t;r+=1)n[r]=e[r];return n}(s);for(let o=0;o<e;o+=1)r(n[o],this,t)}return!0}}e.exports.SafeEventEmitter=s;e.exports.convertVersionToInt32=e=>{const t=e.split(".");if(3!==t.length)throw new Error("Received invalid version string");t.forEach((e=>{if(~~e>999)throw new Error(`Version string invalid, ${e} is too large`)}));let n=1e6,r=0;for(let e=0;e<3;e++)r+=~~t[e]*n,n/=1e3;return r};const i=4294967295;let a=Math.floor(Math.random()*i);e.exports.getUniqueId=function(){return a=(a+1)%i,a}})),o.register("7etJZ",(function(e,t){var n,r="object"==typeof Reflect?Reflect:null,o=r&&"function"==typeof r.apply?r.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};n=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function i(){i.init.call(this)}e.exports=i,e.exports.once=function(e,t){return new Promise((function(n,r){function o(n){e.removeListener(t,s),r(n)}function s(){"function"==typeof e.removeListener&&e.removeListener("error",o),n([].slice.call(arguments))}b(e,t,s,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&b(e,"error",t,n)}(e,o,{once:!0})}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var a=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function l(e,t,n,r){var o,s,i,a;if(c(n),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),i=s[t]),void 0===i)i=s[t]=n,++e._eventsCount;else if("function"==typeof i?i=s[t]=r?[n,i]:[i,n]:r?i.unshift(n):i.push(n),(o=u(e))>0&&i.length>o&&!i.warned){i.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=i.length,a=l,console&&console.warn&&console.warn(a)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=d.bind(r);return o.listener=n,r.wrapFn=o,o}function p(e,t,n){var r=e._events;if(void 0===r)return[];var o=r[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):f(o,o.length)}function g(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function f(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function b(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(s){r.once&&e.removeEventListener(t,o),n(s)}))}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return u(this)},i.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,s=this._events;if(void 0!==s)r=r&&void 0===s.error;else if(!r)return!1;if(r){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var a=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw a.context=i,a}var c=s[e];if(void 0===c)return!1;if("function"==typeof c)o(c,this,t);else{var u=c.length,l=f(c,u);for(n=0;n<u;++n)o(l[n],this,t)}return!0},i.prototype.addListener=function(e,t){return l(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return l(this,e,t,!0)},i.prototype.once=function(e,t){return c(t),this.on(e,_(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,_(this,e,t)),this},i.prototype.removeListener=function(e,t){var n,r,o,s,i;if(c(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){i=n[s].listener,o=s;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,i||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,s=Object.keys(n);for(r=0;r<s.length;++r)"removeListener"!==(o=s[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},i.prototype.listeners=function(e){return p(this,e,!0)},i.prototype.rawListeners=function(e){return p(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):g.call(e,t)},i.prototype.listenerCount=g,i.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}})),o.register("aqdrJ",(function(e,t){var n=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ConnectionController=e.exports.createConnectionController=e.exports.ConnectionError=e.exports.checkConnection=e.exports.NETWORK_PRESETS=void 0;var r=o("htOzJ");const s=n(o("ejgJV"));var i=o("3TSOS"),a=o("eNWYG");const{nekoton:c,debugLog:u}=s.default;e.exports.NETWORK_PRESETS={mainnetJrpc:{id:1,type:"jrpc",data:{endpoint:"https://jrpc.everwallet.net/rpc"}},fld:{id:10,type:"graphql",data:{endpoints:["gql.custler.net"],local:!1}},local:{id:31337,type:"graphql",data:{endpoints:["127.0.0.1"],local:!0}}};function l(t){if("string"==typeof t){const n=e.exports.NETWORK_PRESETS[t];if(null==n)throw new Error(`Target preset id not found: ${t}`);return n}return t}e.exports.checkConnection=async function(e){const t=l(e),n=new c.ClockWithOffset;try{const e=new _(n);await e._connect(t),null!=e._initializedTransport&&p(e._initializedTransport)}catch(e){throw new d(t,e.toString())}finally{n.free()}};class d extends Error{constructor(e,t){super(t),this.params=e}}e.exports.ConnectionError=d,e.exports.createConnectionController=async function(e,t,n=!1){const r=l(t);for(;;)try{const t=new _(e);return await t.startSwitchingNetwork(r).then((e=>e.switch())),u(`Successfully connected to ${r.group}`),t}catch(e){if(!n)throw e;console.error("Connection failed:",e),await new Promise((e=>{setTimeout((()=>e()),5e3)})),u("Restarting connection process")}};class _{constructor(e){this._networkMutex=new r.Mutex,this._acquiredTransportCounter=0,this._clock=e}async acquire(){return g(this._initializedTransport),await this._acquireTransport(),{transport:this._initializedTransport,release:()=>this._releaseTransport()}}async use(e){return g(this._initializedTransport),await this._acquireTransport(),e(this._initializedTransport).finally((()=>{this._releaseTransport()}))}async startSwitchingNetwork(e){var t;null===(t=this._cancelTestTransport)||void 0===t||t.call(this);const n=await this._networkMutex.acquire();return new class{constructor(e,t,n){this._controller=e,this._release=t,this._params=n}async switch(){await this._controller._connect(this._params).finally((()=>this._release()))}}(this,n,e)}get initializedTransport(){return this._initializedTransport}async _connect(e){let t;null!=this._initializedTransport&&p(this._initializedTransport),this._initializedTransport=void 0,function(e){e[e.DONE=0]="DONE",e[e.CANCELLED=1]="CANCELLED"}(t||(t={}));const n=async({data:{transport:e}},n)=>new Promise(((r,o)=>{this._cancelTestTransport=()=>r(t.CANCELLED),n?e.getAccountsByCodeHash("4e92716de61d456e58f16e4e867e3e93a7548321eace86301b51c8b80ca6239b",1).then((()=>r(t.DONE))).catch((e=>o(e))):e.getFullContractState("-1:0000000000000000000000000000000000000000000000000000000000000000").then((()=>r(t.DONE))).catch((e=>o(e))),setTimeout((()=>o(new Error("Connection timeout"))),1e4)})).finally((()=>this._cancelTestTransport=void 0));try{const r=null!=e.group?e.group:(e=>{switch(e){case 1:return"mainnet";case 2:return"testnet";case 10:return"fld";case 31337:return"localnet";default:return`network${e}`}})(e.id),{local:o,transportData:s}=await("graphql"===e.type?async()=>{const t=new i.GqlSocket,n=await t.connect(this._clock,e.data),o=c.Transport.fromGqlConnection(n),s={id:e.id,group:r,type:"graphql",data:{socket:t,connection:n,transport:o}};return{local:!0===e.data.local,transportData:s}}:async()=>{const t=new a.JrpcSocket,n=await t.connect(this._clock,e.data),o=c.Transport.fromJrpcConnection(n);return{local:!1,transportData:{id:e.id,group:r,type:"jrpc",data:{socket:t,connection:n,transport:o}}}})();try{if(await n(s,o)==t.CANCELLED)return void p(s)}catch(e){throw p(s),e}this._initializedTransport=s}catch(e){throw new Error(`Failed to create connection: ${e.toString()}`)}}async _acquireTransport(){u("_acquireTransport"),this._acquiredTransportCounter>0?(u("_acquireTransport -> increase"),this._acquiredTransportCounter+=1):(this._acquiredTransportCounter=1,null!=this._release?console.warn("mutex is already acquired"):(u("_acquireTransport -> await"),this._release=await this._networkMutex.acquire(),u("_acquireTransport -> create")))}_releaseTransport(){var e;u("_releaseTransport"),this._acquiredTransportCounter-=1,this._acquiredTransportCounter<=0&&(u("_releaseTransport -> release"),null===(e=this._release)||void 0===e||e.call(this),this._release=void 0)}}function p(e){e.data.transport.free(),e.data.connection.free()}function g(e){if(null==e)throw new Error("Connection is not initialized")}e.exports.ConnectionController=_})),o.register("htOzJ",(function(e,t){function n(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}function r(e){const t=document.createTextNode("");let r,o,s=0,i=0;return new e((function(){let e;if(r)o&&(r=o.slice(i).concat(r));else{if(!o)return;r=o}if(o=r,r=null,i=0,"function"==typeof o)return e=o,o=null,void e();for(t.data=s=++s%2;i<o.length;)e=o[i],i++,i===o.length&&(o=null),e()})).observe(t,{characterData:!0}),function(e){n(e),r?"function"==typeof r?r=[r,e]:r.push(e):(r=e,t.data=s=++s%2)}}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Mutex=e.exports.Semaphore=void 0;const o=function(){if("function"==typeof queueMicrotask)return function(e){queueMicrotask(n(e))};if("object"==typeof document&&document){if("function"==typeof MutationObserver)return r(MutationObserver);if("function"==typeof window.WebKitMutationObserver)return r(window.WebKitMutationObserver)}if("function"==typeof setImmediate)return function(e){setImmediate(n(e))};if("function"==typeof setTimeout||"object"==typeof setTimeout)return function(e){setTimeout(n(e),0)};throw new Error("No `nextTick` implementation found")}();class s{constructor(e){this.tasks=[],this.count=e}sched(){if(this.count>0&&this.tasks.length>0){this.count--;let e=this.tasks.shift();if(void 0===e)throw"Unexpected undefined value in tasks list";e()}}acquire(){return new Promise(((e,t)=>{this.tasks.push((()=>{let t=!1;e((()=>{t||(t=!0,this.count++,this.sched())}))})),o(this.sched.bind(this))}))}use(e){return this.acquire().then((t=>e().then((e=>(t(),e))).catch((e=>{throw t(),e}))))}}e.exports.Semaphore=s;e.exports.Mutex=class extends s{constructor(){super(1)}}})),o.register("3TSOS",(function(e,t){var n=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.GqlSocket=void 0;const r=n(o("ejgJV")),{nekoton:s,fetch:i,fetchAgent:a,debugLog:c}=r.default;class u{async connect(e,t){return new s.GqlConnection(e,new class{constructor(e){this.nextLatencyDetectionTime=0,this.local=!0===e.local,this.maxLatency=e.maxLatency||6e4,this.latencyDetectionInterval=e.latencyDetectionInterval||6e4,this.endpoints=e.endpoints.map(u.expandAddress),1==this.endpoints.length&&(this.currentEndpoint=this.endpoints[0],this.nextLatencyDetectionTime=Number.MAX_VALUE)}isLocal(){return this.local}send(e,t,n){(async()=>{const n=Date.now();try{let r;null!=this.currentEndpoint&&n<this.nextLatencyDetectionTime?r=this.currentEndpoint:null!=this.resolutionPromise?(r=await this.resolutionPromise,delete this.resolutionPromise):(delete this.currentEndpoint,this.resolutionPromise=this._selectQueryingEndpoint().then((e=>(this.currentEndpoint=e,this.nextLatencyDetectionTime=Date.now()+this.latencyDetectionInterval,e))),r=await this.resolutionPromise,delete this.resolutionPromise);const o=await i(r.url,{method:"post",headers:l,body:e,agent:r.agent}).then((e=>e.text()));t.onReceive(o)}catch(e){t.onError(e)}})()}async _selectQueryingEndpoint(){const e=this.maxLatency,t=this.endpoints.length;for(let n=0;n<5;++n){let r;const o=new Promise(((e,t)=>{r={resolve:t=>e(t),reject:()=>t(void 0)}}));let s,i=0;for(const n of this.endpoints)u.checkLatency(n).then((o=>{if(++i,void 0!==o&&o<=e)return r.resolve(n);(void 0===s||void 0===s.latency||void 0!==o&&o<s.latency)&&(s={endpoint:n,latency:o}),i>=t&&(void 0!==(null==s?void 0:s.latency)?r.resolve(s.endpoint):r.reject())}));try{return await o}catch(e){let t;const r=new Promise((e=>{t=()=>e()}));setTimeout((()=>t()),Math.min(100*n,5e3)),await r}}throw new Error("Not available endpoint found")}}(t))}static async checkLatency(e){const t=await i(`${e.url}?query=%7Binfo%7Bversion%20time%20latency%7D%7D`,{method:"get",agent:e.agent}).then((e=>e.json())).catch((e=>{c(e)}));if("object"!=typeof t||null==t)return;const n=t.data;if("object"!=typeof n||null==n)return;const r=n.info;if("object"!=typeof r||null==r)return;const o=r.latency;return"number"==typeof o?o:void 0}}e.exports.GqlSocket=u,u.expandAddress=e=>{const t=e.lastIndexOf("/");let n;return n=(e=t<0?e:e.substring(0,t)).startsWith("http://")||e.startsWith("https://")?`${e}/graphql`:["localhost","127.0.0.1"].indexOf(e)>=0?`http://${e}/graphql`:`https://${e}/graphql`,{url:n,agent:a(n)}};const l={"Content-Type":"application/json"}})),o.register("eNWYG",(function(e,t){var n=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.JrpcSocket=void 0;const r=n(o("ejgJV")),{nekoton:s,fetch:i,fetchAgent:a}=r.default;e.exports.JrpcSocket=class{async connect(e,t){return new s.JrpcConnection(e,new class{constructor(e){this.endpoint=e.endpoint,this.endpointAgent=a(this.endpoint),this.alternativeEndpoint=null!=e.alternativeEndpoint?e.alternativeEndpoint:e.endpoint,this.alternativeEndpointAgent=a(this.alternativeEndpoint)}send(e,t,n){(async()=>{try{const r=n?this.endpoint:this.alternativeEndpoint,o=n?this.endpointAgent:this.alternativeEndpointAgent,s=await i(r,{method:"post",headers:c,body:e,agent:o}).then((e=>e.text()));t.onReceive(s)}catch(e){t.onError(e)}})()}}(t))}};const c={"Content-Type":"application/json"}})),o.register("gkoT3",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SubscriptionController=void 0;var n=o("htOzJ"),r=o("km8MT"),s=o("gR9vm");e.exports.SubscriptionController=class{constructor(e,t){this._subscriptions=new Map,this._subscriptionsMutex=new n.Mutex,this._sendMessageRequests=new Map,this._subscriptionStates=new Map,this._connectionController=e,this._notify=t}async sendMessageLocally(e,t){const n=(0,r.getUniqueId)();try{await this.subscribeToContract(e,{state:!0},n);const r=this._subscriptions.get(e);if(null==r)throw new Error("Failed to subscribe to contract");return await r.use((e=>e.sendMessageLocally(t)))}finally{this.unsubscribeFromContract(e,n).catch(console.error)}}sendMessage(e,t){let n=this._sendMessageRequests.get(e);null==n&&(n=new Map,this._sendMessageRequests.set(e,n));const o=(0,r.getUniqueId)();return new Promise(((r,s)=>{const i=t.hash;n.set(i,{resolve:r,reject:s}),this.subscribeToContract(e,{state:!0},o).then((async()=>{const n=this._subscriptions.get(e);if(null==n)throw new Error("Failed to subscribe to contract");await n.prepareReliablePolling(),await n.use((async e=>{await e.sendMessage(t),n.skipRefreshTimer()}))})).catch((t=>this._rejectMessageRequest(e,i,t))).finally((()=>{this.unsubscribeFromContract(e,o).catch(console.error)}))}))}async subscribeToContract(e,t,n){return this._subscriptionsMutex.use((async()=>{const r=e=>{const n={...e};return Object.keys(n).map((e=>{if("state"!==e&&"transactions"!==e)throw new Error(`Unknown subscription topic: ${e}`);const r=t[e];if("boolean"!=typeof r){if(null==r)return;throw new Error(`Unknown subscription topic value ${e}: ${r}`)}n[e]=r})),n},o=this._subscriptionStates.get(e)||i();let s;if(null==n)s=r(o.client);else{const e=o.internal.get(n);null!=e?(s=r(e),a(s)&&o.internal.delete(n)):s=r({state:!1,transactions:!1})}const c={...s};for(const e of o.internal.values())c.state||(c.state=e.state),c.transactions||(c.transactions=e.transactions);if(a(c))return this._subscriptionStates.delete(e),await this._tryUnsubscribe(e),{...c};let u=this._subscriptions.get(e);const l=null==u;return null==u&&(u=await this._createSubscription(e)),null==n?o.client=s:o.internal.set(n,s),this._subscriptionStates.set(e,o),l&&await u.start(),{...s}}))}async unsubscribeFromContract(e,t){await this.subscribeToContract(e,{state:!1,transactions:!1},t)}async unsubscribeFromAllContracts(e){for(const t of this._subscriptions.keys())await this.unsubscribeFromContract(t,e)}get subscriptionStates(){const e={};for(const[t,n]of this._subscriptionStates.entries())e[t]={...n.client};return e}async _createSubscription(e){const t=new class{constructor(e,t){this._enabled=!1,this._address=e,this._controller=t}enabledNotifications(){this._enabled=!0}onMessageExpired(e){this._enabled&&this._controller._resolveMessageRequest(this._address,e.messageHash,void 0).catch(console.error)}onMessageSent(e,t){this._enabled&&this._controller._resolveMessageRequest(this._address,e.messageHash,t).catch(console.error)}onStateChanged(e){this._enabled&&this._controller._notifyStateChanged(this._address,e)}onTransactionsFound(e,t){this._enabled&&this._controller._notifyTransactionsFound(this._address,e,t)}}(e,this),n=await s.ContractSubscription.subscribe(this._connectionController,e,t);return n.setPollingInterval(1e4),t.enabledNotifications(),this._subscriptions.set(e,n),n}async _tryUnsubscribe(e){const t=this._subscriptionStates.get(e),n=this._sendMessageRequests.get(e);if(null==t&&0==((null==n?void 0:n.size)||0)){const t=this._subscriptions.get(e);this._subscriptions.delete(e),await(null==t?void 0:t.stop())}}async _rejectMessageRequest(e,t,n){this._deleteMessageRequestAndGetCallback(e,t).reject(n),await this._subscriptionsMutex.use((async()=>this._tryUnsubscribe(e)))}async _resolveMessageRequest(e,t,n){this._deleteMessageRequestAndGetCallback(e,t).resolve(n),await this._subscriptionsMutex.use((async()=>this._tryUnsubscribe(e)))}_notifyStateChanged(e,t){const n=this._subscriptionStates.get(e);(null==n?void 0:n.client.state)&&this._notify("contractStateChanged",{address:e,state:t})}_notifyTransactionsFound(e,t,n){const r=this._subscriptionStates.get(e);(null==r?void 0:r.client.transactions)&&this._notify("transactionsFound",{address:e,transactions:t,info:n})}_deleteMessageRequestAndGetCallback(e,t){var n;const r=null===(n=this._sendMessageRequests.get(e))||void 0===n?void 0:n.get(t);if(!r)throw new Error(`SendMessage request with id '${t}' not found`);return this._deleteMessageRequest(e,t),r}_deleteMessageRequest(e,t){const n=this._sendMessageRequests.get(e);n&&(n.delete(t),0==n.size&&this._sendMessageRequests.delete(e))}};const i=()=>({internal:new Map,client:{state:!1,transactions:!1}}),a=e=>!e.state&&!e.transactions})),o.register("gR9vm",(function(e,t){var n=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ContractSubscription=void 0;var r=o("htOzJ");const s=n(o("ejgJV")),{nekoton:i,debugLog:a}=s.default;class c{constructor(e,t,n,o){this._contractMutex=new r.Mutex,this._pollingInterval=d,this._isRunning=!1,this._connection=e,this._address=n,this._contract=o,this._releaseTransport=t,this._currentPollingMethod=o.pollingMethod}static async subscribe(e,t,n){const{transport:{data:{connection:r,transport:o}},release:s}=await e.acquire();try{const e=await o.subscribeToGenericContract(t,n);if(null==e)throw new Error(`Failed to subscribe to contract: ${t}`);return new c(r,s,t,e)}catch(e){throw s(),e}}setPollingInterval(e){this._pollingInterval=e}async start(){if(null==this._releaseTransport)throw new Error("Contract subscription must not be started after being closed");this._loopPromise&&(a("ContractSubscription -> awaiting loop promise"),await this._loopPromise),a("ContractSubscription -> loop started"),this._loopPromise=(async()=>{const e=!(this._connection instanceof i.GqlConnection);this._isRunning=!0;let t=this._currentPollingMethod;for(;this._isRunning;){const n=t!=this._currentPollingMethod;if(t=this._currentPollingMethod,e||"manual"==this._currentPollingMethod){this._currentBlockId=void 0,a("ContractSubscription -> manual -> waiting begins");const e="manual"==this._currentPollingMethod?this._pollingInterval:l;if(await new Promise((t=>{const n=setTimeout((()=>{this._refreshTimer=void 0,t()}),e);this._refreshTimer=[n,t]})),a("ContractSubscription -> manual -> waiting ends"),!this._isRunning)break;a("ContractSubscription -> manual -> refreshing begins");try{this._currentPollingMethod=await this._contractMutex.use((async()=>(await this._contract.refresh(),this._contract.pollingMethod)))}catch(e){console.error(`Error during account refresh (${this._address})`,e)}a("ContractSubscription -> manual -> refreshing ends")}else{const e=this._connection;let t;if(a("ContractSubscription -> reliable start"),n&&null!=this._suggestedBlockId&&(this._currentBlockId=this._suggestedBlockId),this._suggestedBlockId=void 0,null==this._currentBlockId){console.warn("Starting reliable connection with unknown block");try{const n=await e.getLatestBlock(this._address);this._currentBlockId=n.id,t=this._currentBlockId}catch(e){console.error(`Failed to get latest block for ${this._address}`,e);continue}}else try{t=await e.waitForNextBlock(this._currentBlockId,this._address,u)}catch(e){console.error(`Failed to wait for next block for ${this._address}`);continue}try{this._currentPollingMethod=await this._contractMutex.use((async()=>(await this._contract.handleBlock(t),this._contract.pollingMethod))),this._currentBlockId=t}catch(e){console.error(`Failed to handle block for ${this._address}`,e)}}}a("ContractSubscription -> loop finished")})()}skipRefreshTimer(){var e,t;clearTimeout(null===(e=this._refreshTimer)||void 0===e?void 0:e[0]),null===(t=this._refreshTimer)||void 0===t||t[1](),this._refreshTimer=void 0}async pause(){this._isRunning&&(this._isRunning=!1,this.skipRefreshTimer(),await this._loopPromise,this._loopPromise=void 0,this._currentPollingMethod=await this._contractMutex.use((async()=>this._contract.pollingMethod)),this._currentBlockId=void 0,this._suggestedBlockId=void 0)}async stop(){var e;await this.pause(),this._contract.free(),null===(e=this._releaseTransport)||void 0===e||e.call(this),this._releaseTransport=void 0}async prepareReliablePolling(){try{this._connection instanceof i.GqlConnection&&(this._suggestedBlockId=(await this._connection.getLatestBlock(this._address)).id)}catch(e){throw new Error(`Failed to prepare reliable polling: ${e.toString()}`)}}async use(e){const t=await this._contractMutex.acquire();return e(this._contract).then((e=>(t(),e))).catch((e=>{throw t(),e}))}}e.exports.ContractSubscription=c;const u=60,l=2e3,d=6e4})),o.register("8mCgq",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SimpleAccountsStorage=e.exports.AccountsStorageContext=e.exports.EverWalletAccount=e.exports.HighloadWalletV2=e.exports.WalletV3Account=e.exports.MsigAccount=e.exports.GenericAccount=e.exports.GiverAccount=void 0;var n=o("dLh7e"),r=o("lRI68");Object.defineProperty(e.exports,"GiverAccount",{enumerable:!0,get:function(){return r.GiverAccount}});var s=o("9xcg8");Object.defineProperty(e.exports,"GenericAccount",{enumerable:!0,get:function(){return s.GenericAccount}}),Object.defineProperty(e.exports,"MsigAccount",{enumerable:!0,get:function(){return s.MsigAccount}});var i=o("61axy");Object.defineProperty(e.exports,"WalletV3Account",{enumerable:!0,get:function(){return i.WalletV3Account}});var a=o("1J5qq");Object.defineProperty(e.exports,"HighloadWalletV2",{enumerable:!0,get:function(){return a.HighloadWalletV2}});var c=o("2ePkt");Object.defineProperty(e.exports,"EverWalletAccount",{enumerable:!0,get:function(){return c.EverWalletAccount}});e.exports.AccountsStorageContext=class{constructor(e,t,n,r){this.clock=e,this.connectionController=t,this.nekoton=n,this.keystore=r}async getSigner(e){if(null==this.keystore)throw new Error("Keystore not found");const t=await this.keystore.getSigner(e);if(null==t)throw new Error("Signer not found");return t}get nowMs(){return this.clock.nowMs}get nowSec(){return~~(this.clock.nowMs/1e3)}async fetchPublicKey(e){const t=await this.getFullContractState(e);if(null==t||!t.isDeployed)throw new Error("Contract not deployed");return this.nekoton.extractPublicKey(t.boc)}async getFullContractState(e){return this.connectionController.use((async({data:{transport:t}})=>t.getFullContractState(e.toString())))}extractContractData(e){return this.nekoton.extractContractData(e)}packIntoCell(e){return this.nekoton.packIntoCell(e.structure,e.data,e.abiVersion)}unpackFromCell(e){return this.nekoton.unpackFromCell(e.structure,e.boc,e.allowPartial,e.abiVersion)}getBocHash(e){return this.nekoton.getBocHash(e)}extendSignature(e){return this.nekoton.extendSignature(e)}encodeInternalInput(e){return this.nekoton.encodeInternalInput(e.abi,e.method,e.params)}encodeInternalMessage(e){return this.nekoton.encodeInternalMessage(e.src,e.dst,e.bounce,e.stateInit,e.body,e.amount)}async createExternalMessage(e){const t=this.nekoton.createExternalMessage(this.clock,e.address.toString(),e.abi,e.method,e.stateInit,e.params,e.signer.publicKey,e.timeout);try{const n=await e.signer.sign(t.hash);return t.sign(n)}finally{t.free()}}createRawExternalMessage(e){return this.nekoton.createRawExternalMessage(e.address.toString(),e.stateInit,e.body,e.expireAt)}};e.exports.SimpleAccountsStorage=class{constructor(e={}){if(this.accounts=new Map,null!=e.entries)for(const t of e.entries)null==this._defaultAccount&&(this._defaultAccount=t.address),this.accounts.set(t.address.toString(),t);if(null!=e.defaultAccount){let t;if(t=e.defaultAccount instanceof n.Address?e.defaultAccount:new n.Address(e.defaultAccount),!this.accounts.has(t.toString()))throw new Error("Provided default account not found in storage");this._defaultAccount=t}}get defaultAccount(){return this._defaultAccount}set defaultAccount(e){const t=null==e?void 0:e.toString();if(null!=t&&!this.accounts.has(t))throw new Error("Account not found in storage");this._defaultAccount=null==e||e instanceof n.Address?e:new n.Address(e)}async getAccount(e){return this.accounts.get(e.toString())}addAccount(e){const t=e.address;return this.accounts.set(t.toString(),e),t}hasAccount(e){return this.accounts.has(e.toString())}removeAccount(e){this.accounts.delete(e.toString())}}})),o.register("dLh7e",(function(e,t){var n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return r(t,e),t},i=e.exports&&e.exports.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ProviderNotInitializedException=e.exports.ProviderNotFoundException=e.exports.ProviderRpcClient=e.exports.hasEverscaleProvider=e.exports.LT_COLLATOR=e.exports.mergeTransactions=e.exports.MessageExpiredException=e.exports.AddressLiteral=e.exports.Address=e.exports.Subscriber=void 0;var a=o("jUlBj");const c=s(o("9XiRg")),u=s(o("hp4X6"));i(o("cQ7sV"),e.exports),i(o("9xxDW"),e.exports),i(o("hp4X6"),e.exports),Object.defineProperty(e.exports,"Subscriber",{enumerable:!0,get:function(){return o("9XiRg").Subscriber}});a=o("jUlBj");Object.defineProperty(e.exports,"Address",{enumerable:!0,get:function(){return a.Address}}),Object.defineProperty(e.exports,"AddressLiteral",{enumerable:!0,get:function(){return a.AddressLiteral}}),Object.defineProperty(e.exports,"MessageExpiredException",{enumerable:!0,get:function(){return a.MessageExpiredException}}),Object.defineProperty(e.exports,"mergeTransactions",{enumerable:!0,get:function(){return a.mergeTransactions}}),Object.defineProperty(e.exports,"LT_COLLATOR",{enumerable:!0,get:function(){return a.LT_COLLATOR}});const l="undefined"!=typeof window&&void 0!==window.document;let d;d=l&&"complete"!==document.readyState?new Promise((e=>{window.addEventListener("load",(()=>{e()}))})):Promise.resolve();const _=()=>l?window.__ever||window.ton:void 0;async function p(){return!!l&&(await d,!0===window.__hasEverscaleProvider||!0===window.hasTonProvider)}e.exports.hasEverscaleProvider=p;e.exports.ProviderRpcClient=class{constructor(e={}){this._subscriptions={connected:new Map,disconnected:new Map,transactionsFound:new Map,contractStateChanged:new Map,messageStatusUpdated:new Map,networkChanged:new Map,permissionsChanged:new Map,loggedOut:new Map},this._contractSubscriptions=new Map,this._properties=e;const t=this;class n extends u.Contract{constructor(e,n){super(t,e,n)}}this.Contract=n;class r extends c.Subscriber{constructor(){super(t)}}this.Subscriber=r,this._api=new Proxy({},{get:(e,t)=>e=>{if(null!=this._provider)return this._provider.request({method:t,params:e});throw new f}}),!0===e.forceUseFallback?this._initializationPromise=null!=e.fallback?e.fallback().then((e=>{this._provider=e})):Promise.resolve():(this._provider=_(),null!=this._provider?this._initializationPromise=Promise.resolve():this._initializationPromise=p().then((e=>new Promise((t=>{if(!e)return t();if(this._provider=_(),null!=this._provider)t();else{const e=!0===window.__hasEverscaleProvider?"ever#initialized":"ton#initialized";window.addEventListener(e,(e=>{this._provider=_(),t()}))}})))).then((async()=>{null==this._provider&&null!=e.fallback&&(this._provider=await e.fallback())}))),this._initializationPromise.then((()=>{null!=this._provider&&this._registerEventHandlers(this._provider)}))}async hasProvider(){return null!=this._properties.fallback||p()}async ensureInitialized(){if(await this._initializationPromise,null==this._provider)throw new g}get isInitialized(){return null!=this._provider}get raw(){if(null!=this._provider)return this._provider;throw new f}get rawApi(){return this._api}createContract(e,t){return new this.Contract(e,t)}createSubscriber(){return new this.Subscriber}async requestPermissions(e){await this.ensureInitialized();const t=await this._api.requestPermissions({permissions:e.permissions});return(0,o("9xxDW").parsePermissions)(t)}async changeAccount(){await this.ensureInitialized(),await this._api.changeAccount()}async disconnect(){await this.ensureInitialized(),await this._api.disconnect()}async subscribe(e,t){class n{constructor(e,t){this._subscribe=e,this._unsubscribe=t,this._listeners={data:[],subscribed:[],unsubscribed:[]},this._subscribed=!1,this.subscribe=async()=>{if(!this._subscribed){this._subscribed=!0,await this._subscribe(this);for(const e of this._listeners.subscribed)e()}},this.unsubscribe=async()=>{if(this._subscribed){this._subscribed=!1,await this._unsubscribe();for(const e of this._listeners.unsubscribed)e()}}}on(e,t){return this._listeners[e].push(t),this}notify(e){for(const t of this._listeners.data)t(e)}}const r=this._subscriptions[e],o=(0,a.getUniqueId)();switch(e){case"connected":case"disconnected":case"messageStatusUpdated":case"networkChanged":case"permissionsChanged":case"loggedOut":{const e=new n((async e=>{r.has(o)||r.set(o,(t=>{e.notify(t)}))}),(async()=>{r.delete(o)}));return await e.subscribe(),e}case"transactionsFound":case"contractStateChanged":{if(null==t)throw new Error("Address must be specified for the subscription");await this.ensureInitialized();const s=t.address.toString(),i=new n((async t=>{if(r.has(o))return;r.set(o,(e=>{e.address.toString()===s&&t.notify(e)}));let n=this._contractSubscriptions.get(s);null==n&&(n=new Map,this._contractSubscriptions.set(s,n));const i={state:"contractStateChanged"===e,transactions:"transactionsFound"===e};n.set(o,i);const{total:a,withoutExcluded:c}=b(n.values(),i);try{a.transactions===c.transactions&&a.state===c.state||await this.rawApi.subscribe({address:s,subscriptions:a})}catch(e){throw r.delete(o),n.delete(o),e}}),(async()=>{r.delete(o);const e=this._contractSubscriptions.get(s);if(null==e)return;const t=e.get(o),{total:n,withoutExcluded:i}=b(e.values(),t);e.delete(o),i.transactions||i.state?n.transactions===i.transactions&&n.state===i.state||await this.rawApi.subscribe({address:s,subscriptions:i}):await this.rawApi.unsubscribe({address:s})}));return await i.subscribe(),i}default:throw new Error(`Unknown event ${e}`)}}async getProviderState(){await this.ensureInitialized();const e=await this._api.getProviderState();return{...e,permissions:(0,o("9xxDW").parsePermissions)(e.permissions)}}async getBalance(e){const{state:t}=await this.getFullContractState({address:e});return null==t?"0":null==t?void 0:t.balance}async getFullContractState(e){return await this.ensureInitialized(),await this._api.getFullContractState({address:e.address.toString()})}async getAccountsByCodeHash(e){await this.ensureInitialized();const{accounts:t,continuation:n}=await this._api.getAccountsByCodeHash({...e});return{accounts:t.map((e=>new a.Address(e))),continuation:n}}async getTransactions(e){await this.ensureInitialized();const{transactions:t,continuation:n,info:r}=await this._api.getTransactions({...e,address:e.address.toString()});return{transactions:t.map(o("9xxDW").parseTransaction),continuation:n,info:r}}async getTransaction(e){await this.ensureInitialized();const{transaction:t}=await this._api.getTransaction({...e});return{transaction:t?(0,o("9xxDW").parseTransaction)(t):void 0}}async getExpectedAddress(e,t){const{address:n}=await this.getStateInit(e,t);return n}async getStateInit(e,t){await this.ensureInitialized();const{address:n,stateInit:r}=await this._api.getExpectedAddress({abi:JSON.stringify(e),...t,initParams:(0,o("9xxDW").serializeTokensObject)(t.initParams)});return{address:new a.Address(n),stateInit:r}}async getBocHash(e){return await this.ensureInitialized(),await this._api.getBocHash({boc:e}).then((({hash:e})=>e))}async packIntoCell(e){return await this.ensureInitialized(),await this._api.packIntoCell({abiVersion:e.abiVersion,structure:e.structure,data:(0,o("9xxDW").serializeTokensObject)(e.data)})}async unpackFromCell(e){await this.ensureInitialized();const{data:t}=await this._api.unpackFromCell({...e,structure:e.structure});return{data:(0,o("9xxDW").parseTokensObject)(e.structure,t)}}async extractPublicKey(e){await this.ensureInitialized();const{publicKey:t}=await this._api.extractPublicKey({boc:e});return t}async codeToTvc(e){await this.ensureInitialized();const{tvc:t}=await this._api.codeToTvc({code:e});return t}async mergeTvc(e){return await this.ensureInitialized(),await this._api.mergeTvc(e)}async splitTvc(e){return await this.ensureInitialized(),await this._api.splitTvc({tvc:e})}async setCodeSalt(e){let t;if("string"==typeof e.salt)await this.ensureInitialized(),t=e.salt;else{const{boc:n}=await this.packIntoCell(e.salt);t=n}return await this._api.setCodeSalt({code:e.code,salt:t})}async getCodeSalt(e){await this.ensureInitialized();const{salt:t}=await this.rawApi.getCodeSalt({code:e.code});return t}async addAsset(e){let t;if(await this.ensureInitialized(),"tip3_token"!==e.type)throw new Error("Unknown asset type");return t={rootContract:e.params.rootContract.toString()},await this._api.addAsset({account:e.account.toString(),type:e.type,params:t})}async verifySignature(e){return await this.ensureInitialized(),await this._api.verifySignature(e)}async signData(e){return await this.ensureInitialized(),await this._api.signData(e)}async signDataRaw(e){return await this.ensureInitialized(),await this._api.signDataRaw(e)}async encryptData(e){await this.ensureInitialized();const{encryptedData:t}=await this._api.encryptData(e);return t}async decryptData(e){await this.ensureInitialized();const{data:t}=await this._api.decryptData({encryptedData:e});return t}async sendMessage(e){await this.ensureInitialized();const{transaction:t}=await this._api.sendMessage({sender:e.sender.toString(),recipient:e.recipient.toString(),amount:e.amount,bounce:e.bounce,payload:e.payload?{abi:e.payload.abi,method:e.payload.method,params:(0,o("9xxDW").serializeTokensObject)(e.payload.params)}:void 0});return{transaction:(0,o("9xxDW").parseTransaction)(t)}}async sendMessageDelayed(e){await this.ensureInitialized();const t=new a.DelayedTransactions,n=await this.subscribe("messageStatusUpdated");n.on("data",(n=>{n.address.equals(e.sender)&&t.fillTransaction(n.hash,n.transaction)}));const{message:r}=await this._api.sendMessageDelayed({sender:e.sender.toString(),recipient:e.recipient.toString(),amount:e.amount,bounce:e.bounce,payload:e.payload?{abi:e.payload.abi,method:e.payload.method,params:(0,o("9xxDW").serializeTokensObject)(e.payload.params)}:void 0}).catch((e=>{throw n.unsubscribe().catch(console.error),e})),s=t.waitTransaction(e.sender,r.hash).finally((()=>n.unsubscribe().catch(console.error)));return{messageHash:r.hash,expireAt:r.expireAt,transaction:s}}_registerEventHandlers(e){const t={connected:e=>e,disconnected:e=>e,transactionsFound:e=>({address:new a.Address(e.address),transactions:e.transactions.map(o("9xxDW").parseTransaction),info:e.info}),contractStateChanged:e=>({address:new a.Address(e.address),state:e.state}),messageStatusUpdated:e=>({address:new a.Address(e.address),hash:e.hash,transaction:null!=e.transaction?(0,o("9xxDW").parseTransaction)(e.transaction):void 0}),networkChanged:e=>e,permissionsChanged:e=>({permissions:(0,o("9xxDW").parsePermissions)(e.permissions)}),loggedOut:e=>e};for(const[n,r]of Object.entries(t))e.addListener(n,(e=>{const t=this._subscriptions[n],o=r(e);for(const e of t.values())e(o)}))}};class g extends Error{constructor(){super("Everscale provider was not found")}}e.exports.ProviderNotFoundException=g;class f extends Error{constructor(){super("Everscale provider was not initialized yet")}}function b(e,t){const n={state:!1,transactions:!1},r=Object.assign({},n);for(const o of e){if(r.transactions&&r.state)break;n.state||(n.state=o.state),n.transactions||(n.transactions=o.transactions),o!==t&&(r.state||(r.state=o.state),r.transactions||(r.transactions=o.transactions))}return{total:n,withoutExcluded:r}}e.exports.ProviderNotInitializedException=f})),o.register("lRI68",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.GiverAccount=void 0;var n=o("dLh7e");class r{constructor(e){this.address=e.address instanceof n.Address?e.address:new n.Address(e.address),this.publicKey=e.publicKey}static fromVersion(e){let t;switch(e){case 2:t="0:ece57bcc6c530283becbbd8a3b24d3c5987cdddc3c8b7b33be6e4a6312490415";break;case 3:t="0:78fbd6980c10cf41401b32e9b51810415e7578b52403af80dae68ddf99714498";break;default:throw new Error("Unknown version")}return new r({address:t,publicKey:r.GIVER_KEY_PAIR.publicKey})}async fetchPublicKey(e){return this.publicKey}async prepareMessage(e,t){null!=e.payload&&console.warn("Giver contract does not support payload");const n=await t.getSigner(this.publicKey);return await t.createExternalMessage({address:this.address,signer:n,timeout:e.timeout,abi:s,method:"sendTransaction",params:{dest:e.recipient,value:e.amount,bounce:e.bounce}})}}e.exports.GiverAccount=r,r.GIVER_KEY_PAIR={secretKey:"172af540e43a524763dd53b26a066d472a97c4de37d5498170564510608250c3",publicKey:"2ada2e65ab8eeab09490e3521415f45b6e42df9c760a639bcf53957550b25a16"};const s='{\n  "ABI version": 2,\n  "header": ["time", "expire"],\n  "functions": [{\n    "name": "sendTransaction",\n    "inputs": [\n      {"name":"dest","type":"address"},\n      {"name":"value","type":"uint128"},\n      {"name":"bounce","type":"bool"}\n    ],\n    "outputs": []\n  }],\n  "events": []\n}'})),o.register("9xcg8",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.MsigAccount=e.exports.GenericAccount=void 0;var n=o("dLh7e");class r{constructor(e){this.address=e.address instanceof n.Address?e.address:new n.Address(e.address),this.abi="string"==typeof e.abi?e.abi:JSON.stringify(e.abi),this.prepareMessageImpl=e.prepareMessage,this.publicKey=e.publicKey}async fetchPublicKey(e){return null!=this.publicKey||(this.publicKey=await e.fetchPublicKey(this.address)),this.publicKey}async prepareMessage(e,t){const n=await this.fetchPublicKey(t),r=await t.getSigner(n),{method:o,params:s,stateInit:i}=await this.prepareMessageImpl(e,t);return t.createExternalMessage({address:this.address,signer:r,timeout:e.timeout,abi:this.abi,method:o,params:s,stateInit:i})}}e.exports.GenericAccount=r;e.exports.MsigAccount=class extends r{constructor(e){super({address:e.address,publicKey:e.publicKey,abi:"multisig2"==e.type?i:s,prepareMessage:async(e,t)=>{const n=e.payload?t.encodeInternalInput(e.payload):"";return{method:"sendTransaction",params:{dest:e.recipient,value:e.amount,bounce:e.bounce,flags:3,payload:n}}}})}};const s='{\n  "ABI version": 2,\n  "header": ["pubkey", "time", "expire"],\n  "functions": [{\n    "name": "sendTransaction",\n    "inputs": [\n      {"name":"dest","type":"address"},\n      {"name":"value","type":"uint128"},\n      {"name":"bounce","type":"bool"},\n      {"name":"flags","type":"uint8"},\n      {"name":"payload","type":"cell"}\n    ],\n    "outputs": []\n  }],\n  "events": []\n}',i='{\n  "ABI version": 2,\n  "version": "2.3",\n  "header": ["pubkey", "time", "expire"],\n  "functions": [{\n    "name": "sendTransaction",\n    "inputs": [\n      {"name":"dest","type":"address"},\n      {"name":"value","type":"uint128"},\n      {"name":"bounce","type":"bool"},\n      {"name":"flags","type":"uint8"},\n      {"name":"payload","type":"cell"}\n    ],\n    "outputs": []\n  }],\n  "events": []\n}'})),o.register("61axy",(function(e,t){var n=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.WalletV3Account=void 0;var r=o("dLh7e");const s=n(o("5Kq8F")),i=n(o("ejgJV")),{ensureNekotonLoaded:a,nekoton:c}=i.default;class u{constructor(e){this.address=e}static async computeAddress(e){await a();const t=e.publicKey instanceof s.default?e.publicKey:new s.default(`0x${e.publicKey}`),n=d(t),o=c.getBocHash(n);return new r.Address(`${null!=e.workchain?e.workchain:0}:${o}`)}static async fromPubkey(e){const t=new s.default(`0x${e.publicKey}`),n=await u.computeAddress({publicKey:t,workchain:e.workchain}),r=new u(n);return r.publicKey=t,r}async fetchPublicKey(e){let t=this.publicKey;return null==t&&(t=this.publicKey=await e.fetchPublicKey(this.address).then((e=>new s.default(`0x${e}`)))),t.toString(16).padStart(64,"0")}async prepareMessage(e,t){const{seqno:n,publicKey:r,stateInit:o}=await this.fetchState(t),s=await t.getSigner(r),i=t.nowSec+e.timeout,a=e.payload?t.encodeInternalInput(e.payload):void 0,c=t.encodeInternalMessage({dst:e.recipient,bounce:e.bounce,stateInit:e.stateInit,body:a,amount:e.amount}),u={walletId:b,expireAt:i,seqno:n,flags:3,message:c},l=t.packIntoCell({structure:_,data:u}),d=t.getBocHash(l),g=await s.sign(d),{signatureParts:f}=t.extendSignature(g);u.signatureHigh=f.high,u.signatureLow=f.low;const h=t.packIntoCell({structure:p,data:u});return t.createRawExternalMessage({address:this.address,body:h,stateInit:o,expireAt:i})}async fetchState(e){let t,n;const r=await e.getFullContractState(this.address);if(null!=r&&r.isDeployed){const t=e.extractContractData(r.boc);if(null==t)throw new Error("Failed to extract contract data");n=l(e,t)}else{if(null==this.publicKey)throw new Error("Contract not deployed and public key was not specified");t=d(this.publicKey),n={seqno:0,publicKey:this.publicKey}}if(null==this.publicKey)this.publicKey=n.publicKey;else if(!this.publicKey.eq(n.publicKey))throw new Error("Public key mismatch");return{seqno:n.seqno,publicKey:n.publicKey.toString(16).padStart(64,"0"),stateInit:t}}}e.exports.WalletV3Account=u;const l=(e,t)=>{const n=e.unpackFromCell({structure:g,boc:t,allowPartial:!1});if("object"!=typeof n||"string"!=typeof n.seqno||"string"!=typeof n.publicKey)throw new Error("Invalid contract data ");return{seqno:parseInt(n.seqno),publicKey:new s.default(n.publicKey)}},d=e=>{const t=c.packIntoCell(g,{seqno:0,walletId:b,publicKey:e.toFixed(0)});return c.mergeTvc(f,t)},_=[{name:"walletId",type:"uint32"},{name:"expireAt",type:"uint32"},{name:"seqno",type:"uint32"},{name:"flags",type:"uint8"},{name:"message",type:"cell"}],p=[{name:"signatureHigh",type:"uint256"},{name:"signatureLow",type:"uint256"},..._],g=[{name:"seqno",type:"uint32"},{name:"walletId",type:"uint32"},{name:"publicKey",type:"uint256"}],f="te6ccgEBAQEAcQAA3v8AIN0gggFMl7ohggEznLqxn3Gw7UTQ0x/THzHXC//jBOCk8mCDCNcYINMf0x/TH/gjE7vyY+1E0NMf0x/T/9FRMrryoVFEuvKiBPkBVBBV+RDyo/gAkyDXSpbTB9QC+wDo0QGkyMsfyx/L/8ntVA==",b=1269378442})),o.register("5Kq8F",(function(e,t){!function(t){var n,r=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,o=Math.ceil,s=Math.floor,i="[BigNumber Error] ",a=i+"Number primitive has more than 15 significant digits: ",c=1e14,u=14,l=9007199254740991,d=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],_=1e7,p=1e9;function g(e){var t=0|e;return e>0||e===t?t:t-1}function f(e){for(var t,n,r=1,o=e.length,s=e[0]+"";r<o;){for(t=e[r++]+"",n=u-t.length;n--;t="0"+t);s+=t}for(o=s.length;48===s.charCodeAt(--o););return s.slice(0,o+1||1)}function b(e,t){var n,r,o=e.c,s=t.c,i=e.s,a=t.s,c=e.e,u=t.e;if(!i||!a)return null;if(n=o&&!o[0],r=s&&!s[0],n||r)return n?r?0:-a:i;if(i!=a)return i;if(n=i<0,r=c==u,!o||!s)return r?0:!o^n?1:-1;if(!r)return c>u^n?1:-1;for(a=(c=o.length)<(u=s.length)?c:u,i=0;i<a;i++)if(o[i]!=s[i])return o[i]>s[i]^n?1:-1;return c==u?0:c>u^n?1:-1}function h(e,t,n,r){if(e<t||e>n||e!==s(e))throw Error(i+(r||"Argument")+("number"==typeof e?e<t||e>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function w(e){var t=e.c.length-1;return g(e.e/u)==t&&e.c[t]%2!=0}function y(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function m(e,t,n){var r,o;if(t<0){for(o=n+".";++t;o+=n);e=o+e}else if(++t>(r=e.length)){for(o=n,t-=r;--t;o+=n);e+=o}else t<r&&(e=e.slice(0,t)+"."+e.slice(t));return e}n=function e(t){var n,v,x,A,S,C,O,E,k,I,M=z.prototype={constructor:z,toString:null,valueOf:null},T=new z(1),j=20,q=4,P=-7,R=21,B=-1e7,N=1e7,F=!1,D=1,L=0,H={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},W="0123456789abcdefghijklmnopqrstuvwxyz",K=!0;function z(e,t){var n,o,i,c,d,_,p,g,f=this;if(!(f instanceof z))return new z(e,t);if(null==t){if(e&&!0===e._isBigNumber)return f.s=e.s,void(!e.c||e.e>N?f.c=f.e=null:e.e<B?f.c=[f.e=0]:(f.e=e.e,f.c=e.c.slice()));if((_="number"==typeof e)&&0*e==0){if(f.s=1/e<0?(e=-e,-1):1,e===~~e){for(c=0,d=e;d>=10;d/=10,c++);return void(c>N?f.c=f.e=null:(f.e=c,f.c=[e]))}g=String(e)}else{if(!r.test(g=String(e)))return x(f,g,_);f.s=45==g.charCodeAt(0)?(g=g.slice(1),-1):1}(c=g.indexOf("."))>-1&&(g=g.replace(".","")),(d=g.search(/e/i))>0?(c<0&&(c=d),c+=+g.slice(d+1),g=g.substring(0,d)):c<0&&(c=g.length)}else{if(h(t,2,W.length,"Base"),10==t&&K)return J(f=new z(e),j+f.e+1,q);if(g=String(e),_="number"==typeof e){if(0*e!=0)return x(f,g,_,t);if(f.s=1/e<0?(g=g.slice(1),-1):1,z.DEBUG&&g.replace(/^0\.0*|\./,"").length>15)throw Error(a+e)}else f.s=45===g.charCodeAt(0)?(g=g.slice(1),-1):1;for(n=W.slice(0,t),c=d=0,p=g.length;d<p;d++)if(n.indexOf(o=g.charAt(d))<0){if("."==o){if(d>c){c=p;continue}}else if(!i&&(g==g.toUpperCase()&&(g=g.toLowerCase())||g==g.toLowerCase()&&(g=g.toUpperCase()))){i=!0,d=-1,c=0;continue}return x(f,String(e),_,t)}_=!1,(c=(g=v(g,t,10,f.s)).indexOf("."))>-1?g=g.replace(".",""):c=g.length}for(d=0;48===g.charCodeAt(d);d++);for(p=g.length;48===g.charCodeAt(--p););if(g=g.slice(d,++p)){if(p-=d,_&&z.DEBUG&&p>15&&(e>l||e!==s(e)))throw Error(a+f.s*e);if((c=c-d-1)>N)f.c=f.e=null;else if(c<B)f.c=[f.e=0];else{if(f.e=c,f.c=[],d=(c+1)%u,c<0&&(d+=u),d<p){for(d&&f.c.push(+g.slice(0,d)),p-=u;d<p;)f.c.push(+g.slice(d,d+=u));d=u-(g=g.slice(d)).length}else d-=p;for(;d--;g+="0");f.c.push(+g)}}else f.c=[f.e=0]}function U(e,t,n,r){var o,s,i,a,c;if(null==n?n=q:h(n,0,8),!e.c)return e.toString();if(o=e.c[0],i=e.e,null==t)c=f(e.c),c=1==r||2==r&&(i<=P||i>=R)?y(c,i):m(c,i,"0");else if(s=(e=J(new z(e),t,n)).e,a=(c=f(e.c)).length,1==r||2==r&&(t<=s||s<=P)){for(;a<t;c+="0",a++);c=y(c,s)}else if(t-=i,c=m(c,s,"0"),s+1>a){if(--t>0)for(c+=".";t--;c+="0");}else if((t+=s-a)>0)for(s+1==a&&(c+=".");t--;c+="0");return e.s<0&&o?"-"+c:c}function G(e,t){for(var n,r=1,o=new z(e[0]);r<e.length;r++){if(!(n=new z(e[r])).s){o=n;break}t.call(o,n)&&(o=n)}return o}function $(e,t,n){for(var r=1,o=t.length;!t[--o];t.pop());for(o=t[0];o>=10;o/=10,r++);return(n=r+n*u-1)>N?e.c=e.e=null:n<B?e.c=[e.e=0]:(e.e=n,e.c=t),e}function J(e,t,n,r){var i,a,l,_,p,g,f,b=e.c,h=d;if(b){e:{for(i=1,_=b[0];_>=10;_/=10,i++);if((a=t-i)<0)a+=u,l=t,f=(p=b[g=0])/h[i-l-1]%10|0;else if((g=o((a+1)/u))>=b.length){if(!r)break e;for(;b.length<=g;b.push(0));p=f=0,i=1,l=(a%=u)-u+1}else{for(p=_=b[g],i=1;_>=10;_/=10,i++);f=(l=(a%=u)-u+i)<0?0:p/h[i-l-1]%10|0}if(r=r||t<0||null!=b[g+1]||(l<0?p:p%h[i-l-1]),r=n<4?(f||r)&&(0==n||n==(e.s<0?3:2)):f>5||5==f&&(4==n||r||6==n&&(a>0?l>0?p/h[i-l]:0:b[g-1])%10&1||n==(e.s<0?8:7)),t<1||!b[0])return b.length=0,r?(t-=e.e+1,b[0]=h[(u-t%u)%u],e.e=-t||0):b[0]=e.e=0,e;if(0==a?(b.length=g,_=1,g--):(b.length=g+1,_=h[u-a],b[g]=l>0?s(p/h[i-l]%h[l])*_:0),r)for(;;){if(0==g){for(a=1,l=b[0];l>=10;l/=10,a++);for(l=b[0]+=_,_=1;l>=10;l/=10,_++);a!=_&&(e.e++,b[0]==c&&(b[0]=1));break}if(b[g]+=_,b[g]!=c)break;b[g--]=0,_=1}for(a=b.length;0===b[--a];b.pop());}e.e>N?e.c=e.e=null:e.e<B&&(e.c=[e.e=0])}return e}function V(e){var t,n=e.e;return null===n?e.toString():(t=f(e.c),t=n<=P||n>=R?y(t,n):m(t,n,"0"),e.s<0?"-"+t:t)}return z.clone=e,z.ROUND_UP=0,z.ROUND_DOWN=1,z.ROUND_CEIL=2,z.ROUND_FLOOR=3,z.ROUND_HALF_UP=4,z.ROUND_HALF_DOWN=5,z.ROUND_HALF_EVEN=6,z.ROUND_HALF_CEIL=7,z.ROUND_HALF_FLOOR=8,z.EUCLID=9,z.config=z.set=function(e){var t,n;if(null!=e){if("object"!=typeof e)throw Error(i+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(h(n=e[t],0,p,t),j=n),e.hasOwnProperty(t="ROUNDING_MODE")&&(h(n=e[t],0,8,t),q=n),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((n=e[t])&&n.pop?(h(n[0],-p,0,t),h(n[1],0,p,t),P=n[0],R=n[1]):(h(n,-p,p,t),P=-(R=n<0?-n:n))),e.hasOwnProperty(t="RANGE"))if((n=e[t])&&n.pop)h(n[0],-p,-1,t),h(n[1],1,p,t),B=n[0],N=n[1];else{if(h(n,-p,p,t),!n)throw Error(i+t+" cannot be zero: "+n);B=-(N=n<0?-n:n)}if(e.hasOwnProperty(t="CRYPTO")){if((n=e[t])!==!!n)throw Error(i+t+" not true or false: "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw F=!n,Error(i+"crypto unavailable");F=n}else F=n}if(e.hasOwnProperty(t="MODULO_MODE")&&(h(n=e[t],0,9,t),D=n),e.hasOwnProperty(t="POW_PRECISION")&&(h(n=e[t],0,p,t),L=n),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(n=e[t]))throw Error(i+t+" not an object: "+n);H=n}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(n=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(n))throw Error(i+t+" invalid: "+n);K="0123456789"==n.slice(0,10),W=n}}return{DECIMAL_PLACES:j,ROUNDING_MODE:q,EXPONENTIAL_AT:[P,R],RANGE:[B,N],CRYPTO:F,MODULO_MODE:D,POW_PRECISION:L,FORMAT:H,ALPHABET:W}},z.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!z.DEBUG)return!0;var t,n,r=e.c,o=e.e,a=e.s;e:if("[object Array]"=={}.toString.call(r)){if((1===a||-1===a)&&o>=-p&&o<=p&&o===s(o)){if(0===r[0]){if(0===o&&1===r.length)return!0;break e}if((t=(o+1)%u)<1&&(t+=u),String(r[0]).length==t){for(t=0;t<r.length;t++)if((n=r[t])<0||n>=c||n!==s(n))break e;if(0!==n)return!0}}}else if(null===r&&null===o&&(null===a||1===a||-1===a))return!0;throw Error(i+"Invalid BigNumber: "+e)},z.maximum=z.max=function(){return G(arguments,M.lt)},z.minimum=z.min=function(){return G(arguments,M.gt)},z.random=(A=9007199254740992,S=Math.random()*A&2097151?function(){return s(Math.random()*A)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,n,r,a,c,l=0,_=[],g=new z(T);if(null==e?e=j:h(e,0,p),a=o(e/u),F)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(a*=2));l<a;)(c=131072*t[l]+(t[l+1]>>>11))>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),t[l]=n[0],t[l+1]=n[1]):(_.push(c%1e14),l+=2);l=a/2}else{if(!crypto.randomBytes)throw F=!1,Error(i+"crypto unavailable");for(t=crypto.randomBytes(a*=7);l<a;)(c=281474976710656*(31&t[l])+1099511627776*t[l+1]+4294967296*t[l+2]+16777216*t[l+3]+(t[l+4]<<16)+(t[l+5]<<8)+t[l+6])>=9e15?crypto.randomBytes(7).copy(t,l):(_.push(c%1e14),l+=7);l=a/7}if(!F)for(;l<a;)(c=S())<9e15&&(_[l++]=c%1e14);for(a=_[--l],e%=u,a&&e&&(c=d[u-e],_[l]=s(a/c)*c);0===_[l];_.pop(),l--);if(l<0)_=[r=0];else{for(r=-1;0===_[0];_.splice(0,1),r-=u);for(l=1,c=_[0];c>=10;c/=10,l++);l<u&&(r-=u-l)}return g.e=r,g.c=_,g}),z.sum=function(){for(var e=1,t=arguments,n=new z(t[0]);e<t.length;)n=n.plus(t[e++]);return n},v=function(){var e="0123456789";function t(e,t,n,r){for(var o,s,i=[0],a=0,c=e.length;a<c;){for(s=i.length;s--;i[s]*=t);for(i[0]+=r.indexOf(e.charAt(a++)),o=0;o<i.length;o++)i[o]>n-1&&(null==i[o+1]&&(i[o+1]=0),i[o+1]+=i[o]/n|0,i[o]%=n)}return i.reverse()}return function(r,o,s,i,a){var c,u,l,d,_,p,g,b,h=r.indexOf("."),w=j,y=q;for(h>=0&&(d=L,L=0,r=r.replace(".",""),p=(b=new z(o)).pow(r.length-h),L=d,b.c=t(m(f(p.c),p.e,"0"),10,s,e),b.e=b.c.length),l=d=(g=t(r,o,s,a?(c=W,e):(c=e,W))).length;0==g[--d];g.pop());if(!g[0])return c.charAt(0);if(h<0?--l:(p.c=g,p.e=l,p.s=i,g=(p=n(p,b,w,y,s)).c,_=p.r,l=p.e),h=g[u=l+w+1],d=s/2,_=_||u<0||null!=g[u+1],_=y<4?(null!=h||_)&&(0==y||y==(p.s<0?3:2)):h>d||h==d&&(4==y||_||6==y&&1&g[u-1]||y==(p.s<0?8:7)),u<1||!g[0])r=_?m(c.charAt(1),-w,c.charAt(0)):c.charAt(0);else{if(g.length=u,_)for(--s;++g[--u]>s;)g[u]=0,u||(++l,g=[1].concat(g));for(d=g.length;!g[--d];);for(h=0,r="";h<=d;r+=c.charAt(g[h++]));r=m(r,l,c.charAt(0))}return r}}(),n=function(){function e(e,t,n){var r,o,s,i,a=0,c=e.length,u=t%_,l=t/_|0;for(e=e.slice();c--;)a=((o=u*(s=e[c]%_)+(r=l*s+(i=e[c]/_|0)*u)%_*_+a)/n|0)+(r/_|0)+l*i,e[c]=o%n;return a&&(e=[a].concat(e)),e}function t(e,t,n,r){var o,s;if(n!=r)s=n>r?1:-1;else for(o=s=0;o<n;o++)if(e[o]!=t[o]){s=e[o]>t[o]?1:-1;break}return s}function n(e,t,n,r){for(var o=0;n--;)e[n]-=o,o=e[n]<t[n]?1:0,e[n]=o*r+e[n]-t[n];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(r,o,i,a,l){var d,_,p,f,b,h,w,y,m,v,x,A,S,C,O,E,k,I=r.s==o.s?1:-1,M=r.c,T=o.c;if(!(M&&M[0]&&T&&T[0]))return new z(r.s&&o.s&&(M?!T||M[0]!=T[0]:T)?M&&0==M[0]||!T?0*I:I/0:NaN);for(m=(y=new z(I)).c=[],I=i+(_=r.e-o.e)+1,l||(l=c,_=g(r.e/u)-g(o.e/u),I=I/u|0),p=0;T[p]==(M[p]||0);p++);if(T[p]>(M[p]||0)&&_--,I<0)m.push(1),f=!0;else{for(C=M.length,E=T.length,p=0,I+=2,(b=s(l/(T[0]+1)))>1&&(T=e(T,b,l),M=e(M,b,l),E=T.length,C=M.length),S=E,x=(v=M.slice(0,E)).length;x<E;v[x++]=0);k=T.slice(),k=[0].concat(k),O=T[0],T[1]>=l/2&&O++;do{if(b=0,(d=t(T,v,E,x))<0){if(A=v[0],E!=x&&(A=A*l+(v[1]||0)),(b=s(A/O))>1)for(b>=l&&(b=l-1),w=(h=e(T,b,l)).length,x=v.length;1==t(h,v,w,x);)b--,n(h,E<w?k:T,w,l),w=h.length,d=1;else 0==b&&(d=b=1),w=(h=T.slice()).length;if(w<x&&(h=[0].concat(h)),n(v,h,x,l),x=v.length,-1==d)for(;t(T,v,E,x)<1;)b++,n(v,E<x?k:T,x,l),x=v.length}else 0===d&&(b++,v=[0]);m[p++]=b,v[0]?v[x++]=M[S]||0:(v=[M[S]],x=1)}while((S++<C||null!=v[0])&&I--);f=null!=v[0],m[0]||m.splice(0,1)}if(l==c){for(p=1,I=m[0];I>=10;I/=10,p++);J(y,i+(y.e=p+_*u-1)+1,a,f)}else y.e=_,y.r=+f;return y}}(),C=/^(-?)0([xbo])(?=\w[\w.]*$)/i,O=/^([^.]+)\.$/,E=/^\.([^.]+)$/,k=/^-?(Infinity|NaN)$/,I=/^\s*\+(?=[\w.])|^\s+|\s+$/g,x=function(e,t,n,r){var o,s=n?t:t.replace(I,"");if(k.test(s))e.s=isNaN(s)?null:s<0?-1:1;else{if(!n&&(s=s.replace(C,(function(e,t,n){return o="x"==(n=n.toLowerCase())?16:"b"==n?2:8,r&&r!=o?e:t})),r&&(o=r,s=s.replace(O,"$1").replace(E,"0.$1")),t!=s))return new z(s,o);if(z.DEBUG)throw Error(i+"Not a"+(r?" base "+r:"")+" number: "+t);e.s=null}e.c=e.e=null},M.absoluteValue=M.abs=function(){var e=new z(this);return e.s<0&&(e.s=1),e},M.comparedTo=function(e,t){return b(this,new z(e,t))},M.decimalPlaces=M.dp=function(e,t){var n,r,o,s=this;if(null!=e)return h(e,0,p),null==t?t=q:h(t,0,8),J(new z(s),e+s.e+1,t);if(!(n=s.c))return null;if(r=((o=n.length-1)-g(this.e/u))*u,o=n[o])for(;o%10==0;o/=10,r--);return r<0&&(r=0),r},M.dividedBy=M.div=function(e,t){return n(this,new z(e,t),j,q)},M.dividedToIntegerBy=M.idiv=function(e,t){return n(this,new z(e,t),0,1)},M.exponentiatedBy=M.pow=function(e,t){var n,r,a,c,l,d,_,p,g=this;if((e=new z(e)).c&&!e.isInteger())throw Error(i+"Exponent not an integer: "+V(e));if(null!=t&&(t=new z(t)),l=e.e>14,!g.c||!g.c[0]||1==g.c[0]&&!g.e&&1==g.c.length||!e.c||!e.c[0])return p=new z(Math.pow(+V(g),l?2-w(e):+V(e))),t?p.mod(t):p;if(d=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new z(NaN);(r=!d&&g.isInteger()&&t.isInteger())&&(g=g.mod(t))}else{if(e.e>9&&(g.e>0||g.e<-1||(0==g.e?g.c[0]>1||l&&g.c[1]>=24e7:g.c[0]<8e13||l&&g.c[0]<=9999975e7)))return c=g.s<0&&w(e)?-0:0,g.e>-1&&(c=1/c),new z(d?1/c:c);L&&(c=o(L/u+2))}for(l?(n=new z(.5),d&&(e.s=1),_=w(e)):_=(a=Math.abs(+V(e)))%2,p=new z(T);;){if(_){if(!(p=p.times(g)).c)break;c?p.c.length>c&&(p.c.length=c):r&&(p=p.mod(t))}if(a){if(0===(a=s(a/2)))break;_=a%2}else if(J(e=e.times(n),e.e+1,1),e.e>14)_=w(e);else{if(0===(a=+V(e)))break;_=a%2}g=g.times(g),c?g.c&&g.c.length>c&&(g.c.length=c):r&&(g=g.mod(t))}return r?p:(d&&(p=T.div(p)),t?p.mod(t):c?J(p,L,q,undefined):p)},M.integerValue=function(e){var t=new z(this);return null==e?e=q:h(e,0,8),J(t,t.e+1,e)},M.isEqualTo=M.eq=function(e,t){return 0===b(this,new z(e,t))},M.isFinite=function(){return!!this.c},M.isGreaterThan=M.gt=function(e,t){return b(this,new z(e,t))>0},M.isGreaterThanOrEqualTo=M.gte=function(e,t){return 1===(t=b(this,new z(e,t)))||0===t},M.isInteger=function(){return!!this.c&&g(this.e/u)>this.c.length-2},M.isLessThan=M.lt=function(e,t){return b(this,new z(e,t))<0},M.isLessThanOrEqualTo=M.lte=function(e,t){return-1===(t=b(this,new z(e,t)))||0===t},M.isNaN=function(){return!this.s},M.isNegative=function(){return this.s<0},M.isPositive=function(){return this.s>0},M.isZero=function(){return!!this.c&&0==this.c[0]},M.minus=function(e,t){var n,r,o,s,i=this,a=i.s;if(t=(e=new z(e,t)).s,!a||!t)return new z(NaN);if(a!=t)return e.s=-t,i.plus(e);var l=i.e/u,d=e.e/u,_=i.c,p=e.c;if(!l||!d){if(!_||!p)return _?(e.s=-t,e):new z(p?i:NaN);if(!_[0]||!p[0])return p[0]?(e.s=-t,e):new z(_[0]?i:3==q?-0:0)}if(l=g(l),d=g(d),_=_.slice(),a=l-d){for((s=a<0)?(a=-a,o=_):(d=l,o=p),o.reverse(),t=a;t--;o.push(0));o.reverse()}else for(r=(s=(a=_.length)<(t=p.length))?a:t,a=t=0;t<r;t++)if(_[t]!=p[t]){s=_[t]<p[t];break}if(s&&(o=_,_=p,p=o,e.s=-e.s),(t=(r=p.length)-(n=_.length))>0)for(;t--;_[n++]=0);for(t=c-1;r>a;){if(_[--r]<p[r]){for(n=r;n&&!_[--n];_[n]=t);--_[n],_[r]+=c}_[r]-=p[r]}for(;0==_[0];_.splice(0,1),--d);return _[0]?$(e,_,d):(e.s=3==q?-1:1,e.c=[e.e=0],e)},M.modulo=M.mod=function(e,t){var r,o,s=this;return e=new z(e,t),!s.c||!e.s||e.c&&!e.c[0]?new z(NaN):!e.c||s.c&&!s.c[0]?new z(s):(9==D?(o=e.s,e.s=1,r=n(s,e,0,3),e.s=o,r.s*=o):r=n(s,e,0,D),(e=s.minus(r.times(e))).c[0]||1!=D||(e.s=s.s),e)},M.multipliedBy=M.times=function(e,t){var n,r,o,s,i,a,l,d,p,f,b,h,w,y,m,v=this,x=v.c,A=(e=new z(e,t)).c;if(!(x&&A&&x[0]&&A[0]))return!v.s||!e.s||x&&!x[0]&&!A||A&&!A[0]&&!x?e.c=e.e=e.s=null:(e.s*=v.s,x&&A?(e.c=[0],e.e=0):e.c=e.e=null),e;for(r=g(v.e/u)+g(e.e/u),e.s*=v.s,(l=x.length)<(f=A.length)&&(w=x,x=A,A=w,o=l,l=f,f=o),o=l+f,w=[];o--;w.push(0));for(y=c,m=_,o=f;--o>=0;){for(n=0,b=A[o]%m,h=A[o]/m|0,s=o+(i=l);s>o;)n=((d=b*(d=x[--i]%m)+(a=h*d+(p=x[i]/m|0)*b)%m*m+w[s]+n)/y|0)+(a/m|0)+h*p,w[s--]=d%y;w[s]=n}return n?++r:w.splice(0,1),$(e,w,r)},M.negated=function(){var e=new z(this);return e.s=-e.s||null,e},M.plus=function(e,t){var n,r=this,o=r.s;if(t=(e=new z(e,t)).s,!o||!t)return new z(NaN);if(o!=t)return e.s=-t,r.minus(e);var s=r.e/u,i=e.e/u,a=r.c,l=e.c;if(!s||!i){if(!a||!l)return new z(o/0);if(!a[0]||!l[0])return l[0]?e:new z(a[0]?r:0*o)}if(s=g(s),i=g(i),a=a.slice(),o=s-i){for(o>0?(i=s,n=l):(o=-o,n=a),n.reverse();o--;n.push(0));n.reverse()}for((o=a.length)-(t=l.length)<0&&(n=l,l=a,a=n,t=o),o=0;t;)o=(a[--t]=a[t]+l[t]+o)/c|0,a[t]=c===a[t]?0:a[t]%c;return o&&(a=[o].concat(a),++i),$(e,a,i)},M.precision=M.sd=function(e,t){var n,r,o,s=this;if(null!=e&&e!==!!e)return h(e,1,p),null==t?t=q:h(t,0,8),J(new z(s),e,t);if(!(n=s.c))return null;if(r=(o=n.length-1)*u+1,o=n[o]){for(;o%10==0;o/=10,r--);for(o=n[0];o>=10;o/=10,r++);}return e&&s.e+1>r&&(r=s.e+1),r},M.shiftedBy=function(e){return h(e,-9007199254740991,l),this.times("1e"+e)},M.squareRoot=M.sqrt=function(){var e,t,r,o,s,i=this,a=i.c,c=i.s,u=i.e,l=j+4,d=new z("0.5");if(1!==c||!a||!a[0])return new z(!c||c<0&&(!a||a[0])?NaN:a?i:1/0);if(0==(c=Math.sqrt(+V(i)))||c==1/0?(((t=f(a)).length+u)%2==0&&(t+="0"),c=Math.sqrt(+t),u=g((u+1)/2)-(u<0||u%2),r=new z(t=c==1/0?"5e"+u:(t=c.toExponential()).slice(0,t.indexOf("e")+1)+u)):r=new z(c+""),r.c[0])for((c=(u=r.e)+l)<3&&(c=0);;)if(s=r,r=d.times(s.plus(n(i,s,l,1))),f(s.c).slice(0,c)===(t=f(r.c)).slice(0,c)){if(r.e<u&&--c,"9999"!=(t=t.slice(c-3,c+1))&&(o||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(J(r,r.e+j+2,1),e=!r.times(r).eq(i));break}if(!o&&(J(s,s.e+j+2,0),s.times(s).eq(i))){r=s;break}l+=4,c+=4,o=1}return J(r,r.e+j+1,q,e)},M.toExponential=function(e,t){return null!=e&&(h(e,0,p),e++),U(this,e,t,1)},M.toFixed=function(e,t){return null!=e&&(h(e,0,p),e=e+this.e+1),U(this,e,t)},M.toFormat=function(e,t,n){var r,o=this;if(null==n)null!=e&&t&&"object"==typeof t?(n=t,t=null):e&&"object"==typeof e?(n=e,e=t=null):n=H;else if("object"!=typeof n)throw Error(i+"Argument not an object: "+n);if(r=o.toFixed(e,t),o.c){var s,a=r.split("."),c=+n.groupSize,u=+n.secondaryGroupSize,l=n.groupSeparator||"",d=a[0],_=a[1],p=o.s<0,g=p?d.slice(1):d,f=g.length;if(u&&(s=c,c=u,u=s,f-=s),c>0&&f>0){for(s=f%c||c,d=g.substr(0,s);s<f;s+=c)d+=l+g.substr(s,c);u>0&&(d+=l+g.slice(s)),p&&(d="-"+d)}r=_?d+(n.decimalSeparator||"")+((u=+n.fractionGroupSize)?_.replace(new RegExp("\\d{"+u+"}\\B","g"),"$&"+(n.fractionGroupSeparator||"")):_):d}return(n.prefix||"")+r+(n.suffix||"")},M.toFraction=function(e){var t,r,o,s,a,c,l,_,p,g,b,h,w=this,y=w.c;if(null!=e&&(!(l=new z(e)).isInteger()&&(l.c||1!==l.s)||l.lt(T)))throw Error(i+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+V(l));if(!y)return new z(w);for(t=new z(T),p=r=new z(T),o=_=new z(T),h=f(y),a=t.e=h.length-w.e-1,t.c[0]=d[(c=a%u)<0?u+c:c],e=!e||l.comparedTo(t)>0?a>0?t:p:l,c=N,N=1/0,l=new z(h),_.c[0]=0;g=n(l,t,0,1),1!=(s=r.plus(g.times(o))).comparedTo(e);)r=o,o=s,p=_.plus(g.times(s=p)),_=s,t=l.minus(g.times(s=t)),l=s;return s=n(e.minus(r),o,0,1),_=_.plus(s.times(p)),r=r.plus(s.times(o)),_.s=p.s=w.s,b=n(p,o,a*=2,q).minus(w).abs().comparedTo(n(_,r,a,q).minus(w).abs())<1?[p,o]:[_,r],N=c,b},M.toNumber=function(){return+V(this)},M.toPrecision=function(e,t){return null!=e&&h(e,1,p),U(this,e,t,2)},M.toString=function(e){var t,n=this,r=n.s,o=n.e;return null===o?r?(t="Infinity",r<0&&(t="-"+t)):t="NaN":(null==e?t=o<=P||o>=R?y(f(n.c),o):m(f(n.c),o,"0"):10===e&&K?t=m(f((n=J(new z(n),j+o+1,q)).c),n.e,"0"):(h(e,2,W.length,"Base"),t=v(m(f(n.c),o,"0"),10,e,r,!0)),r<0&&n.c[0]&&(t="-"+t)),t},M.valueOf=M.toJSON=function(){return V(this)},M._isBigNumber=!0,null!=t&&z.set(t),z}(),n.default=n.BigNumber=n,"function"==typeof define&&define.amd?define((function(){return n})):e.exports?e.exports=n:(t||(t="undefined"!=typeof self&&self?self:window),t.BigNumber=n)}(e.exports)})),o.register("1J5qq",(function(e,t){var n=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.HighloadWalletV2=void 0;var r=o("dLh7e");const s=n(o("5Kq8F")),i=n(o("ejgJV")),{ensureNekotonLoaded:a,nekoton:c}=i.default;class u{constructor(e){this.address=e instanceof r.Address?e:new r.Address(e)}static async computeAddress(e){await a();const t=e.publicKey instanceof s.default?e.publicKey:new s.default(`0x${e.publicKey}`),n=d(t),o=c.getBocHash(n);return new r.Address(`${null!=e.workchain?e.workchain:0}:${o}`)}static async fromPubkey(e){const t=new s.default(`0x${e.publicKey}`),n=await u.computeAddress({publicKey:t,workchain:e.workchain}),r=new u(n);return r.publicKey=t,r}async fetchPublicKey(e){let t=this.publicKey;return null==t&&(t=this.publicKey=await e.fetchPublicKey(this.address).then((e=>new s.default(`0x${e}`)))),t.toString(16).padStart(64,"0")}async prepareMessage(e,t){const{publicKey:n,stateInit:r}=await this.fetchState(t),o=await t.getSigner(n),s=t.nowSec+e.timeout,i=e.payload?t.encodeInternalInput(e.payload):void 0,a={messages:[[0,{flags:3,message:t.encodeInternalMessage({dst:e.recipient,bounce:e.bounce,stateInit:e.stateInit,body:i,amount:e.amount})}]]},c=t.packIntoCell({structure:_,data:a}),u=t.getBocHash(c);a.walletId=h,a.expireAt=s,a.messagesHash=`0x${u.slice(-8)}`;const l=t.packIntoCell({structure:p,data:a}),d=t.getBocHash(l),f=await o.sign(d),{signatureParts:b}=t.extendSignature(f);a.signatureHigh=b.high,a.signatureLow=b.low;const w=t.packIntoCell({structure:g,data:a});return t.createRawExternalMessage({address:this.address.toString(),body:w,stateInit:r,expireAt:s})}async fetchState(e){let t,n;const r=await e.getFullContractState(this.address);if(null!=r&&r.isDeployed)if(null==this.publicKey){const t=e.extractContractData(r.boc);if(null==t)throw new Error("Failed to extract contract data");n=l(e,t).publicKey}else n=this.publicKey;else{if(null==this.publicKey)throw new Error("Contract not deployed and public key was not specified");t=d(this.publicKey),n=this.publicKey}return null==this.publicKey&&(this.publicKey=n),{publicKey:n.toString(16).padStart(64,"0"),stateInit:t}}}e.exports.HighloadWalletV2=u;const l=(e,t)=>{const n=e.unpackFromCell({structure:f,boc:t,allowPartial:!0});if("object"!=typeof n||"string"!=typeof n.publicKey)throw new Error("Invalid contract data");return{publicKey:new s.default(n.publicKey)}},d=e=>{const t=c.packIntoCell(f,{walletId:h,lastCleaned:0,publicKey:e.toFixed(0),queries:!1});return c.mergeTvc(b,t)},_=[{name:"messages",type:"map(uint16,tuple)",components:[{name:"flags",type:"uint8"},{name:"message",type:"cell"}]}],p=[{name:"walletId",type:"uint32"},{name:"expireAt",type:"uint32"},{name:"messagesHash",type:"uint32"},..._],g=[{name:"signatureHigh",type:"uint256"},{name:"signatureLow",type:"uint256"},...p],f=[{name:"walletId",type:"uint32"},{name:"lastCleaned",type:"uint64"},{name:"publicKey",type:"uint256"},{name:"queries",type:"bool"}],b="te6ccgEBCQEA5QABFP8A9KQT9LzyyAsBAgEgBAIB6vKDCNcYINMf0z/4I6ofUyC58mPtRNDTH9M/0//0BNFTYIBA9A5voTHyYFFzuvKiB/kBVBCH+RDyowL0BNH4AH+OFiGAEPR4b6UgmALTB9QwAfsAkTLiAbPmW4MlochANIBA9EOK5jHIEssfE8s/y//0AMntVAMANCCAQPSWb6UyURCUMFMDud4gkzM2AZIyMOKzAgFICAUCASAHBgBBvl+XaiaGmPmOmf6f+Y+gJoqRBAIHoHN9CYyS2/yV3R8UABe9nOdqJoaa+Y64X/wABNAw",h=0})),o.register("2ePkt",(function(e,t){var n=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.EverWalletAccount=void 0;var r=o("dLh7e");const s=n(o("5Kq8F")),i=n(o("ejgJV")),{ensureNekotonLoaded:a,nekoton:c}=i.default;class u{constructor(e){this.address=e}static async computeAddress(e){await a();const t=e.publicKey instanceof s.default?e.publicKey:new s.default(`0x${e.publicKey}`),n=l(t),o=c.getBocHash(n);return new r.Address(`${null!=e.workchain?e.workchain:0}:${o}`)}static async fromPubkey(e){const t=new s.default(`0x${e.publicKey}`),n=await u.computeAddress({publicKey:t,workchain:e.workchain}),r=new u(n);return r.publicKey=t,r}async fetchPublicKey(e){let t=this.publicKey;return null==t&&(t=this.publicKey=await e.fetchPublicKey(this.address).then((e=>new s.default(`0x${e}`))),this.isDeployed=!0),t.toString(16).padStart(64,"0")}async prepareMessage(e,t){const{publicKey:n,stateInit:r}=await this.fetchState(t),o=await t.getSigner(n),s=e.payload?t.encodeInternalInput(e.payload):"";return t.createExternalMessage({address:this.address,signer:o,timeout:e.timeout,abi:p,method:"sendTransaction",params:{dest:e.recipient,value:e.amount,bounce:e.bounce,flags:3,payload:s},stateInit:r})}async fetchState(e){let t,n;if(!0===this.isDeployed&&null!=this.publicKey)n=this.publicKey;else{const r=await e.getFullContractState(this.address);if(null!=r&&r.isDeployed)this.isDeployed=!0,n=new s.default(`0x${c.extractPublicKey(r.boc)}`);else{if(null==this.publicKey)throw new Error("Contract not deployed and public key was not specified");t=l(this.publicKey),n=this.publicKey}null==this.publicKey&&(this.publicKey=n)}return{publicKey:n.toString(16).padStart(64,"0"),stateInit:t}}}e.exports.EverWalletAccount=u;const l=e=>{const t=c.packIntoCell(d,{publicKey:e.toFixed(0),timestamp:0});return c.mergeTvc(_,t)},d=[{name:"publicKey",type:"uint256"},{name:"timestamp",type:"uint64"}],_="te6cckEBBgEA/AABFP8A9KQT9LzyyAsBAgEgAgMABNIwAubycdcBAcAA8nqDCNcY7UTQgwfXAdcLP8j4KM8WI88WyfkAA3HXAQHDAJqDB9cBURO68uBk3oBA1wGAINcBgCDXAVQWdfkQ8qj4I7vyeWa++COBBwiggQPoqFIgvLHydAIgghBM7mRsuuMPAcjL/8s/ye1UBAUAmDAC10zQ+kCDBtcBcdcBeNcB10z4AHCAEASqAhSxyMsFUAXPFlAD+gLLaSLQIc8xIddJoIQJuZgzcAHLAFjPFpcwcQHLABLM4skB+wAAPoIQFp4+EbqOEfgAApMg10qXeNcB1AL7AOjRkzLyPOI+zYS/",p='{\n  "ABI version": 2,\n  "version": "2.3",\n  "header": ["pubkey", "time", "expire"],\n  "functions": [{\n    "name": "sendTransaction",\n    "inputs": [\n      {"name":"dest","type":"address"},\n      {"name":"value","type":"uint128"},\n      {"name":"bounce","type":"bool"},\n      {"name":"flags","type":"uint8"},\n      {"name":"payload","type":"cell"}\n    ],\n    "outputs": []\n  }],\n  "events": []\n}'})),o.register("h707y",(function(e,t){var n=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SimpleKeystore=void 0;const r=n(o("ejgJV")),{nekoton:s}=r.default;class i{constructor(e={}){this.signers=new Map,this.signersByPublicKey=new Map;for(const[t,n]of Object.entries(e))this.addKeyPair(t,n)}static generateKeyPair(){return s.ed25519_generateKeyPair()}addKeyPair(e,t){let n,r;"string"==typeof e?(n=e,r=t):(n=e.publicKey,r=e);const o=new a(r);this.signers.set(n,o),this.signersByPublicKey.set(r.publicKey,o)}removeKeyPair(e){const t=this.signers.get(e);null!=t&&(this.signers.delete(e),this.signersByPublicKey.delete(t.publicKey))}async withNewKey(e,t={}){const n=i.generateKeyPair(),r=null!=t.keyId?t.keyId:n.publicKey,o=t.keepOnError||!1;return this.addKeyPair(r,n),e(r).then((e=>(!1===e&&this.removeKeyPair(r),r))).catch((e=>{throw o||this.removeKeyPair(r),e}))}async getSigner(e){return this.signers.get(e)||this.signersByPublicKey.get(e)}}e.exports.SimpleKeystore=i;class a{constructor(e){this.keyPair=e,this.publicKey=this.keyPair.publicKey}async sign(e){return s.ed25519_sign(this.keyPair.secretKey,e)}}})),o.register("lyauN",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Clock=void 0;e.exports.Clock=class{constructor(e){this.impls=[],this.currentOffset=0,null!=e&&(this.currentOffset=e)}get offset(){return this.currentOffset}set offset(e){this.currentOffset=e;for(const e of this.impls)e.updateOffset(this.currentOffset)}get time(){return(new Date).getTime()+this.offset}detach(){this.impls=[]}}})),o.register("8pSzq",(function(e,t){var n,r,o,s,i,a,c,u,l,d,_,p,g,f,b,h=e.exports&&e.exports.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,s){function i(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.builderOpInteger=e.exports.BocErrorCode=e.exports.bocCacheTypeUnpinned=e.exports.bocCacheTypePinned=e.exports.AbiModule=e.exports.messageSourceEncodingParams=e.exports.messageSourceEncoded=e.exports.stateInitSourceTvc=e.exports.stateInitSourceStateInit=e.exports.stateInitSourceMessage=e.exports.MessageBodyType=e.exports.signerSigningBox=e.exports.signerKeys=e.exports.signerExternal=e.exports.signerNone=e.exports.abiSerialized=e.exports.abiHandle=e.exports.abiJson=e.exports.abiContract=e.exports.AbiErrorCode=e.exports.CryptoModule=e.exports.resultOfAppEncryptionBoxDecrypt=e.exports.resultOfAppEncryptionBoxEncrypt=e.exports.resultOfAppEncryptionBoxGetInfo=e.exports.paramsOfAppEncryptionBoxDecrypt=e.exports.paramsOfAppEncryptionBoxEncrypt=e.exports.paramsOfAppEncryptionBoxGetInfo=e.exports.resultOfAppSigningBoxSign=e.exports.resultOfAppSigningBoxGetPublicKey=e.exports.paramsOfAppSigningBoxSign=e.exports.paramsOfAppSigningBoxGetPublicKey=e.exports.resultOfAppPasswordProviderGetPassword=e.exports.paramsOfAppPasswordProviderGetPassword=e.exports.boxEncryptionAlgorithmNaclSecretBox=e.exports.boxEncryptionAlgorithmNaclBox=e.exports.boxEncryptionAlgorithmChaCha20=e.exports.cryptoBoxSecretEncryptedSecret=e.exports.cryptoBoxSecretPredefinedSeedPhrase=e.exports.cryptoBoxSecretRandomSeedPhrase=e.exports.CipherMode=e.exports.encryptionAlgorithmNaclSecretBox=e.exports.encryptionAlgorithmNaclBox=e.exports.encryptionAlgorithmChaCha20=e.exports.encryptionAlgorithmAES=e.exports.CryptoErrorCode=e.exports.ClientModule=e.exports.appRequestResultOk=e.exports.appRequestResultError=e.exports.NetworkQueriesProtocol=e.exports.ClientErrorCode=void 0,e.exports.resultOfAppDebotBrowserInput=e.exports.paramsOfAppDebotBrowserApprove=e.exports.paramsOfAppDebotBrowserSend=e.exports.paramsOfAppDebotBrowserInvokeDebot=e.exports.paramsOfAppDebotBrowserGetSigningBox=e.exports.paramsOfAppDebotBrowserInput=e.exports.paramsOfAppDebotBrowserShowAction=e.exports.paramsOfAppDebotBrowserSwitchCompleted=e.exports.paramsOfAppDebotBrowserSwitch=e.exports.paramsOfAppDebotBrowserLog=e.exports.debotActivityTransaction=e.exports.DebotErrorCode=e.exports.NetModule=e.exports.AggregationFn=e.exports.paramsOfQueryOperationQueryCounterparties=e.exports.paramsOfQueryOperationAggregateCollection=e.exports.paramsOfQueryOperationWaitForCollection=e.exports.paramsOfQueryOperationQueryCollection=e.exports.SortDirection=e.exports.NetErrorCode=e.exports.TvmModule=e.exports.accountForExecutorAccount=e.exports.accountForExecutorUninit=e.exports.accountForExecutorNone=e.exports.TvmErrorCode=e.exports.UtilsModule=e.exports.AccountAddressType=e.exports.addressStringFormatBase64=e.exports.addressStringFormatHex=e.exports.addressStringFormatAccountId=e.exports.ProcessingModule=e.exports.processingEventRempError=e.exports.processingEventRempOther=e.exports.processingEventRempIncludedIntoAcceptedBlock=e.exports.processingEventRempIncludedIntoBlock=e.exports.processingEventRempSentToValidators=e.exports.processingEventMessageExpired=e.exports.processingEventFetchNextBlockFailed=e.exports.processingEventWillFetchNextBlock=e.exports.processingEventSendFailed=e.exports.processingEventDidSend=e.exports.processingEventWillSend=e.exports.processingEventFetchFirstBlockFailed=e.exports.processingEventWillFetchFirstBlock=e.exports.ProcessingErrorCode=e.exports.BocModule=e.exports.builderOpAddress=e.exports.builderOpCellBoc=e.exports.builderOpCell=e.exports.builderOpBitString=void 0,e.exports.ProofsModule=e.exports.ProofsErrorCode=e.exports.DebotModule=e.exports.resultOfAppDebotBrowserApprove=e.exports.resultOfAppDebotBrowserInvokeDebot=e.exports.resultOfAppDebotBrowserGetSigningBox=void 0,(n=e.exports.ClientErrorCode||(e.exports.ClientErrorCode={}))[n.NotImplemented=1]="NotImplemented",n[n.InvalidHex=2]="InvalidHex",n[n.InvalidBase64=3]="InvalidBase64",n[n.InvalidAddress=4]="InvalidAddress",n[n.CallbackParamsCantBeConvertedToJson=5]="CallbackParamsCantBeConvertedToJson",n[n.WebsocketConnectError=6]="WebsocketConnectError",n[n.WebsocketReceiveError=7]="WebsocketReceiveError",n[n.WebsocketSendError=8]="WebsocketSendError",n[n.HttpClientCreateError=9]="HttpClientCreateError",n[n.HttpRequestCreateError=10]="HttpRequestCreateError",n[n.HttpRequestSendError=11]="HttpRequestSendError",n[n.HttpRequestParseError=12]="HttpRequestParseError",n[n.CallbackNotRegistered=13]="CallbackNotRegistered",n[n.NetModuleNotInit=14]="NetModuleNotInit",n[n.InvalidConfig=15]="InvalidConfig",n[n.CannotCreateRuntime=16]="CannotCreateRuntime",n[n.InvalidContextHandle=17]="InvalidContextHandle",n[n.CannotSerializeResult=18]="CannotSerializeResult",n[n.CannotSerializeError=19]="CannotSerializeError",n[n.CannotConvertJsValueToJson=20]="CannotConvertJsValueToJson",n[n.CannotReceiveSpawnedResult=21]="CannotReceiveSpawnedResult",n[n.SetTimerError=22]="SetTimerError",n[n.InvalidParams=23]="InvalidParams",n[n.ContractsAddressConversionFailed=24]="ContractsAddressConversionFailed",n[n.UnknownFunction=25]="UnknownFunction",n[n.AppRequestError=26]="AppRequestError",n[n.NoSuchRequest=27]="NoSuchRequest",n[n.CanNotSendRequestResult=28]="CanNotSendRequestResult",n[n.CanNotReceiveRequestResult=29]="CanNotReceiveRequestResult",n[n.CanNotParseRequestResult=30]="CanNotParseRequestResult",n[n.UnexpectedCallbackResponse=31]="UnexpectedCallbackResponse",n[n.CanNotParseNumber=32]="CanNotParseNumber",n[n.InternalError=33]="InternalError",n[n.InvalidHandle=34]="InvalidHandle",n[n.LocalStorageError=35]="LocalStorageError",(r=e.exports.NetworkQueriesProtocol||(e.exports.NetworkQueriesProtocol={})).HTTP="HTTP",r.WS="WS",e.exports.appRequestResultError=function(e){return{type:"Error",text:e}},e.exports.appRequestResultOk=function(e){return{type:"Ok",result:e}};function w(e,t,n,r){return h(this,void 0,void 0,(function*(){try{let o={};if("GetPassword"===t.type)o=yield e.get_password(t);r.resolve_app_request(n,Object.assign({type:t.type},o))}catch(e){r.reject_app_request(n,e)}}))}function y(e,t,n,r){return h(this,void 0,void 0,(function*(){try{let o={};switch(t.type){case"GetPublicKey":o=yield e.get_public_key();break;case"Sign":o=yield e.sign(t)}r.resolve_app_request(n,Object.assign({type:t.type},o))}catch(e){r.reject_app_request(n,e)}}))}function m(e,t,n,r){return h(this,void 0,void 0,(function*(){try{let o={};switch(t.type){case"GetInfo":o=yield e.get_info();break;case"Encrypt":o=yield e.encrypt(t);break;case"Decrypt":o=yield e.decrypt(t)}r.resolve_app_request(n,Object.assign({type:t.type},o))}catch(e){r.reject_app_request(n,e)}}))}e.exports.ClientModule=class{constructor(e){this.client=e}get_api_reference(){return this.client.request("client.get_api_reference")}version(){return this.client.request("client.version")}config(){return this.client.request("client.config")}build_info(){return this.client.request("client.build_info")}resolve_app_request(e){return this.client.request("client.resolve_app_request",e)}},(o=e.exports.CryptoErrorCode||(e.exports.CryptoErrorCode={}))[o.InvalidPublicKey=100]="InvalidPublicKey",o[o.InvalidSecretKey=101]="InvalidSecretKey",o[o.InvalidKey=102]="InvalidKey",o[o.InvalidFactorizeChallenge=106]="InvalidFactorizeChallenge",o[o.InvalidBigInt=107]="InvalidBigInt",o[o.ScryptFailed=108]="ScryptFailed",o[o.InvalidKeySize=109]="InvalidKeySize",o[o.NaclSecretBoxFailed=110]="NaclSecretBoxFailed",o[o.NaclBoxFailed=111]="NaclBoxFailed",o[o.NaclSignFailed=112]="NaclSignFailed",o[o.Bip39InvalidEntropy=113]="Bip39InvalidEntropy",o[o.Bip39InvalidPhrase=114]="Bip39InvalidPhrase",o[o.Bip32InvalidKey=115]="Bip32InvalidKey",o[o.Bip32InvalidDerivePath=116]="Bip32InvalidDerivePath",o[o.Bip39InvalidDictionary=117]="Bip39InvalidDictionary",o[o.Bip39InvalidWordCount=118]="Bip39InvalidWordCount",o[o.MnemonicGenerationFailed=119]="MnemonicGenerationFailed",o[o.MnemonicFromEntropyFailed=120]="MnemonicFromEntropyFailed",o[o.SigningBoxNotRegistered=121]="SigningBoxNotRegistered",o[o.InvalidSignature=122]="InvalidSignature",o[o.EncryptionBoxNotRegistered=123]="EncryptionBoxNotRegistered",o[o.InvalidIvSize=124]="InvalidIvSize",o[o.UnsupportedCipherMode=125]="UnsupportedCipherMode",o[o.CannotCreateCipher=126]="CannotCreateCipher",o[o.EncryptDataError=127]="EncryptDataError",o[o.DecryptDataError=128]="DecryptDataError",o[o.IvRequired=129]="IvRequired",o[o.CryptoBoxNotRegistered=130]="CryptoBoxNotRegistered",o[o.InvalidCryptoBoxType=131]="InvalidCryptoBoxType",o[o.CryptoBoxSecretSerializationError=132]="CryptoBoxSecretSerializationError",o[o.CryptoBoxSecretDeserializationError=133]="CryptoBoxSecretDeserializationError",o[o.InvalidNonceSize=134]="InvalidNonceSize",e.exports.encryptionAlgorithmAES=function(e){return{type:"AES",value:e}},e.exports.encryptionAlgorithmChaCha20=function(e){return{type:"ChaCha20",value:e}},e.exports.encryptionAlgorithmNaclBox=function(e){return{type:"NaclBox",value:e}},e.exports.encryptionAlgorithmNaclSecretBox=function(e){return{type:"NaclSecretBox",value:e}},(s=e.exports.CipherMode||(e.exports.CipherMode={})).CBC="CBC",s.CFB="CFB",s.CTR="CTR",s.ECB="ECB",s.OFB="OFB",e.exports.cryptoBoxSecretRandomSeedPhrase=function(e,t){return{type:"RandomSeedPhrase",dictionary:e,wordcount:t}},e.exports.cryptoBoxSecretPredefinedSeedPhrase=function(e,t,n){return{type:"PredefinedSeedPhrase",phrase:e,dictionary:t,wordcount:n}},e.exports.cryptoBoxSecretEncryptedSecret=function(e){return{type:"EncryptedSecret",encrypted_secret:e}},e.exports.boxEncryptionAlgorithmChaCha20=function(e){return{type:"ChaCha20",value:e}},e.exports.boxEncryptionAlgorithmNaclBox=function(e){return{type:"NaclBox",value:e}},e.exports.boxEncryptionAlgorithmNaclSecretBox=function(e){return{type:"NaclSecretBox",value:e}},e.exports.paramsOfAppPasswordProviderGetPassword=function(e){return{type:"GetPassword",encryption_public_key:e}},e.exports.resultOfAppPasswordProviderGetPassword=function(e,t){return{type:"GetPassword",encrypted_password:e,app_encryption_pubkey:t}},e.exports.paramsOfAppSigningBoxGetPublicKey=function(){return{type:"GetPublicKey"}},e.exports.paramsOfAppSigningBoxSign=function(e){return{type:"Sign",unsigned:e}},e.exports.resultOfAppSigningBoxGetPublicKey=function(e){return{type:"GetPublicKey",public_key:e}},e.exports.resultOfAppSigningBoxSign=function(e){return{type:"Sign",signature:e}},e.exports.paramsOfAppEncryptionBoxGetInfo=function(){return{type:"GetInfo"}},e.exports.paramsOfAppEncryptionBoxEncrypt=function(e){return{type:"Encrypt",data:e}},e.exports.paramsOfAppEncryptionBoxDecrypt=function(e){return{type:"Decrypt",data:e}},e.exports.resultOfAppEncryptionBoxGetInfo=function(e){return{type:"GetInfo",info:e}},e.exports.resultOfAppEncryptionBoxEncrypt=function(e){return{type:"Encrypt",data:e}},e.exports.resultOfAppEncryptionBoxDecrypt=function(e){return{type:"Decrypt",data:e}};e.exports.CryptoModule=class{constructor(e){this.client=e}factorize(e){return this.client.request("crypto.factorize",e)}modular_power(e){return this.client.request("crypto.modular_power",e)}ton_crc16(e){return this.client.request("crypto.ton_crc16",e)}generate_random_bytes(e){return this.client.request("crypto.generate_random_bytes",e)}convert_public_key_to_ton_safe_format(e){return this.client.request("crypto.convert_public_key_to_ton_safe_format",e)}generate_random_sign_keys(){return this.client.request("crypto.generate_random_sign_keys")}sign(e){return this.client.request("crypto.sign",e)}verify_signature(e){return this.client.request("crypto.verify_signature",e)}sha256(e){return this.client.request("crypto.sha256",e)}sha512(e){return this.client.request("crypto.sha512",e)}scrypt(e){return this.client.request("crypto.scrypt",e)}nacl_sign_keypair_from_secret_key(e){return this.client.request("crypto.nacl_sign_keypair_from_secret_key",e)}nacl_sign(e){return this.client.request("crypto.nacl_sign",e)}nacl_sign_open(e){return this.client.request("crypto.nacl_sign_open",e)}nacl_sign_detached(e){return this.client.request("crypto.nacl_sign_detached",e)}nacl_sign_detached_verify(e){return this.client.request("crypto.nacl_sign_detached_verify",e)}nacl_box_keypair(){return this.client.request("crypto.nacl_box_keypair")}nacl_box_keypair_from_secret_key(e){return this.client.request("crypto.nacl_box_keypair_from_secret_key",e)}nacl_box(e){return this.client.request("crypto.nacl_box",e)}nacl_box_open(e){return this.client.request("crypto.nacl_box_open",e)}nacl_secret_box(e){return this.client.request("crypto.nacl_secret_box",e)}nacl_secret_box_open(e){return this.client.request("crypto.nacl_secret_box_open",e)}mnemonic_words(e){return this.client.request("crypto.mnemonic_words",e)}mnemonic_from_random(e){return this.client.request("crypto.mnemonic_from_random",e)}mnemonic_from_entropy(e){return this.client.request("crypto.mnemonic_from_entropy",e)}mnemonic_verify(e){return this.client.request("crypto.mnemonic_verify",e)}mnemonic_derive_sign_keys(e){return this.client.request("crypto.mnemonic_derive_sign_keys",e)}hdkey_xprv_from_mnemonic(e){return this.client.request("crypto.hdkey_xprv_from_mnemonic",e)}hdkey_derive_from_xprv(e){return this.client.request("crypto.hdkey_derive_from_xprv",e)}hdkey_derive_from_xprv_path(e){return this.client.request("crypto.hdkey_derive_from_xprv_path",e)}hdkey_secret_from_xprv(e){return this.client.request("crypto.hdkey_secret_from_xprv",e)}hdkey_public_from_xprv(e){return this.client.request("crypto.hdkey_public_from_xprv",e)}chacha20(e){return this.client.request("crypto.chacha20",e)}create_crypto_box(e,t){return this.client.request("crypto.create_crypto_box",e,((e,n)=>{3===n?w(t,e.request_data,e.app_request_id,this.client):4===n&&w(t,e,null,this.client)}))}remove_crypto_box(e){return this.client.request("crypto.remove_crypto_box",e)}get_crypto_box_info(e){return this.client.request("crypto.get_crypto_box_info",e)}get_crypto_box_seed_phrase(e){return this.client.request("crypto.get_crypto_box_seed_phrase",e)}get_signing_box_from_crypto_box(e){return this.client.request("crypto.get_signing_box_from_crypto_box",e)}get_encryption_box_from_crypto_box(e){return this.client.request("crypto.get_encryption_box_from_crypto_box",e)}clear_crypto_box_secret_cache(e){return this.client.request("crypto.clear_crypto_box_secret_cache",e)}register_signing_box(e){return this.client.request("crypto.register_signing_box",void 0,((t,n)=>{3===n?y(e,t.request_data,t.app_request_id,this.client):4===n&&y(e,t,null,this.client)}))}get_signing_box(e){return this.client.request("crypto.get_signing_box",e)}signing_box_get_public_key(e){return this.client.request("crypto.signing_box_get_public_key",e)}signing_box_sign(e){return this.client.request("crypto.signing_box_sign",e)}remove_signing_box(e){return this.client.request("crypto.remove_signing_box",e)}register_encryption_box(e){return this.client.request("crypto.register_encryption_box",void 0,((t,n)=>{3===n?m(e,t.request_data,t.app_request_id,this.client):4===n&&m(e,t,null,this.client)}))}remove_encryption_box(e){return this.client.request("crypto.remove_encryption_box",e)}encryption_box_get_info(e){return this.client.request("crypto.encryption_box_get_info",e)}encryption_box_encrypt(e){return this.client.request("crypto.encryption_box_encrypt",e)}encryption_box_decrypt(e){return this.client.request("crypto.encryption_box_decrypt",e)}create_encryption_box(e){return this.client.request("crypto.create_encryption_box",e)}},(i=e.exports.AbiErrorCode||(e.exports.AbiErrorCode={}))[i.RequiredAddressMissingForEncodeMessage=301]="RequiredAddressMissingForEncodeMessage",i[i.RequiredCallSetMissingForEncodeMessage=302]="RequiredCallSetMissingForEncodeMessage",i[i.InvalidJson=303]="InvalidJson",i[i.InvalidMessage=304]="InvalidMessage",i[i.EncodeDeployMessageFailed=305]="EncodeDeployMessageFailed",i[i.EncodeRunMessageFailed=306]="EncodeRunMessageFailed",i[i.AttachSignatureFailed=307]="AttachSignatureFailed",i[i.InvalidTvcImage=308]="InvalidTvcImage",i[i.RequiredPublicKeyMissingForFunctionHeader=309]="RequiredPublicKeyMissingForFunctionHeader",i[i.InvalidSigner=310]="InvalidSigner",i[i.InvalidAbi=311]="InvalidAbi",i[i.InvalidFunctionId=312]="InvalidFunctionId",i[i.InvalidData=313]="InvalidData",i[i.EncodeInitialDataFailed=314]="EncodeInitialDataFailed",i[i.InvalidFunctionName=315]="InvalidFunctionName",e.exports.abiContract=function(e){return{type:"Contract",value:e}},e.exports.abiJson=function(e){return{type:"Json",value:e}},e.exports.abiHandle=function(e){return{type:"Handle",value:e}},e.exports.abiSerialized=function(e){return{type:"Serialized",value:e}},e.exports.signerNone=function(){return{type:"None"}},e.exports.signerExternal=function(e){return{type:"External",public_key:e}},e.exports.signerKeys=function(e){return{type:"Keys",keys:e}},e.exports.signerSigningBox=function(e){return{type:"SigningBox",handle:e}},(a=e.exports.MessageBodyType||(e.exports.MessageBodyType={})).Input="Input",a.Output="Output",a.InternalOutput="InternalOutput",a.Event="Event",e.exports.stateInitSourceMessage=function(e){return{type:"Message",source:e}},e.exports.stateInitSourceStateInit=function(e,t,n){return{type:"StateInit",code:e,data:t,library:n}},e.exports.stateInitSourceTvc=function(e,t,n){return{type:"Tvc",tvc:e,public_key:t,init_params:n}},e.exports.messageSourceEncoded=function(e,t){return{type:"Encoded",message:e,abi:t}},e.exports.messageSourceEncodingParams=function(e){return Object.assign({type:"EncodingParams"},e)};e.exports.AbiModule=class{constructor(e){this.client=e}encode_message_body(e){return this.client.request("abi.encode_message_body",e)}attach_signature_to_message_body(e){return this.client.request("abi.attach_signature_to_message_body",e)}encode_message(e){return this.client.request("abi.encode_message",e)}encode_internal_message(e){return this.client.request("abi.encode_internal_message",e)}attach_signature(e){return this.client.request("abi.attach_signature",e)}decode_message(e){return this.client.request("abi.decode_message",e)}decode_message_body(e){return this.client.request("abi.decode_message_body",e)}encode_account(e){return this.client.request("abi.encode_account",e)}decode_account_data(e){return this.client.request("abi.decode_account_data",e)}update_initial_data(e){return this.client.request("abi.update_initial_data",e)}encode_initial_data(e){return this.client.request("abi.encode_initial_data",e)}decode_initial_data(e){return this.client.request("abi.decode_initial_data",e)}decode_boc(e){return this.client.request("abi.decode_boc",e)}encode_boc(e){return this.client.request("abi.encode_boc",e)}calc_function_id(e){return this.client.request("abi.calc_function_id",e)}},e.exports.bocCacheTypePinned=function(e){return{type:"Pinned",pin:e}},e.exports.bocCacheTypeUnpinned=function(){return{type:"Unpinned"}},(c=e.exports.BocErrorCode||(e.exports.BocErrorCode={}))[c.InvalidBoc=201]="InvalidBoc",c[c.SerializationError=202]="SerializationError",c[c.InappropriateBlock=203]="InappropriateBlock",c[c.MissingSourceBoc=204]="MissingSourceBoc",c[c.InsufficientCacheSize=205]="InsufficientCacheSize",c[c.BocRefNotFound=206]="BocRefNotFound",c[c.InvalidBocRef=207]="InvalidBocRef",e.exports.builderOpInteger=function(e,t){return{type:"Integer",size:e,value:t}},e.exports.builderOpBitString=function(e){return{type:"BitString",value:e}},e.exports.builderOpCell=function(e){return{type:"Cell",builder:e}},e.exports.builderOpCellBoc=function(e){return{type:"CellBoc",boc:e}},e.exports.builderOpAddress=function(e){return{type:"Address",address:e}};e.exports.BocModule=class{constructor(e){this.client=e}parse_message(e){return this.client.request("boc.parse_message",e)}parse_transaction(e){return this.client.request("boc.parse_transaction",e)}parse_account(e){return this.client.request("boc.parse_account",e)}parse_block(e){return this.client.request("boc.parse_block",e)}parse_shardstate(e){return this.client.request("boc.parse_shardstate",e)}get_blockchain_config(e){return this.client.request("boc.get_blockchain_config",e)}get_boc_hash(e){return this.client.request("boc.get_boc_hash",e)}get_boc_depth(e){return this.client.request("boc.get_boc_depth",e)}get_code_from_tvc(e){return this.client.request("boc.get_code_from_tvc",e)}cache_get(e){return this.client.request("boc.cache_get",e)}cache_set(e){return this.client.request("boc.cache_set",e)}cache_unpin(e){return this.client.request("boc.cache_unpin",e)}encode_boc(e){return this.client.request("boc.encode_boc",e)}get_code_salt(e){return this.client.request("boc.get_code_salt",e)}set_code_salt(e){return this.client.request("boc.set_code_salt",e)}decode_tvc(e){return this.client.request("boc.decode_tvc",e)}encode_tvc(e){return this.client.request("boc.encode_tvc",e)}encode_external_in_message(e){return this.client.request("boc.encode_external_in_message",e)}get_compiler_version(e){return this.client.request("boc.get_compiler_version",e)}},(u=e.exports.ProcessingErrorCode||(e.exports.ProcessingErrorCode={}))[u.MessageAlreadyExpired=501]="MessageAlreadyExpired",u[u.MessageHasNotDestinationAddress=502]="MessageHasNotDestinationAddress",u[u.CanNotBuildMessageCell=503]="CanNotBuildMessageCell",u[u.FetchBlockFailed=504]="FetchBlockFailed",u[u.SendMessageFailed=505]="SendMessageFailed",u[u.InvalidMessageBoc=506]="InvalidMessageBoc",u[u.MessageExpired=507]="MessageExpired",u[u.TransactionWaitTimeout=508]="TransactionWaitTimeout",u[u.InvalidBlockReceived=509]="InvalidBlockReceived",u[u.CanNotCheckBlockShard=510]="CanNotCheckBlockShard",u[u.BlockNotFound=511]="BlockNotFound",u[u.InvalidData=512]="InvalidData",u[u.ExternalSignerMustNotBeUsed=513]="ExternalSignerMustNotBeUsed",u[u.MessageRejected=514]="MessageRejected",u[u.InvalidRempStatus=515]="InvalidRempStatus",u[u.NextRempStatusTimeout=516]="NextRempStatusTimeout",e.exports.processingEventWillFetchFirstBlock=function(){return{type:"WillFetchFirstBlock"}},e.exports.processingEventFetchFirstBlockFailed=function(e){return{type:"FetchFirstBlockFailed",error:e}},e.exports.processingEventWillSend=function(e,t,n){return{type:"WillSend",shard_block_id:e,message_id:t,message:n}},e.exports.processingEventDidSend=function(e,t,n){return{type:"DidSend",shard_block_id:e,message_id:t,message:n}},e.exports.processingEventSendFailed=function(e,t,n,r){return{type:"SendFailed",shard_block_id:e,message_id:t,message:n,error:r}},e.exports.processingEventWillFetchNextBlock=function(e,t,n){return{type:"WillFetchNextBlock",shard_block_id:e,message_id:t,message:n}},e.exports.processingEventFetchNextBlockFailed=function(e,t,n,r){return{type:"FetchNextBlockFailed",shard_block_id:e,message_id:t,message:n,error:r}},e.exports.processingEventMessageExpired=function(e,t,n){return{type:"MessageExpired",message_id:e,message:t,error:n}},e.exports.processingEventRempSentToValidators=function(e,t,n){return{type:"RempSentToValidators",message_id:e,timestamp:t,json:n}},e.exports.processingEventRempIncludedIntoBlock=function(e,t,n){return{type:"RempIncludedIntoBlock",message_id:e,timestamp:t,json:n}},e.exports.processingEventRempIncludedIntoAcceptedBlock=function(e,t,n){return{type:"RempIncludedIntoAcceptedBlock",message_id:e,timestamp:t,json:n}},e.exports.processingEventRempOther=function(e,t,n){return{type:"RempOther",message_id:e,timestamp:t,json:n}},e.exports.processingEventRempError=function(e){return{type:"RempError",error:e}};e.exports.ProcessingModule=class{constructor(e){this.client=e}send_message(e,t){return this.client.request("processing.send_message",e,t)}wait_for_transaction(e,t){return this.client.request("processing.wait_for_transaction",e,t)}process_message(e,t){return this.client.request("processing.process_message",e,t)}},e.exports.addressStringFormatAccountId=function(){return{type:"AccountId"}},e.exports.addressStringFormatHex=function(){return{type:"Hex"}},e.exports.addressStringFormatBase64=function(e,t,n){return{type:"Base64",url:e,test:t,bounce:n}},(l=e.exports.AccountAddressType||(e.exports.AccountAddressType={})).AccountId="AccountId",l.Hex="Hex",l.Base64="Base64";e.exports.UtilsModule=class{constructor(e){this.client=e}convert_address(e){return this.client.request("utils.convert_address",e)}get_address_type(e){return this.client.request("utils.get_address_type",e)}calc_storage_fee(e){return this.client.request("utils.calc_storage_fee",e)}compress_zstd(e){return this.client.request("utils.compress_zstd",e)}decompress_zstd(e){return this.client.request("utils.decompress_zstd",e)}},(d=e.exports.TvmErrorCode||(e.exports.TvmErrorCode={}))[d.CanNotReadTransaction=401]="CanNotReadTransaction",d[d.CanNotReadBlockchainConfig=402]="CanNotReadBlockchainConfig",d[d.TransactionAborted=403]="TransactionAborted",d[d.InternalError=404]="InternalError",d[d.ActionPhaseFailed=405]="ActionPhaseFailed",d[d.AccountCodeMissing=406]="AccountCodeMissing",d[d.LowBalance=407]="LowBalance",d[d.AccountFrozenOrDeleted=408]="AccountFrozenOrDeleted",d[d.AccountMissing=409]="AccountMissing",d[d.UnknownExecutionError=410]="UnknownExecutionError",d[d.InvalidInputStack=411]="InvalidInputStack",d[d.InvalidAccountBoc=412]="InvalidAccountBoc",d[d.InvalidMessageType=413]="InvalidMessageType",d[d.ContractExecutionError=414]="ContractExecutionError",e.exports.accountForExecutorNone=function(){return{type:"None"}},e.exports.accountForExecutorUninit=function(){return{type:"Uninit"}},e.exports.accountForExecutorAccount=function(e,t){return{type:"Account",boc:e,unlimited_balance:t}};e.exports.TvmModule=class{constructor(e){this.client=e}run_executor(e){return this.client.request("tvm.run_executor",e)}run_tvm(e){return this.client.request("tvm.run_tvm",e)}run_get(e){return this.client.request("tvm.run_get",e)}},(_=e.exports.NetErrorCode||(e.exports.NetErrorCode={}))[_.QueryFailed=601]="QueryFailed",_[_.SubscribeFailed=602]="SubscribeFailed",_[_.WaitForFailed=603]="WaitForFailed",_[_.GetSubscriptionResultFailed=604]="GetSubscriptionResultFailed",_[_.InvalidServerResponse=605]="InvalidServerResponse",_[_.ClockOutOfSync=606]="ClockOutOfSync",_[_.WaitForTimeout=607]="WaitForTimeout",_[_.GraphqlError=608]="GraphqlError",_[_.NetworkModuleSuspended=609]="NetworkModuleSuspended",_[_.WebsocketDisconnected=610]="WebsocketDisconnected",_[_.NotSupported=611]="NotSupported",_[_.NoEndpointsProvided=612]="NoEndpointsProvided",_[_.GraphqlWebsocketInitError=613]="GraphqlWebsocketInitError",_[_.NetworkModuleResumed=614]="NetworkModuleResumed",_[_.Unauthorized=615]="Unauthorized",_[_.QueryTransactionTreeTimeout=616]="QueryTransactionTreeTimeout",(p=e.exports.SortDirection||(e.exports.SortDirection={})).ASC="ASC",p.DESC="DESC",e.exports.paramsOfQueryOperationQueryCollection=function(e){return Object.assign({type:"QueryCollection"},e)},e.exports.paramsOfQueryOperationWaitForCollection=function(e){return Object.assign({type:"WaitForCollection"},e)},e.exports.paramsOfQueryOperationAggregateCollection=function(e){return Object.assign({type:"AggregateCollection"},e)},e.exports.paramsOfQueryOperationQueryCounterparties=function(e){return Object.assign({type:"QueryCounterparties"},e)},(g=e.exports.AggregationFn||(e.exports.AggregationFn={})).COUNT="COUNT",g.MIN="MIN",g.MAX="MAX",g.SUM="SUM",g.AVERAGE="AVERAGE";function v(e,t,n,r){return h(this,void 0,void 0,(function*(){try{let o={};switch(t.type){case"Log":e.log(t);break;case"Switch":e.switch(t);break;case"SwitchCompleted":e.switch_completed();break;case"ShowAction":e.show_action(t);break;case"Input":o=yield e.input(t);break;case"GetSigningBox":o=yield e.get_signing_box();break;case"InvokeDebot":yield e.invoke_debot(t);break;case"Send":e.send(t);break;case"Approve":o=yield e.approve(t)}r.resolve_app_request(n,Object.assign({type:t.type},o))}catch(e){r.reject_app_request(n,e)}}))}e.exports.NetModule=class{constructor(e){this.client=e}query(e){return this.client.request("net.query",e)}batch_query(e){return this.client.request("net.batch_query",e)}query_collection(e){return this.client.request("net.query_collection",e)}aggregate_collection(e){return this.client.request("net.aggregate_collection",e)}wait_for_collection(e){return this.client.request("net.wait_for_collection",e)}unsubscribe(e){return this.client.request("net.unsubscribe",e)}subscribe_collection(e,t){return this.client.request("net.subscribe_collection",e,t)}subscribe(e,t){return this.client.request("net.subscribe",e,t)}suspend(){return this.client.request("net.suspend")}resume(){return this.client.request("net.resume")}find_last_shard_block(e){return this.client.request("net.find_last_shard_block",e)}fetch_endpoints(){return this.client.request("net.fetch_endpoints")}set_endpoints(e){return this.client.request("net.set_endpoints",e)}get_endpoints(){return this.client.request("net.get_endpoints")}query_counterparties(e){return this.client.request("net.query_counterparties",e)}query_transaction_tree(e){return this.client.request("net.query_transaction_tree",e)}create_block_iterator(e){return this.client.request("net.create_block_iterator",e)}resume_block_iterator(e){return this.client.request("net.resume_block_iterator",e)}create_transaction_iterator(e){return this.client.request("net.create_transaction_iterator",e)}resume_transaction_iterator(e){return this.client.request("net.resume_transaction_iterator",e)}iterator_next(e){return this.client.request("net.iterator_next",e)}remove_iterator(e){return this.client.request("net.remove_iterator",e)}},(f=e.exports.DebotErrorCode||(e.exports.DebotErrorCode={}))[f.DebotStartFailed=801]="DebotStartFailed",f[f.DebotFetchFailed=802]="DebotFetchFailed",f[f.DebotExecutionFailed=803]="DebotExecutionFailed",f[f.DebotInvalidHandle=804]="DebotInvalidHandle",f[f.DebotInvalidJsonParams=805]="DebotInvalidJsonParams",f[f.DebotInvalidFunctionId=806]="DebotInvalidFunctionId",f[f.DebotInvalidAbi=807]="DebotInvalidAbi",f[f.DebotGetMethodFailed=808]="DebotGetMethodFailed",f[f.DebotInvalidMsg=809]="DebotInvalidMsg",f[f.DebotExternalCallFailed=810]="DebotExternalCallFailed",f[f.DebotBrowserCallbackFailed=811]="DebotBrowserCallbackFailed",f[f.DebotOperationRejected=812]="DebotOperationRejected",f[f.DebotNoCode=813]="DebotNoCode",e.exports.debotActivityTransaction=function(e,t,n,r,o,s,i){return{type:"Transaction",msg:e,dst:t,out:n,fee:r,setcode:o,signkey:s,signing_box_handle:i}},e.exports.paramsOfAppDebotBrowserLog=function(e){return{type:"Log",msg:e}},e.exports.paramsOfAppDebotBrowserSwitch=function(e){return{type:"Switch",context_id:e}},e.exports.paramsOfAppDebotBrowserSwitchCompleted=function(){return{type:"SwitchCompleted"}},e.exports.paramsOfAppDebotBrowserShowAction=function(e){return{type:"ShowAction",action:e}},e.exports.paramsOfAppDebotBrowserInput=function(e){return{type:"Input",prompt:e}},e.exports.paramsOfAppDebotBrowserGetSigningBox=function(){return{type:"GetSigningBox"}},e.exports.paramsOfAppDebotBrowserInvokeDebot=function(e,t){return{type:"InvokeDebot",debot_addr:e,action:t}},e.exports.paramsOfAppDebotBrowserSend=function(e){return{type:"Send",message:e}},e.exports.paramsOfAppDebotBrowserApprove=function(e){return{type:"Approve",activity:e}},e.exports.resultOfAppDebotBrowserInput=function(e){return{type:"Input",value:e}},e.exports.resultOfAppDebotBrowserGetSigningBox=function(e){return{type:"GetSigningBox",signing_box:e}},e.exports.resultOfAppDebotBrowserInvokeDebot=function(){return{type:"InvokeDebot"}},e.exports.resultOfAppDebotBrowserApprove=function(e){return{type:"Approve",approved:e}};e.exports.DebotModule=class{constructor(e){this.client=e}init(e,t){return this.client.request("debot.init",e,((e,n)=>{3===n?v(t,e.request_data,e.app_request_id,this.client):4===n&&v(t,e,null,this.client)}))}start(e){return this.client.request("debot.start",e)}fetch(e){return this.client.request("debot.fetch",e)}execute(e){return this.client.request("debot.execute",e)}send(e){return this.client.request("debot.send",e)}remove(e){return this.client.request("debot.remove",e)}},(b=e.exports.ProofsErrorCode||(e.exports.ProofsErrorCode={}))[b.InvalidData=901]="InvalidData",b[b.ProofCheckFailed=902]="ProofCheckFailed",b[b.InternalError=903]="InternalError",b[b.DataDiffersFromProven=904]="DataDiffersFromProven";e.exports.ProofsModule=class{constructor(e){this.client=e}proof_block_data(e){return this.client.request("proofs.proof_block_data",e)}proof_transaction_data(e){return this.client.request("proofs.proof_transaction_data",e)}proof_message_data(e){return this.client.request("proofs.proof_message_data",e)}}})),o.register("iZBDf",(function(e,t){var n=e.exports&&e.exports.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,s){function i(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.TonClient=void 0;var r=o("8pSzq"),s=o("bKvhV");class i{constructor(e){this.context=void 0,this.contextCreation=void 0,this.contextError=void 0,this.config=null!=e?e:{},this.client=new r.ClientModule(this),this.crypto=new r.CryptoModule(this),this.abi=new r.AbiModule(this),this.boc=new r.BocModule(this),this.processing=new r.ProcessingModule(this),this.utils=new r.UtilsModule(this),this.net=new r.NetModule(this),this.tvm=new r.TvmModule(this),this.proofs=new r.ProofsModule(this)}static set default(e){this._default=e}static get default(){return null===this._default&&(this._default=new i(this._defaultConfig)),this._default}static set defaultConfig(e){this._defaultConfig=e}static get defaultConfig(){return this._defaultConfig}static useBinaryLibrary(e){(0,s.useLibrary)(e)}static toKey(e){return a(e,256)}static toHash64(e){return a(e,64)}static toHash128(e){return a(e,128)}static toHash256(e){return a(e,256)}static toHash512(e){return a(e,512)}static toHex(e,t=0){return a(e,t)}close(){const e=this.context;void 0!==e&&(this.context=void 0,(0,s.getBridge)().destroyContext(e))}resolveError(e,t,r){var o,s;return n(this,void 0,void 0,(function*(){if(23!==r.code||!(null===(o=r.data)||void 0===o?void 0:o.suggest_use_helper_for))return r;try{const[n,i]=e.split("."),a=(yield this.client.get_api_reference()).api,c=a.modules.reduce(((e,t)=>e.concat(t.types)),[]),u={};c.forEach((e=>u[e.name]=e));const l=a.modules.find((e=>e.name===n)),d=l.functions.find((e=>e.name===i)).params[1];if(!d||"AppObject"==d.generic_name)return r;function _(e,t,n){switch(e.type){case"Array":Array.isArray(t)&&t.forEach((t=>_(e.array_item,t,`${n}[i]`)));break;case"Struct":e.struct_fields.forEach((e=>_(e,t[e.name],n?`${n}.${e.name}`:e.name)));break;case"Optional":t&&_(e.optional_inner,t,n);break;case"Ref":"Value"!=e.ref_name&&"API"!=e.ref_name&&"AbiParam"!=e.ref_name&&_(u[e.ref_name],t,n);break;case"EnumOfTypes":if(e.enum_types.some((e=>e.name==t.type)))return;let o=e.name.toLowerCase(),s=[];e.enum_types.forEach((e=>s.push(o+e.name))),r.message=`Consider using one of the helper methods (${s.join(", ")}) for the "${n}" parameter\n`+r.message}}_(u[d.ref_name],t,"")}catch(p){r.message=null!==(s=p.message)&&void 0!==s?s:`${p}`}return r}))}contextRequired(){return void 0!==this.context?Promise.resolve(this.context):void 0!==this.contextError?Promise.reject(this.contextError):(void 0===this.contextCreation&&(this.contextCreation=[],(0,s.getBridge)().createContext(this.config).then((e=>{const t=this.contextCreation;this.contextCreation=void 0,this.context=e,null==t||t.forEach((t=>t.resolve(e)))}),(e=>{const t=this.contextCreation;this.contextCreation=void 0,this.contextError=null!=e?e:void 0,null==t||t.forEach((t=>t.reject(e)))}))),new Promise(((e,t)=>{var n;null===(n=this.contextCreation)||void 0===n||n.push({resolve:e,reject:t})})))}request(e,t,r){var o;return n(this,void 0,void 0,(function*(){const i=null!==(o=this.context)&&void 0!==o?o:yield this.contextRequired();return(0,s.getBridge)().request(i,e,t,null!=r?r:()=>{}).catch((r=>n(this,void 0,void 0,(function*(){throw yield this.resolveError(e,t,r)}))))}))}resolve_app_request(e,t){return n(this,void 0,void 0,(function*(){e&&(yield this.client.resolve_app_request({app_request_id:e,result:{type:"Ok",result:t}}))}))}reject_app_request(e,t){return n(this,void 0,void 0,(function*(){e&&(yield this.client.resolve_app_request({app_request_id:e,result:{type:"Error",text:t.message}}))}))}}function a(e,t){let n;n="number"==typeof e||"bigint"==typeof e?e.toString(16):"string"==typeof e?e.startsWith("0x")?e.substring(2):function(e){var t;let n=[];for(let r=0;r<e.length;r+=1){const o=(null!==(t=e.codePointAt(r))&&void 0!==t?t:0)-48,s=u(c(n,3),c(n,1));n=u(s,[o])}let r="";for(let e=n.length-1;e>=0;e-=1)r+=n[e].toString(16).padStart(4,"0");return r}(e):e.toString();let r=t/4;for(;n.length>r&&n.startsWith("0");)n=n.substring(1);return n.padStart(r,"0")}function c(e,t){let n=0;const r=[];for(let o=0;o<e.length;o+=1){let s=(e[o]<<t)+n;r.push(65535&s),n=s>>16&65535}return n>0&&r.push(n),r}function u(e,t){let n=0;const r=[],o=Math.max(e.length,t.length);for(let s=0;s<o;s+=1){let o=(s<e.length?e[s]:0)+(s<t.length?t[s]:0)+n;r.push(65535&o),n=o>>16&65535}return n>0&&r.push(n),r}e.exports.TonClient=i,i._defaultConfig={},i._default=null})),o.register("bKvhV",(function(e,t){var n=e.exports&&e.exports.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,s){function i(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.CommonBinaryBridge=e.exports.useLibrary=e.exports.getBridge=e.exports.ResponseType=void 0;var r,s,i=o("jjJ7Q");let a;(s=r=e.exports.ResponseType||(e.exports.ResponseType={}))[s.Success=0]="Success",s[s.Error=1]="Error",s[s.Nop=2]="Nop",s[s.AppRequest=3]="AppRequest",s[s.AppNotify=4]="AppNotify",s[s.Custom=100]="Custom",e.exports.getBridge=function(){if(!a)throw new i.TonClientError(1,"TON Client binary bridge isn't set.");return a},e.exports.useLibrary=function(e){a="createContext"in e?e:new u(e)};class c{constructor(e){this.library=e}setResponseParamsHandler(e){void 0===e?this.library.setResponseHandler(void 0):this.library.setResponseHandler(((t,n,r,o)=>e(t,""!==n?JSON.parse(n):void 0,r,o)))}sendRequestParams(e,t,n,r){const o=null==r?"":JSON.stringify(r,((e,t)=>"bigint"==typeof t?t<Number.MAX_SAFE_INTEGER&&t>Number.MIN_SAFE_INTEGER?Number(t):t.toString():t));this.library.sendRequest(e,t,n,o)}createContext(e){return this.library.createContext(e)}destroyContext(e){this.library.destroyContext(e)}}class u{constructor(e){this.loading=void 0,this.loadError=void 0,this.library=void 0,this.requests=new Map,this.nextRequestId=1,this.contextCount=0,this.responseHandlerAssigned=!1,this.loading=[],e().then((e=>{const t=this.loading;this.loading=void 0;let n="setResponseParamsHandler"in e?e:new c(e);this.library=n,null==t||t.forEach((e=>e.resolve(n)))}),(e=>{const t=this.loading;this.loading=void 0,this.loadError=null!=e?e:void 0,null==t||t.forEach((t=>t.reject(e)))}))}checkResponseHandler(){var e,t;const n=this.contextCount>0||this.requests.size>0;this.responseHandlerAssigned!==n&&(n?null===(e=this.library)||void 0===e||e.setResponseParamsHandler(((e,t,n,r)=>this.handleLibraryResponse(e,t,n,r))):null===(t=this.library)||void 0===t||t.setResponseParamsHandler(),this.responseHandlerAssigned=n)}createContext(e){return n(this,void 0,void 0,(function*(){const t=this.library||(yield this.loadRequired());return this.contextCount+=1,u.parseResult(yield t.createContext(JSON.stringify(e)))}))}destroyContext(e){var t;this.contextCount=Math.max(this.contextCount-1,0),this.checkResponseHandler(),null===(t=this.library)||void 0===t||t.destroyContext(e)}request(e,t,r,o){var s;return n(this,void 0,void 0,(function*(){const n=null!==(s=this.library)&&void 0!==s?s:yield this.loadRequired();return new Promise(((s,i)=>{const a={resolve:s,reject:i,responseHandler:o},c=this.generateRequestId();this.requests.set(c,a),this.checkResponseHandler(),n.sendRequestParams(e,c,t,r)}))}))}loadRequired(){return void 0!==this.library?Promise.resolve(this.library):void 0!==this.loadError?Promise.reject(this.loadError):void 0===this.loading?Promise.reject(new i.TonClientError(1,"TON Client binary library isn't set.")):new Promise(((e,t)=>{var n;null===(n=this.loading)||void 0===n||n.push({resolve:e,reject:t})}))}generateRequestId(){const e=this.nextRequestId;do{this.nextRequestId+=1,this.nextRequestId>=Number.MAX_SAFE_INTEGER&&(this.nextRequestId=1)}while(this.requests.has(this.nextRequestId));return e}handleLibraryResponse(e,t,n,o){const s=this.requests.get(e);if(s)switch(o&&(this.requests.delete(e),this.checkResponseHandler()),n){case r.Success:s.resolve(t);break;case r.Error:s.reject(t);break;default:(n===r.AppNotify||n===r.AppRequest||n>=r.Custom)&&s.responseHandler&&s.responseHandler(t,n)}}static parseResult(e){const t=JSON.parse(e);if("error"in t)throw new i.TonClientError(t.error.code,t.error.message,t.error.data);return t.result}}e.exports.CommonBinaryBridge=u})),o.register("jjJ7Q",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.TonClientError=void 0;class n extends Error{constructor(e,t,n){super(t),this.code=e,this.data=n}}e.exports.TonClientError=n})),o.register("jZFoc",(function(n,r){e(n.exports,"libWeb",(()=>c),(e=>c=e));let o=null;function s(e){o&&o.debugLog&&o.debugLog(e)}async function i(){const e=Date.now();let t;if(o&&o.loadModule)t=await o.loadModule;else{const e=fetch(o&&o.binaryURL||"/eversdk.wasm");if(WebAssembly.compileStreaming)return s("compileStreaming binary"),await WebAssembly.compileStreaming(e);s("compile binary"),t=await WebAssembly.compile(await(await e).arrayBuffer())}await init(t),s("compile time "+(Date.now()-e))}function a(){let e;const r=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});r.decode();let o=new Uint8Array;function s(){return 0===o.byteLength&&(o=new Uint8Array(e.memory.buffer)),o}function a(e,t){return r.decode(s().subarray(e,e+t))}const c=new Array(32).fill(void 0);c.push(void 0,null,!0,!1);let u=c.length;function l(e){u===c.length&&c.push(c.length+1);const t=u;return u=c[t],c[t]=e,t}function d(e){return c[e]}function _(e){const t=d(e);return function(e){e<36||(c[e]=u,u=e)}(e),t}let p=0;const g=new TextEncoder("utf-8"),f="function"==typeof g.encodeInto?function(e,t){return g.encodeInto(e,t)}:function(e,t){const n=g.encode(e);return t.set(n),{read:e.length,written:n.length}};function b(e,t,n){if(void 0===n){const n=g.encode(e),r=t(n.length);return s().subarray(r,r+n.length).set(n),p=n.length,r}let r=e.length,o=t(r);const i=s();let a=0;for(;a<r;a++){const t=e.charCodeAt(a);if(t>127)break;i[o+a]=t}if(a!==r){0!==a&&(e=e.slice(a)),o=n(o,r,r=a+3*e.length);const t=s().subarray(o+a,o+r);a+=f(e,t).written}return p=a,o}function h(e){return null==e}let w=new Int32Array;function y(){return 0===w.byteLength&&(w=new Int32Array(e.memory.buffer)),w}let m=new Float64Array;let v=new BigInt64Array;function x(e){const t=typeof e;if("number"==t||"boolean"==t||null==e)return`${e}`;if("string"==t)return`"${e}"`;if("symbol"==t){const t=e.description;return null==t?"Symbol":`Symbol(${t})`}if("function"==t){const t=e.name;return"string"==typeof t&&t.length>0?`Function(${t})`:"Function"}if(Array.isArray(e)){const t=e.length;let n="[";t>0&&(n+=x(e[0]));for(let r=1;r<t;r++)n+=", "+x(e[r]);return n+="]",n}const n=/\[object ([^\]]+)\]/.exec(toString.call(e));let r;if(!(n.length>1))return toString.call(e);if(r=n[1],"Object"==r)try{return"Object("+JSON.stringify(e)+")"}catch(e){return"Object"}return e instanceof Error?`${e.name}: ${e.message}\n${e.stack}`:r}function A(t,n,r,o){const s={a:t,b:n,cnt:1,dtor:r},i=(...t)=>{s.cnt++;try{return o(s.a,s.b,...t)}finally{0==--s.cnt&&(e.__wbindgen_export_2.get(s.dtor)(s.a,s.b),s.a=0)}};return i.original=s,i}function S(t,n,r){e._dyn_core__ops__function__Fn__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h6d5e1b9883c4464f(t,n,l(r))}function C(t,n){e._dyn_core__ops__function__Fn_____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h301d59c5350efcda(t,n)}function O(t,n,r,o){const s={a:t,b:n,cnt:1,dtor:r},i=(...t)=>{s.cnt++;const n=s.a;s.a=0;try{return o(n,s.b,...t)}finally{0==--s.cnt?e.__wbindgen_export_2.get(s.dtor)(n,s.b):s.a=n}};return i.original=s,i}function E(t,n){e._dyn_core__ops__function__FnMut_____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h220f424c4a8cd253(t,n)}function k(t,n,r){try{const s=e.__wbindgen_add_to_stack_pointer(-16);e._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h66d95f0606fac985(s,t,n,l(r));var o=y()[s/4+0];if(y()[s/4+1])throw _(o)}finally{e.__wbindgen_add_to_stack_pointer(16)}}function I(t,n,r){e._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h85dfe11e5a5a7c31(t,n,l(r))}function M(t,n,r){e._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h989a80b4ed275554(t,n,l(r))}function T(t,n,r){e._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h3ab80c6a88c6785e(t,n,l(r))}function j(t){try{const o=e.__wbindgen_add_to_stack_pointer(-16),s=b(t,e.__wbindgen_malloc,e.__wbindgen_realloc),i=p;e.core_create_context(o,s,i);var n=y()[o/4+0],r=y()[o/4+1];return a(n,r)}finally{e.__wbindgen_add_to_stack_pointer(16),e.__wbindgen_free(n,r)}}function q(t,n){try{return t.apply(this,n)}catch(t){e.__wbindgen_exn_store(l(t))}}function P(e,t){return s().subarray(e/1,e/1+t)}function R(){const r={wbg:{}};return r.wbg.__wbg_new_8d2af00bc1e329ee=function(e,t){return l(new Error(a(e,t)))},r.wbg.__wbindgen_string_new=function(e,t){return l(a(e,t))},r.wbg.__wbindgen_memory=function(){return l(e.memory)},r.wbg.__wbg_buffer_3f3d764d4747d564=function(e){return l(d(e).buffer)},r.wbg.__wbg_newwithbyteoffsetandlength_d9aa266703cb98be=function(e,t,n){return l(new Uint8Array(d(e),t>>>0,n>>>0))},r.wbg.__wbindgen_object_drop_ref=function(e){_(e)},r.wbg.__wbg_newwithlength_7c42f7e738a9d5d3=function(e){return l(new Array(e>>>0))},r.wbg.__wbg_set_a68214f35c417fa9=function(e,t,n){d(e)[t>>>0]=_(n)},r.wbg.__wbg_newwithu8arraysequence_f863246af83e1785=function(){return q((function(e){return l(new Blob(d(e)))}),arguments)},r.wbg.__wbg_get_765201544a2b6869=function(){return q((function(e,t){return l(Reflect.get(d(e),d(t)))}),arguments)},r.wbg.__wbg_instanceof_ArrayBuffer_e5e48f4762c5610b=function(e){let t;try{t=d(e)instanceof ArrayBuffer}catch{t=!1}return t},r.wbg.__wbindgen_is_object=function(e){const t=d(e);return"object"==typeof t&&null!==t},r.wbg.__wbg_new_8c3f0052272a457a=function(e){return l(new Uint8Array(d(e)))},r.wbg.__wbindgen_object_clone_ref=function(e){return l(d(e))},r.wbg.__wbg_keys_0702294afaeb6044=function(e){return l(Object.keys(d(e)))},r.wbg.__wbg_length_6e3bbe7c8bd4dbd8=function(e){return d(e).length},r.wbg.__wbg_get_57245cc7d7c7619d=function(e,t){return l(d(e)[t>>>0])},r.wbg.__wbindgen_string_get=function(t,n){const r=d(n),o="string"==typeof r?r:void 0;var s=h(o)?0:b(o,e.__wbindgen_malloc,e.__wbindgen_realloc),i=p;y()[t/4+1]=i,y()[t/4+0]=s},r.wbg.__wbg_new0_a57059d72c5b7aee=function(){return l(new Date)},r.wbg.__wbg_getTime_cb82adb2556ed13e=function(e){return d(e).getTime()},r.wbg.__wbindgen_jsval_loose_eq=function(e,t){return d(e)==d(t)},r.wbg.__wbindgen_boolean_get=function(e){const t=d(e);return"boolean"==typeof t?t?1:0:2},r.wbg.__wbindgen_is_bigint=function(e){return"bigint"==typeof d(e)},r.wbg.__wbindgen_number_get=function(t,n){const r=d(n),o="number"==typeof r?r:void 0;(0===m.byteLength&&(m=new Float64Array(e.memory.buffer)),m)[t/8+1]=h(o)?0:o,y()[t/4+0]=!h(o)},r.wbg.__wbg_isSafeInteger_dfa0593e8d7ac35a=function(e){return Number.isSafeInteger(d(e))},r.wbg.__wbindgen_bigint_get_as_i64=function(t,n){const r=d(n),o="bigint"==typeof r?r:void 0;(0===v.byteLength&&(v=new BigInt64Array(e.memory.buffer)),v)[t/8+1]=h(o)?0n:o,y()[t/4+0]=!h(o)},r.wbg.__wbindgen_bigint_from_i64=function(e){return l(e)},r.wbg.__wbindgen_jsval_eq=function(e,t){return d(e)===d(t)},r.wbg.__wbindgen_bigint_from_u64=function(e){return l(BigInt.asUintN(64,e))},r.wbg.__wbindgen_error_new=function(e,t){return l(new Error(a(e,t)))},r.wbg.__wbg_isArray_27c46c67f498e15d=function(e){return Array.isArray(d(e))},r.wbg.__wbg_iterator_6f9d4f28845f426c=function(){return l(Symbol.iterator)},r.wbg.__wbindgen_in=function(e,t){return d(e)in d(t)},r.wbg.__wbg_entries_65a76a413fc91037=function(e){return l(Object.entries(d(e)))},r.wbg.__wbindgen_is_undefined=function(e){return void 0===d(e)},r.wbg.__wbindgen_is_null=function(e){return null===d(e)},r.wbg.__wbg_String_91fba7ded13ba54c=function(t,n){const r=b(String(d(n)),e.__wbindgen_malloc,e.__wbindgen_realloc),o=p;y()[t/4+1]=o,y()[t/4+0]=r},r.wbg.__wbindgen_number_new=function(e){return l(e)},r.wbg.__wbg_new_0b9bfdd97583284e=function(){return l(new Object)},r.wbg.__wbg_String_33099856e8a8246a=function(t,n){const r=b(String(d(n)),e.__wbindgen_malloc,e.__wbindgen_realloc),o=p;y()[t/4+1]=o,y()[t/4+0]=r},r.wbg.__wbg_coreresponsehandler_a52879454c60c764=function(e,t,n,r){var o,s,i,a;o=e>>>0,s=_(t),i=n>>>0,a=0!==r,L&&L(o,s,i,a)},r.wbg.__wbg_message_fe2af63ccc8985bc=function(e){return l(d(e).message)},r.wbg.__wbg_new_1d9a920c6bfc44a8=function(){return l(new Array)},r.wbg.__wbg_new_268f7b7dd3430798=function(){return l(new Map)},r.wbg.__wbg_set_933729cf5b66ac11=function(e,t,n){return l(d(e).set(d(t),d(n)))},r.wbg.__wbindgen_is_string=function(e){return"string"==typeof d(e)},r.wbg.__wbg_set_fbc33d020f507b72=function(e,t,n){d(e)[_(t)]=_(n)},r.wbg.__wbg_crypto_e1d53a1d73fb10b8=function(e){return l(d(e).crypto)},r.wbg.__wbg_process_038c26bf42b093f8=function(e){return l(d(e).process)},r.wbg.__wbg_versions_ab37218d2f0b24a8=function(e){return l(d(e).versions)},r.wbg.__wbg_node_080f4b19d15bc1fe=function(e){return l(d(e).node)},r.wbg.__wbg_require_78a3dcfbdba9cbce=function(){return q((function(){return l(n.require)}),arguments)},r.wbg.__wbindgen_is_function=function(e){return"function"==typeof d(e)},r.wbg.__wbg_call_168da88779e35f61=function(){return q((function(e,t,n){return l(d(e).call(d(t),d(n)))}),arguments)},r.wbg.__wbg_msCrypto_6e7d3e1f92610cbb=function(e){return l(d(e).msCrypto)},r.wbg.__wbg_newwithlength_f5933855e4f48a19=function(e){return l(new Uint8Array(e>>>0))},r.wbg.__wbg_transaction_cce96cbebd81fe1c=function(){return q((function(e,t,n,r){return l(d(e).transaction(a(t,n),_(r)))}),arguments)},r.wbg.__wbg_setoncomplete_3e57a8cec8327f66=function(e,t){d(e).oncomplete=d(t)},r.wbg.__wbg_setonerror_00051c0213f27b2c=function(e,t){d(e).onerror=d(t)},r.wbg.__wbg_setonabort_404bee3b9940d03d=function(e,t){d(e).onabort=d(t)},r.wbg.__wbg_item_52a6bec36314687b=function(t,n,r){const o=d(n).item(r>>>0);var s=h(o)?0:b(o,e.__wbindgen_malloc,e.__wbindgen_realloc),i=p;y()[t/4+1]=i,y()[t/4+0]=s},r.wbg.__wbg_objectStore_f17976b0e6377830=function(){return q((function(e,t,n){return l(d(e).objectStore(a(t,n)))}),arguments)},r.wbg.__wbg_target_bf704b7db7ad1387=function(e){const t=d(e).target;return h(t)?0:l(t)},r.wbg.__wbg_readyState_fb287f170113917c=function(e){return l(d(e).readyState)},r.wbg.__wbg_setonsuccess_5f71593bc51653a3=function(e,t){d(e).onsuccess=d(t)},r.wbg.__wbg_setonerror_d5771cc5bf9ea74c=function(e,t){d(e).onerror=d(t)},r.wbg.__wbindgen_cb_drop=function(e){const t=_(e).original;if(1==t.cnt--)return t.a=0,!0;return!1},r.wbg.__wbg_next_aaef7c8aa5e212ac=function(){return q((function(e){return l(d(e).next())}),arguments)},r.wbg.__wbg_done_1b73b0672e15f234=function(e){return d(e).done},r.wbg.__wbg_value_1ccc36bc03462d71=function(e){return l(d(e).value)},r.wbg.__wbg_call_97ae9d8645dc388b=function(){return q((function(e,t){return l(d(e).call(d(t)))}),arguments)},r.wbg.__wbg_next_579e583d33566a86=function(e){return l(d(e).next)},r.wbg.__wbg_self_6d479506f72c6a71=function(){return q((function(){return l(self.self)}),arguments)},r.wbg.__wbg_window_f2557cc78490aceb=function(){return q((function(){return l(window.window)}),arguments)},r.wbg.__wbg_globalThis_7f206bda628d5286=function(){return q((function(){return l(globalThis.globalThis)}),arguments)},r.wbg.__wbg_global_ba75c50d1cf384f4=function(){return q((function(){return l(t.global)}),arguments)},r.wbg.__wbg_newnoargs_b5b063fc6c2f0376=function(e,t){return l(new Function(a(e,t)))},r.wbg.__wbg_set_83db9690f9353e79=function(e,t,n){d(e).set(d(t),n>>>0)},r.wbg.__wbg_length_9e1ae1900cb0fbd5=function(e){return d(e).length},r.wbg.__wbg_set_bf3f89b92d5a34bf=function(){return q((function(e,t,n){return Reflect.set(d(e),d(t),d(n))}),arguments)},r.wbg.__wbg_self_7eede1f4488bf346=function(){return q((function(){return l(self.self)}),arguments)},r.wbg.__wbg_crypto_c909fb428dcbddb6=function(e){return l(d(e).crypto)},r.wbg.__wbg_msCrypto_511eefefbfc70ae4=function(e){return l(d(e).msCrypto)},r.wbg.__wbg_static_accessor_MODULE_ef3aa2eb251158a5=function(){return l(n)},r.wbg.__wbg_require_900d5c3984fe7703=function(e,t,n){return l(d(e).require(a(t,n)))},r.wbg.__wbg_getRandomValues_307049345d0bd88c=function(e){return l(d(e).getRandomValues)},r.wbg.__wbg_randomFillSync_85b3f4c52c56c313=function(e,t,n){d(e).randomFillSync(P(t,n))},r.wbg.__wbg_subarray_58ad4efbb5bcb886=function(e,t,n){return l(d(e).subarray(t>>>0,n>>>0))},r.wbg.__wbg_getRandomValues_cd175915511f705e=function(e,t){d(e).getRandomValues(d(t))},r.wbg.__wbg_randomFillSync_6894564c2c334c42=function(){return q((function(e,t,n){d(e).randomFillSync(P(t,n))}),arguments)},r.wbg.__wbg_getRandomValues_805f1c3d65988a5a=function(){return q((function(e,t){d(e).getRandomValues(d(t))}),arguments)},r.wbg.__wbg_instanceof_Uint8Array_971eeda69eb75003=function(e){let t;try{t=d(e)instanceof Uint8Array}catch{t=!1}return t},r.wbg.__wbg_put_84e7fc93eee27b28=function(){return q((function(e,t,n){return l(d(e).put(d(t),d(n)))}),arguments)},r.wbg.__wbg_delete_8abedd1043b4105d=function(){return q((function(e,t){return l(d(e).delete(d(t)))}),arguments)},r.wbg.__wbg_setTimeout_d6fcf0d9067b8e64=function(){return q((function(e,t,n){return d(e).setTimeout(d(t),n)}),arguments)},r.wbg.__wbg_clearTimeout_7d6f7bfeed34b348=function(e,t){d(e).clearTimeout(t)},r.wbg.__wbg_newwithstrandinit_05d7180788420c40=function(){return q((function(e,t,n){return l(new Request(a(e,t),d(n)))}),arguments)},r.wbg.__wbg_headers_85824e993aa739bf=function(e){return l(d(e).headers)},r.wbg.__wbg_set_992c1d31586b2957=function(){return q((function(e,t,n,r,o){d(e).set(a(t,n),a(r,o))}),arguments)},r.wbg.__wbg_fetch_0fe04905cccfc2aa=function(e,t){return l(d(e).fetch(d(t)))},r.wbg.__wbg_instanceof_Response_eaa426220848a39e=function(e){let t;try{t=d(e)instanceof Response}catch{t=!1}return t},r.wbg.__wbg_status_c4ef3dd591e63435=function(e){return d(e).status},r.wbg.__wbg_url_74285ddf2747cb3d=function(t,n){const r=b(d(n).url,e.__wbindgen_malloc,e.__wbindgen_realloc),o=p;y()[t/4+1]=o,y()[t/4+0]=r},r.wbg.__wbg_setonversionchange_840d65cd0888dfb0=function(e,t){d(e).onversionchange=d(t)},r.wbg.__wbg_setonupgradeneeded_17d0b9530f1e0cac=function(e,t){d(e).onupgradeneeded=d(t)},r.wbg.__wbg_setonblocked_e66d6be5c879980d=function(e,t){d(e).onblocked=d(t)},r.wbg.__wbg_message_a7af3ee0cc0fe28d=function(t,n){const r=b(d(n).message,e.__wbindgen_malloc,e.__wbindgen_realloc),o=p;y()[t/4+1]=o,y()[t/4+0]=r},r.wbg.__wbg_stringify_d6471d300ded9b68=function(){return q((function(e){return l(JSON.stringify(d(e)))}),arguments)},r.wbg.__wbg_Window_5684341ff6dfe3ad=function(e){return l(d(e).Window)},r.wbg.__wbg_WorkerGlobalScope_e0447ffcae8bb272=function(e){return l(d(e).WorkerGlobalScope)},r.wbg.__wbg_indexedDB_050f0962ab607ac5=function(){return q((function(e){const t=d(e).indexedDB;return h(t)?0:l(t)}),arguments)},r.wbg.__wbg_indexedDB_8d9e9ab4616df7f0=function(){return q((function(e){const t=d(e).indexedDB;return h(t)?0:l(t)}),arguments)},r.wbg.__wbg_open_a31c3fe1fdc244eb=function(){return q((function(e,t,n){return l(d(e).open(a(t,n)))}),arguments)},r.wbg.__wbg_newwithstr_d5b5f9b985ee84fb=function(){return q((function(e,t,n,r){return l(new WebSocket(a(e,t),a(n,r)))}),arguments)},r.wbg.__wbg_new_d29e507f6606de91=function(){return q((function(e,t){return l(new WebSocket(a(e,t)))}),arguments)},r.wbg.__wbg_setonmessage_c5a806b62a0c5607=function(e,t){d(e).onmessage=d(t)},r.wbg.__wbg_setonopen_9ce48dce57e549b5=function(e,t){d(e).onopen=d(t)},r.wbg.__wbg_setonerror_02393260b3e29972=function(e,t){d(e).onerror=d(t)},r.wbg.__wbg_send_80b256d87a6779e5=function(){return q((function(e,t,n){d(e).send(a(t,n))}),arguments)},r.wbg.__wbg_data_7b1f01f4e6a64fbe=function(e){return l(d(e).data)},r.wbg.__wbg_objectStoreNames_8c06c40d2b05141c=function(e){return l(d(e).objectStoreNames)},r.wbg.__wbg_createObjectStore_d3e2789c13dde1fc=function(){return q((function(e,t,n){return l(d(e).createObjectStore(a(t,n)))}),arguments)},r.wbg.__wbg_instanceof_Error_56b496a10a56de66=function(e){let t;try{t=d(e)instanceof Error}catch{t=!1}return t},r.wbg.__wbg_getTimezoneOffset_89bd4275e1ca8341=function(e){return d(e).getTimezoneOffset()},r.wbg.__wbindgen_debug_string=function(t,n){const r=b(x(d(n)),e.__wbindgen_malloc,e.__wbindgen_realloc),o=p;y()[t/4+1]=o,y()[t/4+0]=r},r.wbg.__wbindgen_throw=function(e,t){throw new Error(a(e,t))},r.wbg.__wbg_then_cedad20fbbd9418a=function(e,t,n){return l(d(e).then(d(t),d(n)))},r.wbg.__wbg_resolve_99fe17964f31ffc0=function(e){return l(Promise.resolve(d(e)))},r.wbg.__wbg_then_11f7a54d67b4bfad=function(e,t){return l(d(e).then(d(t)))},r.wbg.__wbg_result_9e399c14676970d9=function(){return q((function(e){return l(d(e).result)}),arguments)},r.wbg.__wbg_error_aacf5ac191e54ed0=function(){return q((function(e){const t=d(e).error;return h(t)?0:l(t)}),arguments)},r.wbg.__wbg_get_6285bf458a1ee758=function(){return q((function(e,t){return l(d(e).get(d(t)))}),arguments)},r.wbg.__wbg_instanceof_Window_acc97ff9f5d2c7b4=function(e){let t;try{t=!0}catch{t=!1}return t},r.wbg.__wbg_close_45d053bea59e7746=function(){return q((function(e){d(e).close()}),arguments)},r.wbg.__wbg_text_1169d752cc697903=function(){return q((function(e){return l(d(e).text())}),arguments)},r.wbg.__wbindgen_closure_wrapper942=function(e,t,n){return l(A(e,t,44,S))},r.wbg.__wbindgen_closure_wrapper953=function(e,t,n){return l(A(e,t,47,C))},r.wbg.__wbindgen_closure_wrapper6271=function(e,t,n){return l(O(e,t,238,E))},r.wbg.__wbindgen_closure_wrapper6565=function(e,t,n){return l(O(e,t,244,k))},r.wbg.__wbindgen_closure_wrapper7096=function(e,t,n){return l(O(e,t,247,I))},r.wbg.__wbindgen_closure_wrapper7097=function(e,t,n){return l(O(e,t,1206,M))},r.wbg.__wbindgen_closure_wrapper7098=function(e,t,n){return l(O(e,t,241,T))},r}function B(t,n){return e=t.exports,N.__wbindgen_wasm_module=n,v=new BigInt64Array,m=new Float64Array,w=new Int32Array,o=new Uint8Array,e}async function N(e){const t=R();("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));const{instance:n,module:r}=await async function(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(t){if("application/wasm"==e.headers.get("Content-Type"))throw t;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t)}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}(await e,t);return B(n,r)}async function F(e){if(e instanceof Blob)return await e.arrayBuffer();if("bigint"==typeof e)return e<Number.MAX_SAFE_INTEGER&&e>Number.MIN_SAFE_INTEGER?Number(e):e.toString();if("object"==typeof e&&null!==e){const t=Array.isArray(e)?[]:{};for(const n in e)t[n]=await F(e[n]);return t}return e}let D=[],L=null;return(async()=>{await N(await i());for(const e of D)e.resolve(j(e.configJson));D=null})(),Promise.resolve({setResponseParamsHandler:e=>{L=e},createContext:e=>null===D?Promise.resolve(j(e)):new Promise((t=>{D.push({configJson:e,resolve:t})})),destroyContext:t=>{!function(t){e.core_destroy_context(t)}(t)},sendRequestParams:(t,n,r,o)=>{(async()=>{!function(t,n,r,o){try{const i=e.__wbindgen_add_to_stack_pointer(-16),a=b(n,e.__wbindgen_malloc,e.__wbindgen_realloc),c=p;e.core_request(i,t,a,c,l(r),o);var s=y()[i/4+0];if(y()[i/4+1])throw _(s)}finally{e.__wbindgen_add_to_stack_pointer(16)}}(t,r,await F(o),n)})()}})}function c(){return o&&o.disableSeparateWorker?a():function(){const e=new Blob(["//****************************************************************** WRAPPER BEGIN\n\nlet wasm;\n\nconst cachedTextDecoder = new TextDecoder('utf-8', { ignoreBOM: true, fatal: true });\n\ncachedTextDecoder.decode();\n\nlet cachedUint8Memory0 = new Uint8Array();\n\nfunction getUint8Memory0() {\n    if (cachedUint8Memory0.byteLength === 0) {\n        cachedUint8Memory0 = new Uint8Array(wasm.memory.buffer);\n    }\n    return cachedUint8Memory0;\n}\n\nfunction getStringFromWasm0(ptr, len) {\n    return cachedTextDecoder.decode(getUint8Memory0().subarray(ptr, ptr + len));\n}\n\nconst heap = new Array(32).fill(undefined);\n\nheap.push(undefined, null, true, false);\n\nlet heap_next = heap.length;\n\nfunction addHeapObject(obj) {\n    if (heap_next === heap.length) heap.push(heap.length + 1);\n    const idx = heap_next;\n    heap_next = heap[idx];\n\n    heap[idx] = obj;\n    return idx;\n}\n\nfunction getObject(idx) { return heap[idx]; }\n\nfunction dropObject(idx) {\n    if (idx < 36) return;\n    heap[idx] = heap_next;\n    heap_next = idx;\n}\n\nfunction takeObject(idx) {\n    const ret = getObject(idx);\n    dropObject(idx);\n    return ret;\n}\n\nlet WASM_VECTOR_LEN = 0;\n\nconst cachedTextEncoder = new TextEncoder('utf-8');\n\nconst encodeString = (typeof cachedTextEncoder.encodeInto === 'function'\n    ? function (arg, view) {\n    return cachedTextEncoder.encodeInto(arg, view);\n}\n    : function (arg, view) {\n    const buf = cachedTextEncoder.encode(arg);\n    view.set(buf);\n    return {\n        read: arg.length,\n        written: buf.length\n    };\n});\n\nfunction passStringToWasm0(arg, malloc, realloc) {\n\n    if (realloc === undefined) {\n        const buf = cachedTextEncoder.encode(arg);\n        const ptr = malloc(buf.length);\n        getUint8Memory0().subarray(ptr, ptr + buf.length).set(buf);\n        WASM_VECTOR_LEN = buf.length;\n        return ptr;\n    }\n\n    let len = arg.length;\n    let ptr = malloc(len);\n\n    const mem = getUint8Memory0();\n\n    let offset = 0;\n\n    for (; offset < len; offset++) {\n        const code = arg.charCodeAt(offset);\n        if (code > 0x7F) break;\n        mem[ptr + offset] = code;\n    }\n\n    if (offset !== len) {\n        if (offset !== 0) {\n            arg = arg.slice(offset);\n        }\n        ptr = realloc(ptr, len, len = offset + arg.length * 3);\n        const view = getUint8Memory0().subarray(ptr + offset, ptr + len);\n        const ret = encodeString(arg, view);\n\n        offset += ret.written;\n    }\n\n    WASM_VECTOR_LEN = offset;\n    return ptr;\n}\n\nfunction isLikeNone(x) {\n    return x === undefined || x === null;\n}\n\nlet cachedInt32Memory0 = new Int32Array();\n\nfunction getInt32Memory0() {\n    if (cachedInt32Memory0.byteLength === 0) {\n        cachedInt32Memory0 = new Int32Array(wasm.memory.buffer);\n    }\n    return cachedInt32Memory0;\n}\n\nlet cachedFloat64Memory0 = new Float64Array();\n\nfunction getFloat64Memory0() {\n    if (cachedFloat64Memory0.byteLength === 0) {\n        cachedFloat64Memory0 = new Float64Array(wasm.memory.buffer);\n    }\n    return cachedFloat64Memory0;\n}\n\nlet cachedBigInt64Memory0 = new BigInt64Array();\n\nfunction getBigInt64Memory0() {\n    if (cachedBigInt64Memory0.byteLength === 0) {\n        cachedBigInt64Memory0 = new BigInt64Array(wasm.memory.buffer);\n    }\n    return cachedBigInt64Memory0;\n}\n\nfunction debugString(val) {\n    // primitive types\n    const type = typeof val;\n    if (type == 'number' || type == 'boolean' || val == null) {\n        return  `${val}`;\n    }\n    if (type == 'string') {\n        return `\"${val}\"`;\n    }\n    if (type == 'symbol') {\n        const description = val.description;\n        if (description == null) {\n            return 'Symbol';\n        } else {\n            return `Symbol(${description})`;\n        }\n    }\n    if (type == 'function') {\n        const name = val.name;\n        if (typeof name == 'string' && name.length > 0) {\n            return `Function(${name})`;\n        } else {\n            return 'Function';\n        }\n    }\n    // objects\n    if (Array.isArray(val)) {\n        const length = val.length;\n        let debug = '[';\n        if (length > 0) {\n            debug += debugString(val[0]);\n        }\n        for(let i = 1; i < length; i++) {\n            debug += ', ' + debugString(val[i]);\n        }\n        debug += ']';\n        return debug;\n    }\n    // Test for built-in\n    const builtInMatches = /\\[object ([^\\]]+)\\]/.exec(toString.call(val));\n    let className;\n    if (builtInMatches.length > 1) {\n        className = builtInMatches[1];\n    } else {\n        // Failed to match the standard '[object ClassName]'\n        return toString.call(val);\n    }\n    if (className == 'Object') {\n        // we're a user defined class or Object\n        // JSON.stringify avoids problems with cycles, and is generally much\n        // easier than looping through ownProperties of `val`.\n        try {\n            return 'Object(' + JSON.stringify(val) + ')';\n        } catch (_) {\n            return 'Object';\n        }\n    }\n    // errors\n    if (val instanceof Error) {\n        return `${val.name}: ${val.message}\\n${val.stack}`;\n    }\n    // TODO we could test for more things here, like `Set`s and `Map`s.\n    return className;\n}\n\nfunction makeClosure(arg0, arg1, dtor, f) {\n    const state = { a: arg0, b: arg1, cnt: 1, dtor };\n    const real = (...args) => {\n        // First up with a closure we increment the internal reference\n        // count. This ensures that the Rust closure environment won't\n        // be deallocated while we're invoking it.\n        state.cnt++;\n        try {\n            return f(state.a, state.b, ...args);\n        } finally {\n            if (--state.cnt === 0) {\n                wasm.__wbindgen_export_2.get(state.dtor)(state.a, state.b);\n                state.a = 0;\n\n            }\n        }\n    };\n    real.original = state;\n\n    return real;\n}\nfunction __wbg_adapter_50(arg0, arg1, arg2) {\n    wasm._dyn_core__ops__function__Fn__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h6d5e1b9883c4464f(arg0, arg1, addHeapObject(arg2));\n}\n\nfunction __wbg_adapter_53(arg0, arg1) {\n    wasm._dyn_core__ops__function__Fn_____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h301d59c5350efcda(arg0, arg1);\n}\n\nfunction makeMutClosure(arg0, arg1, dtor, f) {\n    const state = { a: arg0, b: arg1, cnt: 1, dtor };\n    const real = (...args) => {\n        // First up with a closure we increment the internal reference\n        // count. This ensures that the Rust closure environment won't\n        // be deallocated while we're invoking it.\n        state.cnt++;\n        const a = state.a;\n        state.a = 0;\n        try {\n            return f(a, state.b, ...args);\n        } finally {\n            if (--state.cnt === 0) {\n                wasm.__wbindgen_export_2.get(state.dtor)(a, state.b);\n\n            } else {\n                state.a = a;\n            }\n        }\n    };\n    real.original = state;\n\n    return real;\n}\nfunction __wbg_adapter_56(arg0, arg1) {\n    wasm._dyn_core__ops__function__FnMut_____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h220f424c4a8cd253(arg0, arg1);\n}\n\nfunction __wbg_adapter_59(arg0, arg1, arg2) {\n    try {\n        const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n        wasm._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h66d95f0606fac985(retptr, arg0, arg1, addHeapObject(arg2));\n        var r0 = getInt32Memory0()[retptr / 4 + 0];\n        var r1 = getInt32Memory0()[retptr / 4 + 1];\n        if (r1) {\n            throw takeObject(r0);\n        }\n    } finally {\n        wasm.__wbindgen_add_to_stack_pointer(16);\n    }\n}\n\nfunction __wbg_adapter_62(arg0, arg1, arg2) {\n    wasm._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h85dfe11e5a5a7c31(arg0, arg1, addHeapObject(arg2));\n}\n\nfunction __wbg_adapter_65(arg0, arg1, arg2) {\n    wasm._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h989a80b4ed275554(arg0, arg1, addHeapObject(arg2));\n}\n\nfunction __wbg_adapter_68(arg0, arg1, arg2) {\n    wasm._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h3ab80c6a88c6785e(arg0, arg1, addHeapObject(arg2));\n}\n\n/**\n* @param {string} config_json\n* @returns {string}\n*/\nfunction core_create_context(config_json) {\n    try {\n        const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n        const ptr0 = passStringToWasm0(config_json, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n        const len0 = WASM_VECTOR_LEN;\n        wasm.core_create_context(retptr, ptr0, len0);\n        var r0 = getInt32Memory0()[retptr / 4 + 0];\n        var r1 = getInt32Memory0()[retptr / 4 + 1];\n        return getStringFromWasm0(r0, r1);\n    } finally {\n        wasm.__wbindgen_add_to_stack_pointer(16);\n        wasm.__wbindgen_free(r0, r1);\n    }\n}\n\n/**\n* @param {number} context\n*/\nfunction core_destroy_context(context) {\n    wasm.core_destroy_context(context);\n}\n\n/**\n* @param {number} context\n* @param {string} function_name\n* @param {any} params\n* @param {number} request_id\n*/\nfunction core_request(context, function_name, params, request_id) {\n    try {\n        const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n        const ptr0 = passStringToWasm0(function_name, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n        const len0 = WASM_VECTOR_LEN;\n        wasm.core_request(retptr, context, ptr0, len0, addHeapObject(params), request_id);\n        var r0 = getInt32Memory0()[retptr / 4 + 0];\n        var r1 = getInt32Memory0()[retptr / 4 + 1];\n        if (r1) {\n            throw takeObject(r0);\n        }\n    } finally {\n        wasm.__wbindgen_add_to_stack_pointer(16);\n    }\n}\n\nfunction handleError(f, args) {\n    try {\n        return f.apply(this, args);\n    } catch (e) {\n        wasm.__wbindgen_exn_store(addHeapObject(e));\n    }\n}\n\nfunction getArrayU8FromWasm0(ptr, len) {\n    return getUint8Memory0().subarray(ptr / 1, ptr / 1 + len);\n}\n\nasync function load(module, imports) {\n    if (typeof Response === 'function' && module instanceof Response) {\n        if (typeof WebAssembly.instantiateStreaming === 'function') {\n            try {\n                return await WebAssembly.instantiateStreaming(module, imports);\n\n            } catch (e) {\n                if (module.headers.get('Content-Type') != 'application/wasm') {\n                    console.warn(\"`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\\n\", e);\n\n                } else {\n                    throw e;\n                }\n            }\n        }\n\n        const bytes = await module.arrayBuffer();\n        return await WebAssembly.instantiate(bytes, imports);\n\n    } else {\n        const instance = await WebAssembly.instantiate(module, imports);\n\n        if (instance instanceof WebAssembly.Instance) {\n            return { instance, module };\n\n        } else {\n            return instance;\n        }\n    }\n}\n\nfunction getImports() {\n    const imports = {};\n    imports.wbg = {};\n    imports.wbg.__wbg_new_8d2af00bc1e329ee = function(arg0, arg1) {\n        const ret = new Error(getStringFromWasm0(arg0, arg1));\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbindgen_string_new = function(arg0, arg1) {\n        const ret = getStringFromWasm0(arg0, arg1);\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbindgen_memory = function() {\n        const ret = wasm.memory;\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_buffer_3f3d764d4747d564 = function(arg0) {\n        const ret = getObject(arg0).buffer;\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_newwithbyteoffsetandlength_d9aa266703cb98be = function(arg0, arg1, arg2) {\n        const ret = new Uint8Array(getObject(arg0), arg1 >>> 0, arg2 >>> 0);\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbindgen_object_drop_ref = function(arg0) {\n        takeObject(arg0);\n    };\n    imports.wbg.__wbg_newwithlength_7c42f7e738a9d5d3 = function(arg0) {\n        const ret = new Array(arg0 >>> 0);\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_set_a68214f35c417fa9 = function(arg0, arg1, arg2) {\n        getObject(arg0)[arg1 >>> 0] = takeObject(arg2);\n    };\n    imports.wbg.__wbg_newwithu8arraysequence_f863246af83e1785 = function() { return handleError(function (arg0) {\n        const ret = new Blob(getObject(arg0));\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbg_get_765201544a2b6869 = function() { return handleError(function (arg0, arg1) {\n        const ret = Reflect.get(getObject(arg0), getObject(arg1));\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbg_instanceof_ArrayBuffer_e5e48f4762c5610b = function(arg0) {\n        let result;\n        try {\n            result = getObject(arg0) instanceof ArrayBuffer;\n        } catch {\n            result = false;\n        }\n        const ret = result;\n        return ret;\n    };\n    imports.wbg.__wbindgen_is_object = function(arg0) {\n        const val = getObject(arg0);\n        const ret = typeof(val) === 'object' && val !== null;\n        return ret;\n    };\n    imports.wbg.__wbg_new_8c3f0052272a457a = function(arg0) {\n        const ret = new Uint8Array(getObject(arg0));\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbindgen_object_clone_ref = function(arg0) {\n        const ret = getObject(arg0);\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_keys_0702294afaeb6044 = function(arg0) {\n        const ret = Object.keys(getObject(arg0));\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_length_6e3bbe7c8bd4dbd8 = function(arg0) {\n        const ret = getObject(arg0).length;\n        return ret;\n    };\n    imports.wbg.__wbg_get_57245cc7d7c7619d = function(arg0, arg1) {\n        const ret = getObject(arg0)[arg1 >>> 0];\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbindgen_string_get = function(arg0, arg1) {\n        const obj = getObject(arg1);\n        const ret = typeof(obj) === 'string' ? obj : undefined;\n        var ptr0 = isLikeNone(ret) ? 0 : passStringToWasm0(ret, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n        var len0 = WASM_VECTOR_LEN;\n        getInt32Memory0()[arg0 / 4 + 1] = len0;\n        getInt32Memory0()[arg0 / 4 + 0] = ptr0;\n    };\n    imports.wbg.__wbg_new0_a57059d72c5b7aee = function() {\n        const ret = new Date();\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_getTime_cb82adb2556ed13e = function(arg0) {\n        const ret = getObject(arg0).getTime();\n        return ret;\n    };\n    imports.wbg.__wbindgen_jsval_loose_eq = function(arg0, arg1) {\n        const ret = getObject(arg0) == getObject(arg1);\n        return ret;\n    };\n    imports.wbg.__wbindgen_boolean_get = function(arg0) {\n        const v = getObject(arg0);\n        const ret = typeof(v) === 'boolean' ? (v ? 1 : 0) : 2;\n        return ret;\n    };\n    imports.wbg.__wbindgen_is_bigint = function(arg0) {\n        const ret = typeof(getObject(arg0)) === 'bigint';\n        return ret;\n    };\n    imports.wbg.__wbindgen_number_get = function(arg0, arg1) {\n        const obj = getObject(arg1);\n        const ret = typeof(obj) === 'number' ? obj : undefined;\n        getFloat64Memory0()[arg0 / 8 + 1] = isLikeNone(ret) ? 0 : ret;\n        getInt32Memory0()[arg0 / 4 + 0] = !isLikeNone(ret);\n    };\n    imports.wbg.__wbg_isSafeInteger_dfa0593e8d7ac35a = function(arg0) {\n        const ret = Number.isSafeInteger(getObject(arg0));\n        return ret;\n    };\n    imports.wbg.__wbindgen_bigint_get_as_i64 = function(arg0, arg1) {\n        const v = getObject(arg1);\n        const ret = typeof(v) === 'bigint' ? v : undefined;\n        getBigInt64Memory0()[arg0 / 8 + 1] = isLikeNone(ret) ? 0n : ret;\n        getInt32Memory0()[arg0 / 4 + 0] = !isLikeNone(ret);\n    };\n    imports.wbg.__wbindgen_bigint_from_i64 = function(arg0) {\n        const ret = arg0;\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbindgen_jsval_eq = function(arg0, arg1) {\n        const ret = getObject(arg0) === getObject(arg1);\n        return ret;\n    };\n    imports.wbg.__wbindgen_bigint_from_u64 = function(arg0) {\n        const ret = BigInt.asUintN(64, arg0);\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbindgen_error_new = function(arg0, arg1) {\n        const ret = new Error(getStringFromWasm0(arg0, arg1));\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_isArray_27c46c67f498e15d = function(arg0) {\n        const ret = Array.isArray(getObject(arg0));\n        return ret;\n    };\n    imports.wbg.__wbg_iterator_6f9d4f28845f426c = function() {\n        const ret = Symbol.iterator;\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbindgen_in = function(arg0, arg1) {\n        const ret = getObject(arg0) in getObject(arg1);\n        return ret;\n    };\n    imports.wbg.__wbg_entries_65a76a413fc91037 = function(arg0) {\n        const ret = Object.entries(getObject(arg0));\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbindgen_is_undefined = function(arg0) {\n        const ret = getObject(arg0) === undefined;\n        return ret;\n    };\n    imports.wbg.__wbindgen_is_null = function(arg0) {\n        const ret = getObject(arg0) === null;\n        return ret;\n    };\n    imports.wbg.__wbg_String_91fba7ded13ba54c = function(arg0, arg1) {\n        const ret = String(getObject(arg1));\n        const ptr0 = passStringToWasm0(ret, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n        const len0 = WASM_VECTOR_LEN;\n        getInt32Memory0()[arg0 / 4 + 1] = len0;\n        getInt32Memory0()[arg0 / 4 + 0] = ptr0;\n    };\n    imports.wbg.__wbindgen_number_new = function(arg0) {\n        const ret = arg0;\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_new_0b9bfdd97583284e = function() {\n        const ret = new Object();\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_String_33099856e8a8246a = function(arg0, arg1) {\n        const ret = String(getObject(arg1));\n        const ptr0 = passStringToWasm0(ret, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n        const len0 = WASM_VECTOR_LEN;\n        getInt32Memory0()[arg0 / 4 + 1] = len0;\n        getInt32Memory0()[arg0 / 4 + 0] = ptr0;\n    };\n    imports.wbg.__wbg_coreresponsehandler_a52879454c60c764 = function(arg0, arg1, arg2, arg3) {\n        core_response_handler(arg0 >>> 0, takeObject(arg1), arg2 >>> 0, arg3 !== 0);\n    };\n    imports.wbg.__wbg_message_fe2af63ccc8985bc = function(arg0) {\n        const ret = getObject(arg0).message;\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_new_1d9a920c6bfc44a8 = function() {\n        const ret = new Array();\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_new_268f7b7dd3430798 = function() {\n        const ret = new Map();\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_set_933729cf5b66ac11 = function(arg0, arg1, arg2) {\n        const ret = getObject(arg0).set(getObject(arg1), getObject(arg2));\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbindgen_is_string = function(arg0) {\n        const ret = typeof(getObject(arg0)) === 'string';\n        return ret;\n    };\n    imports.wbg.__wbg_set_fbc33d020f507b72 = function(arg0, arg1, arg2) {\n        getObject(arg0)[takeObject(arg1)] = takeObject(arg2);\n    };\n    imports.wbg.__wbg_crypto_e1d53a1d73fb10b8 = function(arg0) {\n        const ret = getObject(arg0).crypto;\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_process_038c26bf42b093f8 = function(arg0) {\n        const ret = getObject(arg0).process;\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_versions_ab37218d2f0b24a8 = function(arg0) {\n        const ret = getObject(arg0).versions;\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_node_080f4b19d15bc1fe = function(arg0) {\n        const ret = getObject(arg0).node;\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_require_78a3dcfbdba9cbce = function() { return handleError(function () {\n        const ret = module.require;\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbindgen_is_function = function(arg0) {\n        const ret = typeof(getObject(arg0)) === 'function';\n        return ret;\n    };\n    imports.wbg.__wbg_call_168da88779e35f61 = function() { return handleError(function (arg0, arg1, arg2) {\n        const ret = getObject(arg0).call(getObject(arg1), getObject(arg2));\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbg_msCrypto_6e7d3e1f92610cbb = function(arg0) {\n        const ret = getObject(arg0).msCrypto;\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_newwithlength_f5933855e4f48a19 = function(arg0) {\n        const ret = new Uint8Array(arg0 >>> 0);\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_transaction_cce96cbebd81fe1c = function() { return handleError(function (arg0, arg1, arg2, arg3) {\n        const ret = getObject(arg0).transaction(getStringFromWasm0(arg1, arg2), takeObject(arg3));\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbg_setoncomplete_3e57a8cec8327f66 = function(arg0, arg1) {\n        getObject(arg0).oncomplete = getObject(arg1);\n    };\n    imports.wbg.__wbg_setonerror_00051c0213f27b2c = function(arg0, arg1) {\n        getObject(arg0).onerror = getObject(arg1);\n    };\n    imports.wbg.__wbg_setonabort_404bee3b9940d03d = function(arg0, arg1) {\n        getObject(arg0).onabort = getObject(arg1);\n    };\n    imports.wbg.__wbg_item_52a6bec36314687b = function(arg0, arg1, arg2) {\n        const ret = getObject(arg1).item(arg2 >>> 0);\n        var ptr0 = isLikeNone(ret) ? 0 : passStringToWasm0(ret, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n        var len0 = WASM_VECTOR_LEN;\n        getInt32Memory0()[arg0 / 4 + 1] = len0;\n        getInt32Memory0()[arg0 / 4 + 0] = ptr0;\n    };\n    imports.wbg.__wbg_objectStore_f17976b0e6377830 = function() { return handleError(function (arg0, arg1, arg2) {\n        const ret = getObject(arg0).objectStore(getStringFromWasm0(arg1, arg2));\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbg_target_bf704b7db7ad1387 = function(arg0) {\n        const ret = getObject(arg0).target;\n        return isLikeNone(ret) ? 0 : addHeapObject(ret);\n    };\n    imports.wbg.__wbg_readyState_fb287f170113917c = function(arg0) {\n        const ret = getObject(arg0).readyState;\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_setonsuccess_5f71593bc51653a3 = function(arg0, arg1) {\n        getObject(arg0).onsuccess = getObject(arg1);\n    };\n    imports.wbg.__wbg_setonerror_d5771cc5bf9ea74c = function(arg0, arg1) {\n        getObject(arg0).onerror = getObject(arg1);\n    };\n    imports.wbg.__wbindgen_cb_drop = function(arg0) {\n        const obj = takeObject(arg0).original;\n        if (obj.cnt-- == 1) {\n            obj.a = 0;\n            return true;\n        }\n        const ret = false;\n        return ret;\n    };\n    imports.wbg.__wbg_next_aaef7c8aa5e212ac = function() { return handleError(function (arg0) {\n        const ret = getObject(arg0).next();\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbg_done_1b73b0672e15f234 = function(arg0) {\n        const ret = getObject(arg0).done;\n        return ret;\n    };\n    imports.wbg.__wbg_value_1ccc36bc03462d71 = function(arg0) {\n        const ret = getObject(arg0).value;\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_call_97ae9d8645dc388b = function() { return handleError(function (arg0, arg1) {\n        const ret = getObject(arg0).call(getObject(arg1));\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbg_next_579e583d33566a86 = function(arg0) {\n        const ret = getObject(arg0).next;\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_self_6d479506f72c6a71 = function() { return handleError(function () {\n        const ret = self.self;\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbg_window_f2557cc78490aceb = function() { return handleError(function () {\n        const ret = window.window;\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbg_globalThis_7f206bda628d5286 = function() { return handleError(function () {\n        const ret = globalThis.globalThis;\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbg_global_ba75c50d1cf384f4 = function() { return handleError(function () {\n        const ret = global.global;\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbg_newnoargs_b5b063fc6c2f0376 = function(arg0, arg1) {\n        const ret = new Function(getStringFromWasm0(arg0, arg1));\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_set_83db9690f9353e79 = function(arg0, arg1, arg2) {\n        getObject(arg0).set(getObject(arg1), arg2 >>> 0);\n    };\n    imports.wbg.__wbg_length_9e1ae1900cb0fbd5 = function(arg0) {\n        const ret = getObject(arg0).length;\n        return ret;\n    };\n    imports.wbg.__wbg_set_bf3f89b92d5a34bf = function() { return handleError(function (arg0, arg1, arg2) {\n        const ret = Reflect.set(getObject(arg0), getObject(arg1), getObject(arg2));\n        return ret;\n    }, arguments) };\n    imports.wbg.__wbg_self_7eede1f4488bf346 = function() { return handleError(function () {\n        const ret = self.self;\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbg_crypto_c909fb428dcbddb6 = function(arg0) {\n        const ret = getObject(arg0).crypto;\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_msCrypto_511eefefbfc70ae4 = function(arg0) {\n        const ret = getObject(arg0).msCrypto;\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_static_accessor_MODULE_ef3aa2eb251158a5 = function() {\n        const ret = module;\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_require_900d5c3984fe7703 = function(arg0, arg1, arg2) {\n        const ret = getObject(arg0).require(getStringFromWasm0(arg1, arg2));\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_getRandomValues_307049345d0bd88c = function(arg0) {\n        const ret = getObject(arg0).getRandomValues;\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_randomFillSync_85b3f4c52c56c313 = function(arg0, arg1, arg2) {\n        getObject(arg0).randomFillSync(getArrayU8FromWasm0(arg1, arg2));\n    };\n    imports.wbg.__wbg_subarray_58ad4efbb5bcb886 = function(arg0, arg1, arg2) {\n        const ret = getObject(arg0).subarray(arg1 >>> 0, arg2 >>> 0);\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_getRandomValues_cd175915511f705e = function(arg0, arg1) {\n        getObject(arg0).getRandomValues(getObject(arg1));\n    };\n    imports.wbg.__wbg_randomFillSync_6894564c2c334c42 = function() { return handleError(function (arg0, arg1, arg2) {\n        getObject(arg0).randomFillSync(getArrayU8FromWasm0(arg1, arg2));\n    }, arguments) };\n    imports.wbg.__wbg_getRandomValues_805f1c3d65988a5a = function() { return handleError(function (arg0, arg1) {\n        getObject(arg0).getRandomValues(getObject(arg1));\n    }, arguments) };\n    imports.wbg.__wbg_instanceof_Uint8Array_971eeda69eb75003 = function(arg0) {\n        let result;\n        try {\n            result = getObject(arg0) instanceof Uint8Array;\n        } catch {\n            result = false;\n        }\n        const ret = result;\n        return ret;\n    };\n    imports.wbg.__wbg_put_84e7fc93eee27b28 = function() { return handleError(function (arg0, arg1, arg2) {\n        const ret = getObject(arg0).put(getObject(arg1), getObject(arg2));\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbg_delete_8abedd1043b4105d = function() { return handleError(function (arg0, arg1) {\n        const ret = getObject(arg0).delete(getObject(arg1));\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbg_setTimeout_d6fcf0d9067b8e64 = function() { return handleError(function (arg0, arg1, arg2) {\n        const ret = getObject(arg0).setTimeout(getObject(arg1), arg2);\n        return ret;\n    }, arguments) };\n    imports.wbg.__wbg_clearTimeout_7d6f7bfeed34b348 = function(arg0, arg1) {\n        getObject(arg0).clearTimeout(arg1);\n    };\n    imports.wbg.__wbg_newwithstrandinit_05d7180788420c40 = function() { return handleError(function (arg0, arg1, arg2) {\n        const ret = new Request(getStringFromWasm0(arg0, arg1), getObject(arg2));\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbg_headers_85824e993aa739bf = function(arg0) {\n        const ret = getObject(arg0).headers;\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_set_992c1d31586b2957 = function() { return handleError(function (arg0, arg1, arg2, arg3, arg4) {\n        getObject(arg0).set(getStringFromWasm0(arg1, arg2), getStringFromWasm0(arg3, arg4));\n    }, arguments) };\n    imports.wbg.__wbg_fetch_0fe04905cccfc2aa = function(arg0, arg1) {\n        const ret = getObject(arg0).fetch(getObject(arg1));\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_instanceof_Response_eaa426220848a39e = function(arg0) {\n        let result;\n        try {\n            result = getObject(arg0) instanceof Response;\n        } catch {\n            result = false;\n        }\n        const ret = result;\n        return ret;\n    };\n    imports.wbg.__wbg_status_c4ef3dd591e63435 = function(arg0) {\n        const ret = getObject(arg0).status;\n        return ret;\n    };\n    imports.wbg.__wbg_url_74285ddf2747cb3d = function(arg0, arg1) {\n        const ret = getObject(arg1).url;\n        const ptr0 = passStringToWasm0(ret, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n        const len0 = WASM_VECTOR_LEN;\n        getInt32Memory0()[arg0 / 4 + 1] = len0;\n        getInt32Memory0()[arg0 / 4 + 0] = ptr0;\n    };\n    imports.wbg.__wbg_setonversionchange_840d65cd0888dfb0 = function(arg0, arg1) {\n        getObject(arg0).onversionchange = getObject(arg1);\n    };\n    imports.wbg.__wbg_setonupgradeneeded_17d0b9530f1e0cac = function(arg0, arg1) {\n        getObject(arg0).onupgradeneeded = getObject(arg1);\n    };\n    imports.wbg.__wbg_setonblocked_e66d6be5c879980d = function(arg0, arg1) {\n        getObject(arg0).onblocked = getObject(arg1);\n    };\n    imports.wbg.__wbg_message_a7af3ee0cc0fe28d = function(arg0, arg1) {\n        const ret = getObject(arg1).message;\n        const ptr0 = passStringToWasm0(ret, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n        const len0 = WASM_VECTOR_LEN;\n        getInt32Memory0()[arg0 / 4 + 1] = len0;\n        getInt32Memory0()[arg0 / 4 + 0] = ptr0;\n    };\n    imports.wbg.__wbg_stringify_d6471d300ded9b68 = function() { return handleError(function (arg0) {\n        const ret = JSON.stringify(getObject(arg0));\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbg_Window_5684341ff6dfe3ad = function(arg0) {\n        const ret = getObject(arg0).Window;\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_WorkerGlobalScope_e0447ffcae8bb272 = function(arg0) {\n        const ret = getObject(arg0).WorkerGlobalScope;\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_indexedDB_050f0962ab607ac5 = function() { return handleError(function (arg0) {\n        const ret = getObject(arg0).indexedDB;\n        return isLikeNone(ret) ? 0 : addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbg_indexedDB_8d9e9ab4616df7f0 = function() { return handleError(function (arg0) {\n        const ret = getObject(arg0).indexedDB;\n        return isLikeNone(ret) ? 0 : addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbg_open_a31c3fe1fdc244eb = function() { return handleError(function (arg0, arg1, arg2) {\n        const ret = getObject(arg0).open(getStringFromWasm0(arg1, arg2));\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbg_newwithstr_d5b5f9b985ee84fb = function() { return handleError(function (arg0, arg1, arg2, arg3) {\n        const ret = new WebSocket(getStringFromWasm0(arg0, arg1), getStringFromWasm0(arg2, arg3));\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbg_new_d29e507f6606de91 = function() { return handleError(function (arg0, arg1) {\n        const ret = new WebSocket(getStringFromWasm0(arg0, arg1));\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbg_setonmessage_c5a806b62a0c5607 = function(arg0, arg1) {\n        getObject(arg0).onmessage = getObject(arg1);\n    };\n    imports.wbg.__wbg_setonopen_9ce48dce57e549b5 = function(arg0, arg1) {\n        getObject(arg0).onopen = getObject(arg1);\n    };\n    imports.wbg.__wbg_setonerror_02393260b3e29972 = function(arg0, arg1) {\n        getObject(arg0).onerror = getObject(arg1);\n    };\n    imports.wbg.__wbg_send_80b256d87a6779e5 = function() { return handleError(function (arg0, arg1, arg2) {\n        getObject(arg0).send(getStringFromWasm0(arg1, arg2));\n    }, arguments) };\n    imports.wbg.__wbg_data_7b1f01f4e6a64fbe = function(arg0) {\n        const ret = getObject(arg0).data;\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_objectStoreNames_8c06c40d2b05141c = function(arg0) {\n        const ret = getObject(arg0).objectStoreNames;\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_createObjectStore_d3e2789c13dde1fc = function() { return handleError(function (arg0, arg1, arg2) {\n        const ret = getObject(arg0).createObjectStore(getStringFromWasm0(arg1, arg2));\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbg_instanceof_Error_56b496a10a56de66 = function(arg0) {\n        let result;\n        try {\n            result = getObject(arg0) instanceof Error;\n        } catch {\n            result = false;\n        }\n        const ret = result;\n        return ret;\n    };\n    imports.wbg.__wbg_getTimezoneOffset_89bd4275e1ca8341 = function(arg0) {\n        const ret = getObject(arg0).getTimezoneOffset();\n        return ret;\n    };\n    imports.wbg.__wbindgen_debug_string = function(arg0, arg1) {\n        const ret = debugString(getObject(arg1));\n        const ptr0 = passStringToWasm0(ret, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n        const len0 = WASM_VECTOR_LEN;\n        getInt32Memory0()[arg0 / 4 + 1] = len0;\n        getInt32Memory0()[arg0 / 4 + 0] = ptr0;\n    };\n    imports.wbg.__wbindgen_throw = function(arg0, arg1) {\n        throw new Error(getStringFromWasm0(arg0, arg1));\n    };\n    imports.wbg.__wbg_then_cedad20fbbd9418a = function(arg0, arg1, arg2) {\n        const ret = getObject(arg0).then(getObject(arg1), getObject(arg2));\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_resolve_99fe17964f31ffc0 = function(arg0) {\n        const ret = Promise.resolve(getObject(arg0));\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_then_11f7a54d67b4bfad = function(arg0, arg1) {\n        const ret = getObject(arg0).then(getObject(arg1));\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_result_9e399c14676970d9 = function() { return handleError(function (arg0) {\n        const ret = getObject(arg0).result;\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbg_error_aacf5ac191e54ed0 = function() { return handleError(function (arg0) {\n        const ret = getObject(arg0).error;\n        return isLikeNone(ret) ? 0 : addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbg_get_6285bf458a1ee758 = function() { return handleError(function (arg0, arg1) {\n        const ret = getObject(arg0).get(getObject(arg1));\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbg_instanceof_Window_acc97ff9f5d2c7b4 = function(arg0) {\n        let result;\n        try {\n            result = true;\n        } catch {\n            result = false;\n        }\n        const ret = result;\n        return ret;\n    };\n    imports.wbg.__wbg_close_45d053bea59e7746 = function() { return handleError(function (arg0) {\n        getObject(arg0).close();\n    }, arguments) };\n    imports.wbg.__wbg_text_1169d752cc697903 = function() { return handleError(function (arg0) {\n        const ret = getObject(arg0).text();\n        return addHeapObject(ret);\n    }, arguments) };\n    imports.wbg.__wbindgen_closure_wrapper942 = function(arg0, arg1, arg2) {\n        const ret = makeClosure(arg0, arg1, 44, __wbg_adapter_50);\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbindgen_closure_wrapper953 = function(arg0, arg1, arg2) {\n        const ret = makeClosure(arg0, arg1, 47, __wbg_adapter_53);\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbindgen_closure_wrapper6271 = function(arg0, arg1, arg2) {\n        const ret = makeMutClosure(arg0, arg1, 238, __wbg_adapter_56);\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbindgen_closure_wrapper6565 = function(arg0, arg1, arg2) {\n        const ret = makeMutClosure(arg0, arg1, 244, __wbg_adapter_59);\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbindgen_closure_wrapper7096 = function(arg0, arg1, arg2) {\n        const ret = makeMutClosure(arg0, arg1, 247, __wbg_adapter_62);\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbindgen_closure_wrapper7097 = function(arg0, arg1, arg2) {\n        const ret = makeMutClosure(arg0, arg1, 1206, __wbg_adapter_65);\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbindgen_closure_wrapper7098 = function(arg0, arg1, arg2) {\n        const ret = makeMutClosure(arg0, arg1, 241, __wbg_adapter_68);\n        return addHeapObject(ret);\n    };\n\n    return imports;\n}\n\nfunction initMemory(imports, maybe_memory) {\n\n}\n\nfunction finalizeInit(instance, module) {\n    wasm = instance.exports;\n    init.__wbindgen_wasm_module = module;\n    cachedBigInt64Memory0 = new BigInt64Array();\n    cachedFloat64Memory0 = new Float64Array();\n    cachedInt32Memory0 = new Int32Array();\n    cachedUint8Memory0 = new Uint8Array();\n\n\n    return wasm;\n}\n\nfunction initSync(module) {\n    const imports = getImports();\n\n    initMemory(imports);\n\n    if (!(module instanceof WebAssembly.Module)) {\n        module = new WebAssembly.Module(module);\n    }\n\n    const instance = new WebAssembly.Instance(module, imports);\n\n    return finalizeInit(instance, module);\n}\n\nasync function init(input) {\n    if (typeof input === 'undefined') {    }\n    const imports = getImports();\n\n    if (typeof input === 'string' || (typeof Request === 'function' && input instanceof Request) || (typeof URL === 'function' && input instanceof URL)) {\n        input = fetch(input);\n    }\n\n    initMemory(imports);\n\n    const { instance, module } = await load(await input, imports);\n\n    return finalizeInit(instance, module);\n}\n\n\n//****************************************************************** WRAPPER END\n\nfunction replaceUndefinedWithNulls(value) {\n    if (value === undefined) {\n        return null;\n    }\n    if (value instanceof Blob) {\n        return value;\n    }\n    if (typeof value === \"object\" && value !== null) {\n        const result = Array.isArray(value) ? [] : {};\n        for (const key in value) {\n            result[key] = replaceUndefinedWithNulls(value[key]);\n        }\n        return result;\n    }\n    return value;\n};\n\nfunction core_response_handler(request_id, params, response_type, finished) {\n    postMessage({\n        type: 'response',\n        requestId: request_id,\n        params: replaceUndefinedWithNulls(params),\n        responseType: response_type,\n        finished,\n    });\n}\n\nasync function replaceBlobsWithArrayBuffers(value) {\n    if (value instanceof Blob) {\n        return await value.arrayBuffer();\n    }\n    if (typeof value === \"bigint\") {\n        if (value < Number.MAX_SAFE_INTEGER && value > Number.MIN_SAFE_INTEGER) {\n            return Number(value);\n        } else {\n            return value.toString();\n        }\n    }\n    if (typeof value === \"object\" && value !== null) {\n        const result = Array.isArray(value) ? [] : {};\n        for (const key in value) {\n            result[key] = await replaceBlobsWithArrayBuffers(value[key]);\n        }\n        return result;\n    }\n    return value;\n}\n\nself.onmessage = (e) => {\n    const message = e.data;\n    switch (message.type) {\n    case 'init':\n        (async () => {\n            await init(message.wasmModule);\n            postMessage({ type: 'init' });\n        })();\n        break;\n\n    case 'createContext':\n        postMessage({\n            type: 'createContext',\n            result: core_create_context(message.configJson),\n            requestId: message.requestId,\n        });\n        break;\n\n    case 'destroyContext':\n        core_destroy_context(message.context);\n        postMessage({\n            type: 'destroyContext'\n        });\n        break;\n\n    case 'request':\n        (async () => {\n            core_request(\n                message.context,\n                message.functionName,\n                await replaceBlobsWithArrayBuffers(message.functionParams),\n                message.requestId,\n            );\n        })();\n        break;\n    }\n};\n"],{type:"application/javascript"}),t=URL.createObjectURL(e),n=new Worker(t);let r=1;const o=new Map;let s=!1,a=null;return n.onmessage=e=>{const t=e.data;switch(t.type){case"init":s=!0;for(const[e,t]of o.entries())n.postMessage({type:"createContext",requestId:e,configJson:t.configJson});break;case"createContext":const e=o.get(t.requestId);e&&(o.delete(t.requestId),e.resolve(t.result));break;case"destroyContext":break;case"response":a&&a(t.requestId,t.params,t.responseType,t.finished)}},n.onerror=e=>{console.log(`Error from Web Worker: ${e.message}`)},(async()=>{n.postMessage({type:"init",wasmModule:await i()})})(),Promise.resolve({setResponseParamsHandler:e=>{a=e},createContext:e=>new Promise((t=>{const i=r;r+=1,o.set(i,{configJson:e,resolve:t}),s&&n.postMessage({type:"createContext",requestId:i,configJson:e})})),destroyContext:e=>{n.postMessage({type:"destroyContext",context:e})},sendRequestParams:(e,t,r,o)=>{n.postMessage({type:"request",context:e,requestId:t,functionName:r,functionParams:o})}})}()}})),o.register("1wmcB",(function(e,t){var n=e.exports&&e.exports.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,s){function i(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.DefaultGiverContract=e.exports.Account=e.exports.AccountType=e.exports.AccountError=void 0;var r,s,i,a,c=o("2q1zK");(s=r||(r={}))[s.MISSING_TVC=0]="MISSING_TVC",s[s.ACC_NOT_EXISTS=1]="ACC_NOT_EXISTS";class u extends Error{constructor(e){super(e.message),this.code=e.code}static missingTVC(){return new u({code:r.MISSING_TVC,message:"Can't calculate deploy params: missing required TVC."})}static missingBOC(){return new u({code:r.ACC_NOT_EXISTS,message:'Account has an empty BOC. Possible reason is: account was deleted (has account type "NonExist")'})}}e.exports.AccountError=u,(a=i=e.exports.AccountType||(e.exports.AccountType={}))[a.uninit=0]="uninit",a[a.active=1]="active",a[a.frozen=2]="frozen",a[a.nonExist=3]="nonExist";class l{static findGiverForClient(e){var t;return null===(t=this.giversByClient.find((t=>t.client===e)))||void 0===t?void 0:t.giver}static setGiverForClient(e,t){const n=this.giversByClient.findIndex((t=>t.client===e));n>=0?t?this.giversByClient[n].giver=t:this.giversByClient.splice(n,1):t&&this.giversByClient.push({client:e,giver:t})}static createGiver(t){return n(this,void 0,void 0,(function*(){const r=yield function(e){return n(this,void 0,void 0,(function*(){const t=d("TON_GIVER_SECRET");if(t){const n=yield e.crypto.nacl_sign_keypair_from_secret_key({secret:t});return n.secret=n.secret.substr(0,64),n}return{public:"2ada2e65ab8eeab09490e3521415f45b6e42df9c760a639bcf53957550b25a16",secret:"172af540e43a524763dd53b26a066d472a97c4de37d5498170564510608250c3"}}))}(t),o=yield function(t,r){var o;return n(this,void 0,void 0,(function*(){const n=d("TON_GIVER_ADDRESS");return n||(yield t.abi.encode_message({abi:(0,c.abiContract)(e.exports.DefaultGiverContract.abi),deploy_set:{tvc:null!==(o=e.exports.DefaultGiverContract.tvc)&&void 0!==o?o:""},signer:(0,c.signerKeys)(r)})).address}))}(t,r),s=new l(e.exports.DefaultGiverContract,{client:t,address:o,signer:(0,c.signerKeys)(r)});return{address:o,sendTo:(e,t)=>n(this,void 0,void 0,(function*(){yield s.run("sendTransaction",{dest:e,value:t,bounce:!1})}))}}))}static getGiverForClient(e){return n(this,void 0,void 0,(function*(){const t=this.findGiverForClient(e);if(t)return t;const n=yield this.createGiver(e);return this.giversByClient.push({client:e,giver:n}),n}))}constructor(e,t){var n,r,o,s,i;this.syncLastTransLt=null,this.cachedBoc=null,this.subscriptions=null,this.contract=e,this.client=null!==(n=null==t?void 0:t.client)&&void 0!==n?n:c.TonClient.default,this.abi=(0,c.abiContract)(e.abi),this.signer=null!==(r=null==t?void 0:t.signer)&&void 0!==r?r:(0,c.signerNone)(),this.address=null!==(o=null==t?void 0:t.address)&&void 0!==o?o:null,this.initData=null!==(s=null==t?void 0:t.initData)&&void 0!==s?s:null,this.useCachedState=null!==(i=null==t?void 0:t.useCachedState)&&void 0!==i&&i}getAddress(){return n(this,void 0,void 0,(function*(){let e=this.address;if(null===e){const t=this.getParamsOfDeployMessage({initFunctionName:null});e=(yield this.client.abi.encode_message(t)).address,this.address=e}return e}))}getParamsOfDeployMessage(e){var t;if(!this.contract.tvc)throw u.missingTVC();const n={abi:this.abi,signer:this.signer,deploy_set:{tvc:this.contract.tvc}};return this.initData&&(n.deploy_set.initial_data=this.initData),null!==(null==e?void 0:e.initFunctionName)&&(n.call_set={function_name:null!==(t=null==e?void 0:e.initFunctionName)&&void 0!==t?t:"constructor"},void 0!==(null==e?void 0:e.initInput)&&(n.call_set.input=e.initInput)),n}calcDeployFees(e){return n(this,void 0,void 0,(function*(){const t=yield this.getParamsOfDeployMessage(e),n=yield this.client.abi.encode_message(t);return(yield this.client.tvm.run_executor({account:(0,c.accountForExecutorUninit)(),abi:this.abi,message:n.message})).fees}))}deploy(e){return n(this,void 0,void 0,(function*(){const t=this.getParamsOfDeployMessage(e),n=null==e?void 0:e.useGiver,r=!0===n?yield l.getGiverForClient(this.client):n;this.address=(yield this.client.abi.encode_message(t)).address,r&&(yield r.sendTo(this.address,1e10));const o=yield this.client.processing.process_message({message_encode_params:t,send_events:!1});return this.needSyncWithTransaction(o.transaction),o}))}deployLocal(e){return n(this,void 0,void 0,(function*(){const t=this.getParamsOfDeployMessage(e),{address:n,message:r}=yield this.client.abi.encode_message(t),o=yield this.client.tvm.run_executor({account:(0,c.accountForExecutorUninit)(),abi:this.abi,message:r,return_updated_account:!0});return this.address=n,this.cachedBoc=o.account,o}))}calcRunFees(e,t){return n(this,void 0,void 0,(function*(){const n=yield this.client.abi.encode_message({address:yield this.getAddress(),abi:this.abi,signer:this.signer,call_set:{function_name:e,input:t}});let r;return r=yield this.client.tvm.run_executor({account:(0,c.accountForExecutorAccount)(yield this.boc()),abi:this.abi,message:n.message}),r.fees}))}run(e,t,r){var o;return n(this,void 0,void 0,(function*(){const n=yield this.client.processing.process_message({message_encode_params:{address:yield this.getAddress(),abi:this.abi,signer:null!==(o=null==r?void 0:r.signer)&&void 0!==o?o:this.signer,call_set:{function_name:e,input:t}},send_events:!1});return this.needSyncWithTransaction(n.transaction),n}))}runLocal(e,t,r){return n(this,void 0,void 0,(function*(){const n=yield this.client.abi.encode_message({address:yield this.getAddress(),abi:this.abi,signer:this.signer,call_set:{function_name:e,input:t}});let o;return o=(null==r?void 0:r.performAllChecks)?yield this.client.tvm.run_executor({account:(0,c.accountForExecutorAccount)(yield this.boc()),abi:this.abi,message:n.message,return_updated_account:!0}):yield this.client.tvm.run_tvm({account:yield this.boc(),abi:this.abi,message:n.message,return_updated_account:!0}),o.account&&(this.cachedBoc=o.account),o}))}needSyncWithTransaction(e){!e.aborted&&e.lt&&(this.syncLastTransLt=e.lt,this.cachedBoc=null)}boc(){return n(this,void 0,void 0,(function*(){if(this.cachedBoc&&this.useCachedState)return this.cachedBoc;const e=yield this.getAddress(),t=this.client.net;if(this.syncLastTransLt){const n=yield t.query_collection({collection:"accounts",filter:{id:{eq:e},last_trans_lt:{ge:this.syncLastTransLt}},result:"boc"});if(n.result.length>0){const e=n.result[0].boc;if(this.syncLastTransLt=null,e)return this.cachedBoc=e,e;throw u.missingBOC()}}try{const e=(yield t.wait_for_collection({collection:"accounts",filter:{id:{eq:this.address}},result:"boc",timeout:1e3})).result.boc;if(e)return this.cachedBoc=e,e;throw u.missingBOC()}catch(e){if(603===e.code)throw u.missingBOC();throw e}}))}refresh(){this.cachedBoc=null}getAccount(){return n(this,void 0,void 0,(function*(){try{const e=yield this.boc();return(yield this.client.boc.parse_account({boc:e})).parsed}catch(e){if(e.code===r.ACC_NOT_EXISTS)return{acc_type:i.nonExist};throw e}}))}subscribeAccount(e,t){return n(this,void 0,void 0,(function*(){yield this.subscribe("accounts",{id:{eq:yield this.getAddress()}},e,t)}))}subscribeTransactions(e,t){return n(this,void 0,void 0,(function*(){const n=yield this.getAddress();yield this.subscribe("transactions",{account_addr:{eq:n},status:{eq:5}},e,t)}))}subscribeMessages(e,t){return n(this,void 0,void 0,(function*(){const n=yield this.getAddress();yield this.subscribe("messages",{status:{eq:5},src:{eq:n},OR:{status:{eq:5},dst:{eq:n}}},e,t)}))}decodeMessage(e){return n(this,void 0,void 0,(function*(){return yield c.TonClient.default.abi.decode_message({abi:this.abi,message:e})}))}decodeMessageBody(e,t){return n(this,void 0,void 0,(function*(){return yield c.TonClient.default.abi.decode_message_body({abi:this.abi,body:e,is_internal:t})}))}getBalance(){return n(this,void 0,void 0,(function*(){return(yield this.getAccount()).balance}))}subscribe(e,t,r,o){var s,i;return n(this,void 0,void 0,(function*(){const n=this.subscriptions&&this.subscriptions.get(e);n?(null===(s=this.subscriptions)||void 0===s||s.delete(e),yield this.client.net.unsubscribe(n)):this.subscriptions||(this.subscriptions=new Map);const a=yield this.client.net.subscribe_collection({collection:e,filter:t,result:r},((e,t)=>{100===t&&o(e.result)}));null===(i=this.subscriptions)||void 0===i||i.set(e,a)}))}free(){return n(this,void 0,void 0,(function*(){if(this.subscriptions){const e=this.subscriptions.values();this.subscriptions=null;for(const t of e)yield this.client.net.unsubscribe(t)}}))}}function d(e){const t=eval;try{return t(`process.env.${e}`)}catch(e){return}}e.exports.Account=l,l.giversByClient=[],e.exports.DefaultGiverContract={abi:{"ABI version":2,header:["time","expire"],functions:[{name:"sendTransaction",inputs:[{name:"dest",type:"address"},{name:"value",type:"uint128"},{name:"bounce",type:"bool"}],outputs:[]},{name:"getMessages",inputs:[],outputs:[{components:[{name:"hash",type:"uint256"},{name:"expireAt",type:"uint64"}],name:"messages",type:"tuple[]"}]},{name:"upgrade",inputs:[{name:"newcode",type:"cell"}],outputs:[]},{name:"constructor",inputs:[],outputs:[]}],data:[],events:[]},tvc:"te6ccgECGgEAA9sAAgE0BgEBAcACAgPPIAUDAQHeBAAD0CAAQdgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAIm/wD0pCAiwAGS9KDhiu1TWDD0oQkHAQr0pCD0oQgAAAIBIAwKAfz/fyHtRNAg10nCAZ/T/9MA9AX4an/4Yfhm+GKOG/QFbfhqcAGAQPQO8r3XC//4YnD4Y3D4Zn/4YeLTAAGOEoECANcYIPkBWPhCIPhl+RDyqN4j+EL4RSBukjBw3rry4GUh0z/THzQx+CMhAb7yuSH5ACD4SoEBAPQOIJEx3rMLAE7y4Gb4ACH4SiIBVQHIyz9ZgQEA9EP4aiMEXwTTHwHwAfhHbpLyPN4CASASDQIBWBEOAQm46Jj8UA8B/vhBbo4S7UTQ0//TAPQF+Gp/+GH4Zvhi3tFwbW8C+EqBAQD0hpUB1ws/f5NwcHDikSCONyMjI28CbyLIIs8L/yHPCz8xMQFvIiGkA1mAIPRDbwI0IvhKgQEA9HyVAdcLP3+TcHBw4gI1MzHoXwPIghB3RMfighCAAAAAsc8LHyEQAKJvIgLLH/QAyIJYYAAAAAAAAAAAAAAAAM8LZoEDmCLPMQG5lnHPQCHPF5Vxz0EhzeIgyXH7AFswwP+OEvhCyMv/+EbPCwD4SgH0AMntVN5/+GcAxbkWq+f/CC3Rxt2omgQa6ThAM/p/+mAegL8NT/8MPwzfDFHDfoCtvw1OADAIHoHeV7rhf/8MTh8Mbh8Mz/8MPFvfCNJeRnJuPwzcXwAaPwhZGX//CNnhYB8JQD6AGT2qj/8M8AIBIBUTAde7Fe+TX4QW6OEu1E0NP/0wD0Bfhqf/hh+Gb4Yt76QNcNf5XU0dDTf9/XDACV1NHQ0gDf0SIiInPIcc8LASLPCgBzz0AkzxYj+gKAac9Acs9AIMki+wBfBfhKgQEA9IaVAdcLP3+TcHBw4pEggUAJKOLfgjIgG7n/hKIwEhAYEBAPRbMDH4at4i+EqBAQD0fJUB1ws/f5NwcHDiAjUzMehfA18D+ELIy//4Rs8LAPhKAfQAye1Uf/hnAgEgFxYAx7jkYYdfCC3Rwl2omhp/+mAegL8NT/8MPwzfDFvamj8IXwikDdJGDhvXXlwMvwAfCFkZf/8I2eFgHwlAPoAZPaqfAeQfYIQaHaPdqn4ARh8IWRl//wjZ4WAfCUA+gBk9qo//DPACAtoZGAAtr4QsjL//hGzwsA+EoB9ADJ7VT4D/IAgAdacCHHAJ0i0HPXIdcLAMABkJDi4CHXDR+S8jzhUxHAAJDgwQMighD////9vLGS8jzgAfAB+EdukvI83o"}})),o.register("2q1zK",(function(e,t){var n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e.exports&&e.exports.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(e.exports,"__esModule",{value:!0}),r(o("8pSzq"),e.exports),r(o("iZBDf"),e.exports)})),o("27Lyk").register(JSON.parse('{"9vqfN":"index.d2f25738.js","2zmuV":"nekoton_wasm_bg.c7fed5c9.wasm"}'));const s=e=>Number.isFinite(e)&&!Number.isNaN(e),i=e=>"object"==typeof e&&null!==e,a=e=>i(e)&&s(e.col)&&s(e.row),c=e=>Array.isArray(e)&&s(e[0])&&s(e[1]),u=(e,t)=>t+e*(1&t)>>1;const l=([e,t,n=-e-t])=>({q:e,r:t,s:n});function d({q:e,r:t,s:n}){const r=s(e),o=s(t),i=s(n);if(r&&o&&i)return{q:e,r:t,s:n};if(r&&o)return{q:e,r:t,s:-e-t};if(r&&i)return{q:e,r:-e-n,s:n};if(o&&i)return{q:-t-n,r:t,s:n};throw new TypeError(`Can't determine three cube coordinates from less than two coordinates. Received: { q: ${e}, r: ${t}, s: ${n} }.`)}var _=(e=>(e.FLAT="FLAT",e.POINTY="POINTY",e))(_||{});function p(e,t){if((e=>i(e)&&s(e.x)&&s(e.y))(e))return e;if(!t)throw new TypeError(`Supply a bounding box ({ width: number, height: number }). Received: ${JSON.stringify(t)}`);if("topLeft"===e)return{x:-.5*t.width,y:-.5*t.height};throw new TypeError(`Invalid origin: ${JSON.stringify(e)}. Origin must be expressed as a Point ({ x: number, y: number }) or the string 'topLeft'.`)}class g{static get settings(){const{dimensions:e,orientation:t,origin:n,offset:r}=this.prototype;return{dimensions:e,orientation:t,origin:n,offset:r}}get center(){const{width:e,height:t,x:n,y:r}=this;return{x:e/2-n,y:t/2-r}}get col(){return y(this).col}get corners(){const{orientation:e,width:t,height:n,x:r,y:o}=this;return e===_.POINTY?b(t,n,r,o):h(t,n,r,o)}get dimensions(){return f.dimensions}get height(){const{orientation:e,dimensions:{yRadius:t}}=this;return e===_.POINTY?2*t:t*Math.sqrt(3)}get isFlat(){return this.orientation===_.FLAT}get isPointy(){return this.orientation===_.POINTY}get orientation(){return f.orientation}get origin(){return f.origin}get offset(){return f.offset}get row(){return y(this).row}get width(){const{orientation:e,dimensions:{xRadius:t}}=this;return e===_.POINTY?t*Math.sqrt(3):2*t}get x(){return m(this).x}get y(){return m(this).y}get s(){return-this.q-this.r}q;r;constructor(e=[0,0]){const{q:t,r:n}=C(this,e);this.q=t,this.r=n}clone(e=this){return new this.constructor(e)}equals(e){return function(e,t){if(a(e)&&a(t))return e.col===t.col&&e.row===t.row;if(Object.hasOwn(e,"col")||Object.hasOwn(t,"col"))throw new Error(`Can't compare coordinates where one are offset coordinates. Either pass two offset coordinates or two axial/cube coordinates. Received: ${JSON.stringify(e)} and ${JSON.stringify(t)}`);const n=c(e)?l(e):e,r=c(t)?l(t):t;return n.q===r.q&&n.r===r.r}(this,a(e)?A(this,e):e)}toString(){return`${this.constructor.name}(${this.q},${this.r})`}translate(e){return function(e,t){const{q:n,r:r,s:o}=d(e),{q:s,r:i,s:a}=d(t),c={q:n+s,r:r+i,s:o+a};return e instanceof g?e.clone(c):c}(this,e)}}const f={dimensions:{xRadius:1,yRadius:1},orientation:_.POINTY,origin:{x:0,y:0},offset:-1},b=(e,t,n,r)=>[{x:n+.5*e,y:r-.25*t},{x:n+.5*e,y:r+.25*t},{x:n,y:r+.5*t},{x:n-.5*e,y:r+.25*t},{x:n-.5*e,y:r-.25*t},{x:n,y:r-.5*t}],h=(e,t,n,r)=>[{x:n+.25*e,y:r-.5*t},{x:n+.5*e,y:r},{x:n+.25*e,y:r+.5*t},{x:n-.25*e,y:r+.5*t},{x:n-.5*e,y:r},{x:n-.25*e,y:r-.5*t}];function w(e){const{dimensions:t,orientation:n,origin:r,offset:o}={...f,...e};return class extends g{get dimensions(){return function(e,t){if(i(e)&&e.xRadius>0&&e.yRadius>0)return e;if(i(e)&&e.width>0&&e.height>0){const{width:n,height:r}=e;return t===_.POINTY?{xRadius:n/Math.sqrt(3),yRadius:r/2}:{xRadius:n/2,yRadius:r/Math.sqrt(3)}}if(e>0)return{xRadius:e,yRadius:e};throw new TypeError(`Invalid dimensions: ${JSON.stringify(e)}. Dimensions must be expressed as an Ellipse ({ xRadius: number, yRadius: number }), a Rectangle ({ width: number, height: number }) or a number.`)}(t,n)}get orientation(){return n}get origin(){return p(r,this)}get offset(){return o}}}const y=({q:e,r:t,offset:n,isPointy:r})=>r?((e,t,n)=>({col:e+u(n,t),row:t}))(e,t,n):((e,t,n)=>({col:e,row:t+u(n,e)}))(e,t,n),m=({orientation:e,dimensions:{xRadius:t,yRadius:n},origin:{x:r,y:o},q:s,r:i})=>e===_.POINTY?{x:t*Math.sqrt(3)*(s+i/2)-r,y:3*n/2*i-o}:{x:3*t/2*s-r,y:n*Math.sqrt(3)*(i+s/2)-o},v=(e,t,n)=>{const r=e-u(n,t);return{q:r,r:t,s:-r-t}},x=(e,t,n)=>{const r=e,o=t-u(n,e);return{q:r,r:o,s:-r-o}},A=({offset:e,orientation:t},{col:n,row:r})=>t===_.POINTY?v(n,r,e):x(n,r,e),S=e=>{const{q:t,r:n,s:r}=d(e);let o=Math.round(t),s=Math.round(n),i=Math.round(r);const a=Math.abs(t-o),c=Math.abs(n-s),u=Math.abs(r-i);return a>c&&a>u?o=-s-i:c>u?s=-o-i:i=-o-s,{q:o,r:s,s:i}};function C(e,t){return c(t)?l(t):a(t)?A(e,t):d(t)}function O(e,t,n){const{q:r,r:o,s:s}=C(e,t),{q:i,r:a,s:c}=C(e,n);return Math.max(Math.abs(r-i),Math.abs(o-a),Math.abs(s-c))}var E=(e=>(e.CLOCKWISE="CLOCKWISE",e.COUNTERCLOCKWISE="COUNTERCLOCKWISE",e))(E||{}),k=(e=>(e[e.N=0]="N",e[e.NE=1]="NE",e[e.E=2]="E",e[e.SE=3]="SE",e[e.S=4]="S",e[e.SW=5]="SW",e[e.W=6]="W",e[e.NW=7]="NW",e))(k||{});const I=[null,{q:1,r:-1},{q:1,r:0},{q:0,r:1},null,{q:-1,r:1},{q:-1,r:0},{q:0,r:-1}],M=[{q:0,r:-1},{q:1,r:-1},null,{q:1,r:0},{q:0,r:1},{q:-1,r:1},null,{q:-1,r:0}],T=(e,t)=>e.clone(e.isPointy?(({offset:e,q:t,r:n,col:r,row:o},s)=>{if(s===k.S||s===k.N){const t=s===k.S?o+1:o-1;return v(r,t,e)}const i=I[s];return{q:t+i.q,r:n+i.r}})(e,t):(({offset:e,q:t,r:n,col:r,row:o},s)=>{if(s===k.E||s===k.W){const t=s===k.E?r+1:r-1;return x(t,o,e)}const i=M[s];return{q:t+i.q,r:n+i.r}})(e,t));function j(e){return Array.isArray(e)?function(t,n){const r=[];let o=n;for(const n of e)for(const e of n(t,o))r.push(o=e);return r}:e}function q(e){return function(e){return e.direction in k}(e)?function({start:e,direction:t,length:n}){return function(r,o){const s=[];let i=r(e??o);!e&&o&&(i=T(i,t));for(let e=0;e<n;e++)s.push(i),i=T(i,t);return s}}(e):function({start:e,stop:t}){return function(n,r){const o=[],s=n(e??r),i=function(e,t){return n=>({q:e.q*(1-n)+t.q*n,r:e.r*(1-n)+t.r*n})}(P(s),P(C(s,t))),a=O(s,s,t),c=1/Math.max(a,1);let u=!e&&r?1:0;for(;u<=a;u++){const e=S(i(c*u));o.push(n(e))}return o}}(e)}function P({q:e,r:t,s:n}){return{q:e+1e-6,r:t+1e-6,s:n+-2e-6}}function R(e,t,{includeSource:n=!0}={}){return function(r,o){const s=[];for(const i of j(e)(r,o)){n&&s.push(i);for(const e of j(t)(r,i))s.push(e)}return s}}k.E,k.N,k.S,k.W;const B=[{q:1,r:0},{q:0,r:1},{q:-1,r:1},{q:-1,r:0},{q:0,r:-1},{q:1,r:-1}];function N({radius:e,start:t,rotation:n}){return function(r,o){const i=t??o??[0,0],a=!t&&o?e:e+1;return R(q({start:t,direction:k.N,length:a}),function(e){const{center:t,rotation:n=E.CLOCKWISE}=e;return function(r,o){const i=n.toUpperCase(),a=[];let c,{radius:u}=e;s(u)?c=r(t).translate({q:u,s:-u}):(c=r(e.start??o),u=O(c,t,c));const{q:l,r:d,s:_}=C(c,t);let p=r({q:l,r:d-u,s:_+u});if(i===E.CLOCKWISE)for(let e=0;e<6;e++)for(let t=0;t<u;t++){const{q:t,r:n}=B[e];p=r({q:p.q+t,r:p.r+n}),a.push(p)}else for(let e=5;e>=0;e--)for(let t=0;t<u;t++){const{q:t,r:n}=B[e];p=r({q:p.q-t,r:p.r-n}),a.push(p)}const g=!e.start&&o,f=a.findIndex((e=>e.equals(c)));return a.slice(f+(g?1:0)).concat(a.slice(0,f))}}({center:i,rotation:n}))(r,o)}}class F{static fromIterable(e){const t=e[Symbol.iterator]().next().value;if(!t)throw new TypeError(`Can't create grid from empty iterable: ${JSON.stringify(e)}`);return new F(t.constructor,e)}static fromJSON({hexSettings:e,coordinates:t}){const n=w(e);return new F(n,t.map((e=>new n(e))))}get size(){return this.#e.size}get pixelWidth(){if(0===this.size)return 0;const{isPointy:e,width:t}=this.hexPrototype,n=this.toArray(),{0:r,length:o,[o-1]:s}=e?n.sort(((e,t)=>t.s-e.s||e.q-t.q)):n.sort(((e,t)=>e.q-t.q));return s.x-r.x+t}get pixelHeight(){if(0===this.size)return 0;const{isPointy:e,height:t}=this.hexPrototype,n=this.toArray(),{0:r,length:o,[o-1]:s}=e?n.sort(((e,t)=>e.r-t.r)):n.sort(((e,t)=>t.s-e.s||e.r-t.r));return s.y-r.y+t}[Symbol.iterator](){return this.#e.values()}get hexPrototype(){return this.#t.prototype}#t;#e=new Map;constructor(e,t=[]){if(e instanceof F)return this.#t=e.#t,void this.setHexes(e);this.#t=e,this.setHexes(this.#n(t))}createHex(e){return new this.#t(e)}getHex(e){const t=this.createHex(e);return this.#e.get(t.toString())}hasHex(e){return this.#e.has(e.toString())}setHexes(e){for(const t of e){const e=t instanceof g?t:new this.#t(t);this.#r(e)}return this}filter(e){const t=new F(this.#t);for(const n of this)e(n)&&t.#r(n);return t}map(e){const t=new F(this.#t);for(const n of this)t.#r(e(n));return t}traverse(e,{bail:t=!1}={}){const n=new F(this.#t);for(const r of this.#n(e)){const e=this.getHex(r);if(e)n.#r(e);else if(t)return n}return n}forEach(e){for(const t of this)e(t);return this}reduce(e,t){if(void 0===t){let t,n,r;for(const o of this)n=r,r=o,n&&(t=e(n,r));return t}let n=t;for(const t of this)n=e(n,t);return n}toArray(){return Array.from(this)}toJSON(){const{dimensions:e,orientation:t,origin:n,offset:r}=this.hexPrototype;return{hexSettings:{dimensions:e,orientation:t,origin:n,offset:r},coordinates:this.toArray()}}toString(){return`${this.constructor.name}(${this.size})`}pointToHex(e,{allowOutside:t=!0}={}){const n=(({dimensions:{xRadius:e,yRadius:t},origin:n,orientation:r},{x:o,y:s})=>(o+=n.x,s+=n.y,r===_.POINTY?S({q:Math.sqrt(3)*o/(3*e)-s/(3*t),r:2/3*(s/t)}):S({q:2/3*(o/e),r:Math.sqrt(3)*s/(3*t)-o/(3*e)})))(this.hexPrototype,e),r=this.getHex(n);return t?r??this.createHex(n):r}distance(e,t,{allowOutside:n=!0}={}){if(n)return O(this.hexPrototype,e,t);const r=this.getHex(e),o=this.getHex(t);return r&&o?O(this.hexPrototype,r,o):void 0}neighborOf(e,t,{allowOutside:n=!0}={}){const r=T(this.createHex(e),t),o=this.getHex(r);return n?o??r:o}#r(e){this.#e.set(e.toString(),e)}#n(e){return this.#o(e)?this.#s(e):Array.isArray(e)&&this.#o(e[0])?this.#s(j(e)):e}#o(e){return"function"==typeof e}#s(e){return e(this.createHex.bind(this))}}const D={x:0,y:0,zoom:1};let L;const H=w({dimensions:52,orientation:"FLAT",origin:{x:-500,y:-400}}),W=document.querySelector("#mainCanvas"),K=document.querySelector("#animationCanvas"),z=W.getContext("2d");K.getContext("2d");let U,G,$,J,V,Q,Y,X,Z,ee,te=0,ne=new F(H),re=!1;async function oe(e){return new Promise((t=>setTimeout(t,e)))}function se(){for(let e of L)e.details&&ie(e);setTimeout(se,200)}function ie(e){let t=Date.now()/1e3;if(1*e.details.lastCalcTime>=t)return;let n=1*e.details.energy,r=1*e.details.energyMax;if(n>r){let o=100*e.details.speed*(t-e.details.lastCalcTime);n-o>r?n-=o:n=r}else n<r&&(n=Math.min(n+e.details.energySec*e.details.speed*(t-e.details.lastCalcTime),r));e.details.lastCalcTime=t,e.details.energy=Math.floor(n)}function ae(){const e=ne.pointToHex({x:D.x,y:D.y}),t=e.x,n=e.y;U=te,le();let r=new F(H,N({radius:L.radius}));for(let e=0;e<L.length;e++)L[e].size=r[e].size,L[e].x===t&&L[e].y===n&&(D.x=Math.round(m(L[e]).x+$+U/2),D.y=Math.round(m(L[e]).y+J))}function ce(){z.setTransform(1,0,0,1,0,0),z.fillStyle="black",z.fillRect(0,0,W.width,W.height),z.translate(-D.x+X,-D.y+Z);for(let e of L){let t=m(e).x,n=m(e).y;if(Math.abs(t-D.x)>X+U||Math.abs(n-D.y)>Z+U)continue;e.highlight&&(z.strokeStyle="white",z.beginPath(),z.moveTo(t+G,n-J),z.lineTo(t+$,n),z.lineTo(t+G,n+J),z.lineTo(t-G,n+J),z.lineTo(t-$,n),z.lineTo(t-G,n-J),z.closePath(),z.stroke());let r=e.details?`${e.details.color.r}, ${e.details.color.g}, ${e.details.color.b}`:e.type;z.fillStyle=`rgba(${r},1)`,z.beginPath(),z.moveTo(t+V,n-Y),z.lineTo(t+Q,n),z.lineTo(t+V,n+Y),z.lineTo(t-V,n+Y),z.lineTo(t-Q,n),z.lineTo(t-V,n-Y),z.closePath(),z.fill(),ue(z,t,n-U/2,`${e.q};${e.r}`),e.details&&(ue(z,t,n,`${e.details.energy}`),ue(z,t,n+U/2,"lvl: "+(1*e.details.level+1)))}requestAnimationFrame(ce)}function ue(e,t,n,r,o=10,s="white",i="center"){let a=o*(D.zoom+1)+"px Georgia";e.font=a,e.fillStyle=s,e.textAlign=i,e.fillText(r,t,n,U)}function le(){G=U/2,$=U,J=U/2*Math.sqrt(3),V=.95*G,Q=.95*$,Y=.95*J}function de(){W.width=window.innerWidth,W.height=window.innerHeight,K.width=window.innerWidth,K.height=window.innerHeight,X=W.width/2,Z=W.height/2;const e=Math.min(X,Z);te=e/7,console.log("halfCanvas",X,Z),console.log("scales",te)}K.addEventListener("click",(async({offsetX:e,offsetY:t})=>{if(console.log("click",re),await oe(500),console.log("click",re),re)return;e+=D.x-W.width/2,t+=D.y-W.height/2;const n=ne.pointToHex({x:e,y:t});for(let e of L)e.x==n.x&&e.y==n.y?e.highlight=!e.highlight:e.highlight=!1})),K.addEventListener("dblclick",(async({offsetX:e,offsetY:t})=>{re=!0,console.log("dblclick",re),await oe(500),re=!1,console.log("dblclick",re),e+=D.x-W.width/2,t+=D.y-W.height/2;const n=ne.pointToHex({x:e,y:t});let r,o;console.log(n);for(let e of L)e.highlight&&(r=e),e.x==n.x&&e.y==n.y&&(o=e);if(!o)return;if(r&&!r.details)return;console.log("hHex",r),console.log("tHex",o);let s={x:n.q,y:n.r,z:n.s};if(r)if(r.address.toString()==o.address.toString())await ee.upgradeCell(o.address);else{if(1!=function(e,t){return Math.max(Math.abs(e.q-t.q),Math.abs(e.r-t.r),Math.abs(e.s-t.s))}(r,o))return;let e=function(e){if(!e.details)return 0;let t=document.querySelector('input[name="energy"]:checked').value;return Math.floor(e.details.energy*t/100)}(r);console.log("energy",e),o.details?(i=r.details.color,a=o.details.color,i.r==a.r&&i.g==a.g&&i.b==a.b?await ee.helpCell(r.address,s,e):await ee.attkCell(r.address,s,e)):await ee.markCell(r.address,s,e)}else o.details||await ee.newGame(s);var i,a})),window.addEventListener("resize",(()=>{de(),ae()}));var _e={};e(_e,"getDetailsRouter",(()=>wt)),e(_e,"routerLiders",(()=>ct)),e(_e,"routerDetails",(()=>at)),e(_e,"newRouter",(()=>bt)),e(_e,"getAddressCells",(()=>lt)),e(_e,"subscribeAllCellState",(()=>ut)),e(_e,"getDetailsCell",(()=>ht)),e(_e,"setMap",(()=>ot)),e(_e,"init",(()=>st)),e(_e,"newGame",(()=>dt)),e(_e,"markCell",(()=>_t)),e(_e,"upgradeCell",(()=>pt)),e(_e,"helpCell",(()=>gt)),e(_e,"attkCell",(()=>ft)),e(_e,"calcRewards",(()=>At)),e(_e,"getRewards",(()=>Ct)),e(_e,"claimReward",(()=>St)),e(_e,"destroyCells",(()=>xt)),e(_e,"subscribePermissionsChanged",(()=>Ot));var pe=o("dLh7e"),ge={},fe=ge&&ge.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),be=ge&&ge.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),he=ge&&ge.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&fe(t,e,n);return be(t,e),t},we=ge&&ge.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||fe(t,e,n)},ye=ge&&ge.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ge,"__esModule",{value:!0});const me=he(o("6Ah9y")),ve=me,xe=ye(o("ejgJV"));let Ae,Se=!1;const Ce=new Promise(((e,t)=>{Ae={resolve:e,reject:t}}));xe.default.ensureNekotonLoaded=e=>(Se||(Se=!0,(0,me.default)(e).then(Ae.resolve).catch(Ae.reject)),Ce),xe.default.nekoton=ve,xe.default.fetch=fetch,xe.default.debugLog=console.debug,we(o("6G3Ac"),ge);var Oe=o("2q1zK"),Ee=Oe.TonClient,ke=Oe.signerKeys,Ie=Oe.signerNone,Me=o("jZFoc").libWeb,Te={},je=Te&&Te.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),qe=Te&&Te.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||je(t,e,n)};Object.defineProperty(Te,"__esModule",{value:!0}),qe(o("1wmcB"),Te);var Pe=Te.Account;Ee.useBinaryLibrary(Me);var Re;Re=JSON.parse('{"ABI version":2,"version":"2.2","header":["pubkey","time","expire"],"functions":[{"name":"constructor","inputs":[{"name":"codeCell","type":"cell"},{"name":"roundTime","type":"uint64"},{"name":"radius","type":"uint64"},{"name":"speed","type":"uint64"},{"name":"userCount","type":"uint64"},{"name":"name","type":"string"}],"outputs":[]},{"name":"getDetails","inputs":[],"outputs":[{"name":"nonce","type":"uint32"},{"name":"endTime","type":"uint128"},{"name":"roundTime","type":"uint64"},{"name":"radius","type":"uint64"},{"name":"speed","type":"uint64"},{"name":"userCount","type":"uint64"},{"name":"name","type":"string"},{"name":"root","type":"address"}]},{"name":"getUsers","inputs":[],"outputs":[{"name":"users","type":"map(address,uint128)"}]},{"name":"getRewards","inputs":[],"outputs":[{"name":"rewards","type":"map(address,uint128)"}]},{"name":"winCount","inputs":[],"outputs":[{"name":"count","type":"uint128"}]},{"name":"getAddressCells","inputs":[{"components":[{"name":"x","type":"int64"},{"name":"y","type":"int64"},{"name":"z","type":"int64"}],"name":"coords","type":"tuple[]"}],"outputs":[{"name":"addreses","type":"address[]"}]},{"name":"newGame","inputs":[{"components":[{"name":"x","type":"int64"},{"name":"y","type":"int64"},{"name":"z","type":"int64"}],"name":"baseCoord","type":"tuple"}],"outputs":[]},{"name":"_newCell","inputs":[{"name":"owner","type":"address"},{"components":[{"name":"x","type":"int64"},{"name":"y","type":"int64"},{"name":"z","type":"int64"}],"name":"baseCoord","type":"tuple"},{"components":[{"name":"x","type":"int64"},{"name":"y","type":"int64"},{"name":"z","type":"int64"}],"name":"targetCoord","type":"tuple"},{"components":[{"name":"r","type":"uint8"},{"name":"g","type":"uint8"},{"name":"b","type":"uint8"}],"name":"color","type":"tuple"},{"name":"energy","type":"uint64"}],"outputs":[]},{"name":"onCellOwnerChanged","inputs":[{"name":"oldOwner","type":"address"},{"name":"newOwner","type":"address"}],"outputs":[]},{"name":"destroyCells","inputs":[{"name":"cells","type":"address[]"}],"outputs":[]},{"name":"calcRewards","inputs":[],"outputs":[]},{"name":"claimReward","inputs":[],"outputs":[]},{"name":"_resolveCell","inputs":[{"components":[{"name":"x","type":"int64"},{"name":"y","type":"int64"},{"name":"z","type":"int64"}],"name":"coord","type":"tuple"}],"outputs":[{"name":"cellAddress","type":"address"}]},{"name":"_users","inputs":[],"outputs":[{"name":"_users","type":"map(address,uint128)"}]},{"name":"_rewards","inputs":[],"outputs":[{"name":"_rewards","type":"map(address,uint128)"}]}],"data":[{"key":1,"name":"_nonce","type":"uint32"}],"events":[{"name":"CellCreated","inputs":[{"name":"owner","type":"uint256"},{"components":[{"name":"x","type":"int64"},{"name":"y","type":"int64"},{"name":"z","type":"int64"}],"name":"coord","type":"tuple"}],"outputs":[]}],"fields":[{"name":"_pubkey","type":"uint256"},{"name":"_timestamp","type":"uint64"},{"name":"_constructorFlag","type":"bool"},{"name":"_nonce","type":"uint32"},{"name":"_root","type":"address"},{"name":"_users","type":"map(address,uint128)"},{"name":"_rewards","type":"map(address,uint128)"},{"name":"_codeCell","type":"cell"},{"name":"_roundTime","type":"uint64"},{"name":"_radius","type":"uint64"},{"name":"_speed","type":"uint64"},{"name":"_userCount","type":"uint64"},{"name":"_name","type":"string"},{"name":"_endTime","type":"uint128"}]}');var Be;Be=JSON.parse('{"ABI version":2,"version":"2.2","header":["pubkey","time","expire"],"functions":[{"name":"constructor","inputs":[{"name":"router","type":"address"},{"name":"owner","type":"address"},{"name":"endTime","type":"uint128"},{"name":"speed","type":"uint64"},{"components":[{"name":"r","type":"uint8"},{"name":"g","type":"uint8"},{"name":"b","type":"uint8"}],"name":"color","type":"tuple"},{"name":"energy","type":"uint64"}],"outputs":[]},{"name":"getRouter","inputs":[],"outputs":[{"name":"router","type":"address"}]},{"name":"getDetails","inputs":[],"outputs":[{"components":[{"name":"x","type":"int64"},{"name":"y","type":"int64"},{"name":"z","type":"int64"}],"name":"coord","type":"tuple"},{"components":[{"name":"r","type":"uint8"},{"name":"g","type":"uint8"},{"name":"b","type":"uint8"}],"name":"color","type":"tuple"},{"name":"level","type":"uint64"},{"name":"speed","type":"uint64"},{"name":"endTime","type":"uint128"},{"name":"energy","type":"uint64"},{"name":"energySec","type":"uint64"},{"name":"energyMax","type":"uint64"},{"name":"lastCalcTime","type":"uint128"},{"name":"owner","type":"address"}]},{"name":"calculateEnergy","inputs":[],"outputs":[{"name":"energy","type":"uint64"}]},{"name":"markCell","inputs":[{"components":[{"name":"x","type":"int64"},{"name":"y","type":"int64"},{"name":"z","type":"int64"}],"name":"targetCoord","type":"tuple"},{"name":"energy","type":"uint64"}],"outputs":[]},{"name":"helpCell","inputs":[{"components":[{"name":"x","type":"int64"},{"name":"y","type":"int64"},{"name":"z","type":"int64"}],"name":"targetCoord","type":"tuple"},{"name":"energy","type":"uint64"}],"outputs":[]},{"name":"_helpCell","inputs":[{"name":"owner","type":"address"},{"components":[{"name":"x","type":"int64"},{"name":"y","type":"int64"},{"name":"z","type":"int64"}],"name":"coord","type":"tuple"},{"components":[{"name":"r","type":"uint8"},{"name":"g","type":"uint8"},{"name":"b","type":"uint8"}],"name":"color","type":"tuple"},{"name":"energy","type":"uint64"}],"outputs":[]},{"name":"attkCell","inputs":[{"components":[{"name":"x","type":"int64"},{"name":"y","type":"int64"},{"name":"z","type":"int64"}],"name":"targetCoord","type":"tuple"},{"name":"energy","type":"uint64"}],"outputs":[]},{"name":"_attkCell","inputs":[{"name":"owner","type":"address"},{"components":[{"name":"x","type":"int64"},{"name":"y","type":"int64"},{"name":"z","type":"int64"}],"name":"coord","type":"tuple"},{"components":[{"name":"r","type":"uint8"},{"name":"g","type":"uint8"},{"name":"b","type":"uint8"}],"name":"color","type":"tuple"},{"name":"energy","type":"uint64"}],"outputs":[]},{"name":"upgradeCell","inputs":[],"outputs":[]},{"name":"_resolveCell","inputs":[{"components":[{"name":"x","type":"int64"},{"name":"y","type":"int64"},{"name":"z","type":"int64"}],"name":"coord","type":"tuple"}],"outputs":[{"name":"cellAddress","type":"address"}]},{"name":"_destroy","inputs":[],"outputs":[]}],"data":[{"components":[{"name":"x","type":"int64"},{"name":"y","type":"int64"},{"name":"z","type":"int64"}],"key":1,"name":"_coord","type":"tuple"}],"events":[],"fields":[{"name":"_pubkey","type":"uint256"},{"name":"_timestamp","type":"uint64"},{"name":"_constructorFlag","type":"bool"},{"components":[{"name":"x","type":"int64"},{"name":"y","type":"int64"},{"name":"z","type":"int64"}],"name":"_coord","type":"tuple"},{"name":"_costPerLevel","type":"uint64[]"},{"name":"_maxEPerLevel","type":"uint64[]"},{"name":"_farmPerLevel","type":"uint64[]"},{"name":"_deboost","type":"uint64"},{"name":"_router","type":"address"},{"name":"_owner","type":"address"},{"name":"_speed","type":"uint64"},{"name":"_level","type":"uint64"},{"name":"_energy","type":"uint64"},{"name":"_lastCalcTime","type":"uint128"},{"name":"_endTime","type":"uint128"},{"components":[{"name":"r","type":"uint8"},{"name":"g","type":"uint8"},{"name":"b","type":"uint8"}],"name":"_color","type":"tuple"}]}');var Ne;Ne=JSON.parse('{"ABI version":2,"version":"2.2","header":["pubkey","time","expire"],"functions":[{"name":"constructor","inputs":[{"name":"ownerPubkey","type":"uint256"},{"name":"codeRouter","type":"cell"},{"name":"codeCell","type":"cell"}],"outputs":[]},{"name":"getDetails","inputs":[],"outputs":[{"name":"nonce","type":"uint16"},{"name":"owner","type":"uint256"}]},{"name":"newRouter","inputs":[{"name":"roundTime","type":"uint64"},{"name":"radius","type":"uint64"},{"name":"speed","type":"uint64"},{"name":"userCount","type":"uint64"},{"name":"name","type":"string"},{"name":"nonce","type":"uint16"}],"outputs":[]},{"name":"getOwner","inputs":[],"outputs":[{"name":"pubkey","type":"uint256"}]},{"name":"owner","inputs":[{"name":"answerId","type":"uint32"}],"outputs":[{"name":"pubkey","type":"uint256"}]},{"name":"transferOwnership","inputs":[{"name":"newOwner","type":"uint256"}],"outputs":[]}],"data":[{"key":1,"name":"_nonce","type":"uint16"}],"events":[{"name":"RouterCreated","inputs":[{"name":"nonce","type":"uint16"},{"name":"routerAddress","type":"address"}],"outputs":[]},{"name":"OwnershipTransferred","inputs":[{"name":"oldOwner","type":"uint256"},{"name":"newOwner","type":"uint256"}],"outputs":[]}],"fields":[{"name":"_pubkey","type":"uint256"},{"name":"_timestamp","type":"uint64"},{"name":"_constructorFlag","type":"bool"},{"name":"_owner","type":"uint256"},{"name":"_nonce","type":"uint16"},{"name":"_codeRouter","type":"cell"},{"name":"_codeCell","type":"cell"}]}');var Fe={};Fe=JSON.parse('{"testnet":{"router":"0:feed09fdade35488da4e2ff471fa24db69a73642811e41b4e7ac38910329fe06","gameroot":"0:c52d13b935c794fcf603be1bf4b06ec87d58e9bdc36d8823971f9087da242b6b","codeHash":"b8d8b103c3b73e8c00f383d4b7f1d917c3cd11c673cd4aff6310d442d56ce190","endpoint":"https://devnet.evercloud.dev/4b0e77393fba46759305e30cea4aaa95/graphql"},"localnet":{"router":"0:8b0d1c2de2ace40292fd049b6422e275efd3266f9eb47c91cdba9700433d9c84","gameroot":"0:837d96fd1b1c33b70c77ca6a147c9f98a85bc2fdbeaa04ed57ecaf47e205bde0","codeHash":"932b85015228c80167466c1940cc65ee2e1fc5dc869d90423963e2a9bee7c91a","endpoint":"http://localhost/graphql"}}');let De,Le=[];const He=new(0,pe.ProviderRpcClient)({});let We,Ke;const ze=async e=>{try{return(await We.net.query_collection({collection:"accounts",filter:{id:{in:e}},result:"id acc_type balance boc"})).result}catch(e){console.error(e)}},Ue=async(e,t,n,r={},o=!0,s=null)=>{try{const[i,a]=await Promise.all([s||We.net.query_collection({collection:"accounts",filter:{id:{eq:t}},result:"boc"}).then((({result:e})=>e[0].boc)).catch((()=>{})),We.abi.encode_message({abi:{type:"Contract",value:e},address:t,call_set:{function_name:n,input:r},signer:{type:"None"}}).then((({message:e})=>e))]);if(!i)return;let c=await We.tvm.run_tvm({message:a,account:i,abi:{type:"Contract",value:e}});return o&&console.log("output:",c.decoded.output),c.decoded.output}catch(e){console.error(e,n,r)}};function Ge(e,t){document.querySelectorAll(`[data-behavior=${e}]`).forEach(t)}const $e=e=>t=>{t.innerText=e};function Je(){return He.requestPermissions({permissions:["basic","accountInteraction"]})}async function Ve(){console.log("disconnectAction"),await He.disconnect()}async function Qe(){kt("tblRouters",3),console.log("getRoutersAction");const e=await He.getProviderState();let t=(await He.getAccountsByCodeHash({codeHash:Fe[e.selectedConnection].codeHash,limit:50})).accounts.map((e=>e.toString()));console.log("routers",t);let n=await ze(t);console.log("routers",n);for(let e=0;e<n.length;e++){let t=await wt(n[e].id,n[e].boc);if(t){let s,i;var r=new Date(1e3*t.endTime);console.log("date",r),s=Et("tblRouters"),i=s.insertCell(0),i.innerHTML=t.name,i=s.insertCell(1),i.innerHTML=t.radius,i=s.insertCell(2),i.innerHTML=t.userCount,i=s.insertCell(3),i.innerHTML=t.speed,i=s.insertCell(4),i.innerHTML=r.customFormat("#DD#-#MM#-#YYYY# #hh#:#mm#:#ss#"),i=s.insertCell(5);var o=document.createElement("button");o.textContent="Set",o.setAttribute("type","button"),o.setAttribute("addr",n[e].id),o.onclick=Xe,i.appendChild(o),i=s.insertCell(6),i.innerHTML=n[e].id,i.style="visibility: hidden; width: 0px"}}}async function Ye(){console.log("getLiderBoard");await He.getProviderState();let e=(await ct()).users.map((e=>e.toString()));console.log("users",e),kt("tblLiders",1);for(let t=0;t<e.length;t++){let n,r,o=e[t].split(",");n=Et("tblLiders"),r=n.insertCell(0),r.innerHTML=`${o[0].substr(0,6)}...${o[0].substr(-4,4)}`,r=n.insertCell(1),r.innerHTML=o[1]}}async function Xe(e){console.log("setRouter",e);let t=e.target.attributes.addr.value;console.log("address",t);const n=(await He.getProviderState()).selectedConnection;Fe[n].router=t;for(let e of Le)e.highlight=!1,e.details=void 0;let r=await at();console.log("details",r),De(r.radius),async function(){let e=[];for(const t of Le)e.push({x:t.q,y:t.r,z:t.s});let t=await lt(e);t=t.map((e=>e.toString()));let n=0;for(const e of Le)e.address=t[n].toString(),n++;await ut(t);let r=await ze(t);console.log("accs",r);for(let e=0;e<r.length;e++){let t=await ht(r[e].id,r[e].boc);if(t){let n=it(r[e].id);console.log("hex",n),n&&(n.details=t)}}}(),Ye()}async function Ze(){let e=document.getElementById("router_name").value,t=document.getElementById("router_radius").value,n=document.getElementById("router_users").value,r=document.getElementById("router_speed").value,o=document.getElementById("router_time").value;console.log("addRouterAction",e,t,r,o);await bt(e,t,n,r,o);await Qe()}async function et(){const e=await He.getProviderState(),t=e.permissions,n=e.selectedConnection;if(nt(n)&&t.accountInteraction){const e=await He.getProviderState();(await He.subscribe("contractStateChanged",{address:nt(e.selectedConnection)})).on("data",(e=>{console.log("permissionsChanged:",{address:e.address,state:e.state})})),rt("main");const o=t.accountInteraction;let s=o.address.toString(),i=o.publicKey.toString();Ge("address",$e(`${s.substr(0,6)}...${s.substr(-4,4)}`)),Ge("publicKey",$e(`${i.substr(0,6)}...${i.substr(-4,4)}`)),Ge("disconnectAction",(e=>e.onclick=Ve)),Ge("getRoutersAction",(e=>e.onclick=Qe)),Ge("addRouterAction",(e=>e.onclick=Ze)),Ge("calcRewardsAction",(e=>e.onclick=yt)),Ge("claimRewardAction",(e=>e.onclick=mt)),Ge("destroyCellsAction",(e=>e.onclick=vt)),console.log("endpoint:",Fe[n].endpoint),r=Fe[n].endpoint,We=new Ee({network:{endpoints:[r],message_retries_count:3,message_processing_timeout:6e4}}),Ke=((e,t="",n=null)=>{try{return new Pe({abi:e},{address:t,signer:n?ke(n):Ie(),client:We})}catch(e){console.error(e)}})({}),await Qe()}else{Ge("connect",(e=>e.onclick=Je)),rt("login");Ge("connect",(e=>{const t=!nt(n);e.disabled=t,e.innerText=t?"Contract not found":`Connect with ${n}`}))}var r}async function tt(e){const t=`<span class="badge bg-${"mainnet"===e?"success":"secondary"}">${e}</span>`;Ge("network",(e=>e.innerHTML=t)),await et()}function nt(e,t="router"){return Fe[e]&&Fe[e][t]?new(0,pe.Address)(Fe[e][t]):null}function rt(e){console.log("switchScreen:",e),["extension","login","main"].forEach((t=>{Ge(t,(n=>n.style.display=e===t?"table-row":"none"))}))}function ot(e){Le=e}async function st(e){if(De=e,await He.hasProvider())try{await He.ensureInitialized(),await async function(){const e=await He.getProviderState();console.log("selectedConnection:",e.selectedConnection),await tt(e.selectedConnection),(await He.subscribe("networkChanged")).on("data",(e=>{console.log("networkChanged:",e.selectedConnection),tt(e.selectedConnection)})),(await He.subscribe("permissionsChanged")).on("data",(async e=>{console.log("permissionsChanged:",e.permissions),await et()}))}()}catch(e){throw e}else rt("extension")}function it(e){let t;for(const n of Le)if(n.address==e){t=n;break}return t}async function at(){const e=await He.getProviderState(),t=new He.Contract(Re,nt(e.selectedConnection,"router"));try{let e;return e=await t.methods.getDetails({}).call(),console.log("getDetails router",e),e}catch(e){console.error(e),e instanceof pe.TvmException&&console.error(e.code)}}async function ct(){const e=await He.getProviderState(),t=new He.Contract(Re,nt(e.selectedConnection,"router"));try{let e;return e=await t.methods.getUsers({}).call(),console.log("getUsers router",e),e}catch(e){console.error(e),e instanceof pe.TvmException&&console.error(e.code)}}async function ut(e){try{const t=await He.getProviderState();(await He.subscribe("contractStateChanged",{address:nt(t.selectedConnection)})).on("data",(e=>{Ye()})),await Ke.free(),await Ke.subscribe("accounts",{id:{in:e}},"id boc",(async e=>{console.log("onAcc:",e.id);let t=it(e.id);console.log("hex",t),t&&(t.details=await ht(e.id,e.boc))}),(async e=>{console.log("onError:",e)}))}catch(e){console.error(e),e instanceof pe.TvmException&&console.error(e.code)}}async function lt(e){const t=await He.getProviderState(),n=new He.Contract(Re,nt(t.selectedConnection,"router"));try{let t;return t=await n.methods.getAddressCells({coords:e}).call(),console.log("getAddressCells router",t),t.addreses}catch(e){console.error(e),e instanceof pe.TvmException&&console.error(e.code)}}async function dt(e){const t=await He.getProviderState(),n=t.permissions;if(!n.accountInteraction)return;const r=n.accountInteraction,o=new He.Contract(Re,nt(t.selectedConnection,"router"));try{console.log("newGame",1);let t=await o.methods.newGame({baseCoord:e}).send({from:r.address.toString(),amount:"12000000000"});console.log("newGame",t)}catch(e){console.error(e),e instanceof pe.TvmException&&console.error(e.code)}}async function _t(e,t,n){const r=(await He.getProviderState()).permissions;if(!r.accountInteraction)return;const o=r.accountInteraction,s=new He.Contract(Be,e);try{console.log("markCell",1);let e=await s.methods.markCell({targetCoord:t,energy:n}).send({from:o.address.toString(),amount:"2000000000"});console.log("markCell",e)}catch(e){console.error(e),e instanceof pe.TvmException&&console.error(e.code)}}async function pt(e){const t=(await He.getProviderState()).permissions;if(!t.accountInteraction)return;const n=t.accountInteraction,r=new He.Contract(Be,e);try{console.log("upgradeCell",1);let e=await r.methods.upgradeCell({}).send({from:n.address.toString(),amount:"1000000000"});console.log("upgradeCell",e)}catch(e){console.error(e),e instanceof pe.TvmException&&console.error(e.code)}}async function gt(e,t,n){const r=(await He.getProviderState()).permissions;if(!r.accountInteraction)return;const o=r.accountInteraction,s=new He.Contract(Be,e);try{console.log("helpCell",1);let e=await s.methods.helpCell({targetCoord:t,energy:n}).send({from:o.address.toString(),amount:"1000000000"});console.log("helpCell",e)}catch(e){console.error(e),e instanceof pe.TvmException&&console.error(e.code)}}async function ft(e,t,n){const r=(await He.getProviderState()).permissions;if(!r.accountInteraction)return;const o=r.accountInteraction,s=new He.Contract(Be,e);try{console.log("attkCell",1);let e=await s.methods.attkCell({targetCoord:t,energy:n}).send({from:o.address.toString(),amount:"1000000000"});console.log("attkCell",e)}catch(e){console.error(e),e instanceof pe.TvmException&&console.error(e.code)}}async function bt(e,t,n,r,o){const s=await He.getProviderState(),i=s.permissions;if(!i.accountInteraction)return;const a=i.accountInteraction,c=new He.Contract(Ne,Fe[s.selectedConnection].gameroot);try{console.log("newRouter",1);let s=await c.methods.newRouter({roundTime:o,radius:t,speed:r,userCount:n,name:e,nonce:"0"}).send({from:a.address.toString(),amount:"2000000000"});console.log("newRouter",s)}catch(e){console.error(e),e instanceof pe.TvmException&&console.error(e.code)}}async function ht(e,t=null){if(t)try{return await Ue(Be,e,"getDetails",{},!0,t)}catch(e){console.error(e)}const n=new He.Contract(Be,e);try{const e=await n.getFullState();if(null==e.state||!e.state.isDeployed)return null;let t;return t=await n.methods.getDetails({}).call(),console.log("getDetails cell",t),t}catch(e){console.error(e),e instanceof pe.TvmException&&console.error(e.code)}}async function wt(e,t=null){if(t)try{return await Ue(Re,e,"getDetails",{},!0,t)}catch(e){console.error(e)}const n=new He.Contract(Re,e);try{const e=await n.getFullState();if(null==e.state||!e.state.isDeployed)return null;let t;return t=await n.methods.getDetails({}).call(),console.log("getDetails router",t),t}catch(e){console.error(e),e instanceof pe.TvmException&&console.error(e.code)}}async function yt(){await At(),await Ct()}async function mt(){St()}async function vt(){xt()}async function xt(){const e=await He.getProviderState(),t=e.permissions;if(!t.accountInteraction)return;const n=t.accountInteraction,r=new He.Contract(Re,nt(e.selectedConnection,"router"));let o=[];for(const e of Le)e.details&&o.push(e.address);if(console.log("addreses",o),!o.length)return;let s=await ze(o),i=[];for(let e=0;e<s.length&&!(s[e].boc&&(i.push(s[e].id),i.length>=10));e++);if(i.length)try{console.log("destroyCells",1);let e=await r.methods.destroyCells({cells:i}).send({from:n.address.toString(),amount:"10000000000"});console.log("destroyCells",e)}catch(e){console.error(e),e instanceof pe.TvmException&&console.error(e.code)}}async function At(){const e=await He.getProviderState(),t=e.permissions;if(!t.accountInteraction)return;const n=t.accountInteraction,r=new He.Contract(Re,nt(e.selectedConnection,"router"));try{console.log("calcRewards",1);let e=await r.methods.calcRewards({}).send({from:n.address.toString(),amount:"2000000000"});console.log("calcRewards",e)}catch(e){console.error(e),e instanceof pe.TvmException&&console.error(e.code)}}async function St(){const e=await He.getProviderState(),t=e.permissions;if(!t.accountInteraction)return;const n=t.accountInteraction,r=new He.Contract(Re,nt(e.selectedConnection,"router"));try{console.log("claimReward",1);let e=await r.methods.claimReward({}).send({from:n.address.toString(),amount:"1000000000"});console.log("claimReward",e)}catch(e){console.error(e),e instanceof pe.TvmException&&console.error(e.code)}}async function Ct(){const e=await He.getProviderState(),t=new He.Contract(Re,nt(e.selectedConnection,"router"));try{let e;return e=await t.methods.getRewards({}).call(),console.log("getRewards router",e),e.rewards}catch(e){console.error(e),e instanceof pe.TvmException&&console.error(e.code)}}async function Ot(){await He.subscribe("permissionsChanged").on("data",(e=>{console.log(e)}))}function Et(e){var t=document.getElementById(e);return t.insertRow(t.rows.length)}function kt(e,t=1){for(var n=document.getElementById(e);n.rows.length>t;)n.deleteRow(n.rows.length-1)}Date.prototype.customFormat=function(e){var t,n,r,o,s,i,a,c,u,l,d,_,p,g,f,b,h,w,y,m,v,x,A=this;return n=((t=A.getFullYear())+"").slice(-2),s=(i=A.getMonth()+1)<10?"0"+i:i,o=(r=["January","February","March","April","May","June","July","August","September","October","November","December"][i-1]).substring(0,3),u=(l=A.getDate())<10?"0"+l:l,c=(a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][A.getDay()]).substring(0,3),x=l>=10&&l<=20?"th":1==(v=l%10)?"st":2==v?"nd":3==v?"rd":"th",e=e.replace("#YYYY#",t).replace("#YY#",n).replace("#MMMM#",r).replace("#MMM#",o).replace("#MM#",s).replace("#M#",i).replace("#DDDD#",a).replace("#DDD#",c).replace("#DD#",u).replace("#D#",l).replace("#th#",x),0==(g=_=A.getHours())&&(g=24),g>12&&(g-=12),p=g<10?"0"+g:g,d=_<10?"0"+_:_,m=(y=_<12?"am":"pm").toUpperCase(),f=(b=A.getMinutes())<10?"0"+b:b,h=(w=A.getSeconds())<10?"0"+w:w,e.replace("#hhhh#",d).replace("#hhh#",_).replace("#hh#",p).replace("#h#",g).replace("#mm#",f).replace("#m#",b).replace("#ss#",h).replace("#s#",w).replace("#ampm#",y).replace("#AMPM#",m)},async function(e){L=[],ee=e,await ee.init((e=>{L=function(e){let t=new F(H,N({radius:1*e}));console.log("getMap",t.size);for(let e of t)e.type="64, 128, 255",e.highlight=!1;return t}(e),ee.setMap(L)})),W.width=window.innerWidth,W.height=window.innerHeight,K.width=window.innerWidth,K.height=window.innerHeight,le(),de(),ae(),ce(),D.x=X,D.y=Z,se()}(_e),function(){let e=null;document.addEventListener("mouseup",(()=>{clearInterval(e)})),document.addEventListener("keyup",(()=>{clearInterval(e)})),document.addEventListener("keydown",(t=>{switch(console.log("e.code",t.code),t.code){case"ArrowUp":case"KeyW":clearInterval(e),e=setInterval((()=>{D.y-=5}),10);break;case"ArrowLeft":case"KeyA":clearInterval(e),e=setInterval((()=>{D.x-=5}),10);break;case"ArrowRight":case"KeyD":clearInterval(e),e=setInterval((()=>{D.x+=5}),10);break;case"ArrowDown":case"KeyS":clearInterval(e),e=setInterval((()=>{D.y+=5}),10);break;case"Digit1":document.querySelector('input[id="energy20"]').checked=!0;break;case"Digit2":document.querySelector('input[id="energy40"]').checked=!0;break;case"Digit3":document.querySelector('input[id="energy60"]').checked=!0;break;case"Digit4":document.querySelector('input[id="energy80"]').checked=!0;break;case"Digit5":document.querySelector('input[id="energy100"]').checked=!0}}))}();
//# sourceMappingURL=index.d2f25738.js.map
